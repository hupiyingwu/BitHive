//=====回调函数部分=====
//支付服务器jsonp回调
function prepayCallback(data){"undefined"!=typeof frame.prepayCallback&&frame.prepayCallback(data)}function checkOrderCallback(data){"undefined"!=typeof frame.checkPayCallback&&frame.checkPayCallback(data)}function orderReportCallback(data){"undefined"!=typeof frame.orderReportCallback&&frame.orderReportCallback(data)}function setUserData(data){"undefined"!=typeof frame.setUserData&&frame.setUserData(data)}function getLocalData(key){if("undefined"!=typeof frame.getLocalData)return frame.getLocalData(key)}function getUserData(){if("undefined"!=typeof frame.getUserData)return frame.getUserData()}function setThirdUserId(uid){"undefined"!=typeof frame.setThirdUserId&&frame.setThirdUserId(uid)}function getThirdUserId(){if("undefined"!=typeof frame.getThirdUserId)return frame.getThirdUserId()}!function(e){function a(t){if(i[t])return i[t].exports;var o=i[t]={exports:{},id:t,loaded:!1};return e[t].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}var i={};return a.m=e,a.c=i,a.p="",a(0)}([function(e,a,i){var t;t=function(e){wx.config(wxConfig),wx.ready(function(){wx.hideMenuItems({menuList:["menuItem:share:timeline","menuItem:share:QZone"]})}),i(9)}.call(a,i,a,e),!(void 0!==t&&(e.exports=t))},function(e,a){String.prototype.format=function(e){var a=this;return a.replace(String.prototype.format.regex,function(a){var i,t=parseInt(a.substring(1,a.length-1));return i=t>=0?e[t]:t===-1?"{":t===-2?"}":""})},String.prototype.format.regex=new RegExp("{-?[0-9]+}","g"),a.h5debug=function(){};var i="1.4.1";$baseFont=.78125/16;var t={getItem:function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(e,a,i,t,o,n){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="";if(i)switch(i.constructor){case Number:s=i===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+i;break;case String:s="; expires="+i;break;case Date:s="; expires="+i.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(a)+s+(o?"; domain="+o:"")+(t?"; path="+t:"")+(n?"; secure":""),!0},removeItem:function(e,a,i){return!!this.hasItem(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(i?"; domain="+i:"")+(a?"; path="+a:""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),a=e.length,i=0;i<a;i++)e[i]=decodeURIComponent(e[i]);return e}};a.Cookies=t,a.parseUrl=function(e){var a,i,t,o=document.createElement("a"),n={};for(o.href=e,a=o.search.replace(/^\?/,"").split("&"),t=0;t<a.length;t++)i=a[t].split("="),n[i[0]]=i[1];return{fullname:o.protocol+"//"+o.host,protocol:o.protocol,host:o.host,hostname:o.hostname,port:o.port,pathname:o.pathname,search:o.search,searchObject:n,hash:o.hash}},window.modalPortraitTop=4.8828125;var o=function(e,a){var i=function(){n(e)},t={top:4.8828125,overlay:.5,overlayCallback:i};a=$.extend(t,a),window.modalPortraitTop=a.top,$(window).height()<$(window).width()?a.top="40px":a.top=a.top+"em";var o=$("<div id='h5-modal-overlay'></div>");$("body").append(o),$("#h5-modal-overlay").on("click",a.overlayCallback),$("#h5-modal-overlay").bind("touchmove",function(e){e.preventDefault()}),$(".h5c-modal").unbind("touchmove").bind("touchmove",function(e){e.preventDefault()});var s=$("#"+e).outerWidth();$("#h5-modal-overlay").css({display:"block",opacity:0}),$("#h5-modal-overlay").fadeTo(200,a.overlay),$("#"+e).css({display:"block",position:"absolute",opacity:0,"z-index":11e3,left:"50%","margin-left":-(s/2)+"px",top:a.top}),$("#"+e).fadeTo(200,1)},n=function(e){$("#h5-modal-overlay").fadeOut(200).remove(),$("#"+e).css({display:"none"})};a.showModal=o,a.closeModal=n,a.showModalAlert=function(e){$("#h5-modal-alert .h5c-modal-text").text(e),o("h5-modal-alert")},a.modal=function(e){var a={top:4.8828125,overlay:.5,html:"",overlayCallback:null,canCancel:!0,cancelDelay:500},e=$.extend(a,e);window.modalPortraitTop=e.top,$(window).height()<$(window).width()?e.top="40px":e.top=e.top+"em";var i={options:e,status:0,overlay:$("<div id='h5-modal-overlay'></div>"),init:function(){var e=this;this.object=$('<div class="h5c-modal" id="h5c-modal-template"><div class="h5c-modal-content">'+this.options.html+"</div></div>"),this.options.canCancel&&setTimeout(function(){e.overlay.on("click",function(){e.hide(),$.isFunction(e.options.overlayCallback)&&e.options.overlayCallback()}),e.overlay.bind("touchmove",function(e){e.preventDefault()}),$(".h5c-modal").unbind("touchmove").bind("touchmove",function(e){e.preventDefault()})},e.options.cancelDelay)},show:function(){$("body").append(this.overlay).append(this.object),this.overlay.css({display:"block",opacity:0}),this.overlay.fadeTo(200,this.options.overlay);var e=this.object.outerWidth();this.object.css({display:"block",position:"absolute",opacity:0,"z-index":11e3,left:"50%","margin-left":-(e/2)+"px",top:this.options.top}),this.object.fadeTo(200,1)},hide:function(){var e=this;e.object.remove(),e.overlay.remove()}};return i.init(),i},a.modalAlert=function(e){var i={title:"",text:"",yCallback:null,yText:"确定"};e=$.extend(i,e),e.html='<div class="h5c-modal-title"><span>'+e.title+'</span></div><div class="h5c-modal-text">'+e.text+'</div><div class="h5c-modal-bar"><div class="h5c-modal-button h5c-modal-y"><span>'+e.yText+"</span></div></div>";var t=a.modal(e);t.object.find(".h5c-modal-y").on("click",function(){t.hide(),$.isFunction(e.yCallback)&&e.yCallback()}),t.show()},a.modalConfirm=function(e){var i={title:"",text:"",yCallback:null,yText:"确定",nCallback:null,nText:"取消"};e=$.extend(i,e),"undefined"!=typeof e.overlayCallback&&$.isFunction(e.overlayCallback)||(e.overlayCallback=e.nCallback),e.html='<div class="h5c-modal-title"><span>'+e.title+'</span></div><div class="h5c-modal-text">'+e.text+'</div><div class="h5c-modal-bar"><div class="h5c-modal-button h5c-modal-y"><span>'+e.yText+'</span></div><div class="h5c-modal-button h5c-modal-n"><span>'+e.nText+"</span></div></div>";var t=a.modal(e);t.object.find(".h5c-modal-y").on("click",function(){t.hide(),$.isFunction(e.yCallback)&&e.yCallback()}),t.object.find(".h5c-modal-n").on("click",function(){t.hide(),$.isFunction(e.nCallback)&&e.nCallback()}),t.show()},a.modalTip=function(e){var i={text:"",canCancel:!1};e=$.extend(i,e),e.html='<div class="h5c-modal-text">'+e.text+"</div>";var t=a.modal(e);return t.show(),t},a.modifyModalCss=function(e){if(a.browser().isMobile()){$(window).width()>$(window).height()?$(e).css({top:"40px"}):$(e).css({top:window.modalPortraitTop+"em"});var i=$(e).width();$(e).css({"margin-left":"-"+i/2+"px"})}},a.parseJSON=function(e){try{return JSON.parse(e)}catch(a){console.log("json parse error:",e)}return!1};var s=function(){try{return"localStorage"in window&&null!==window.localStorage&&(localStorage.setItem("test_str","test_str"),localStorage.removeItem("test_str"),!0)}catch(e){return!1}},r=function(){try{if(window.sessionStorage){sessionStorage.setItem("test_str","test_str");var e=sessionStorage.getItem("test_str");return"test_str"==e&&(sessionStorage.removeItem("test_str"),!0)}return!1}catch(a){return!1}},d=s()?"localStorage":"cookie",c=r();a.setLocalData=function(e,a){switch(d){case"localStorage":window.localStorage.setItem(e,a),c&&window.sessionStorage.setItem(e,a);break;case"cookie":t.setItem(e,a)}},a.getLocalData=function(e){var a="";switch(d){case"localStorage":c?(a=window.sessionStorage.getItem(e),null==a&&(a=window.localStorage.getItem(e),null==a&&(a=""))):(a=window.localStorage.getItem(e),null==a&&(a=""));break;case"cookie":a=t.getItem(e),null==a&&(a="");break;default:a=""}return a},a.removeLocalData=function(e){switch(d){case"localStorage":window.localStorage.removeItem(e),c&&window.sessionStorage.removeItem(e);break;case"cookie":t.removeItem(e)}},a.browser=function(){var e=navigator.userAgent;return{isTrident:function(){return e.indexOf("Trident")>1},isPresto:function(){return e.indexOf("Presto")>-1},isWebKit:function(){return e.indexOf("AppleWebKit")>-1},isGecko:function(){return e.indexOf("Gecko")>-1&&e.indexOf("KHTML")==-1},isMobile:function(){return!!e.match(/AppleWebKit.*Mobile.*/)||this.isIos()||this.isAndroid()},isIos:function(){return!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},isAndroid:function(){return e.indexOf("Android")>-1||e.indexOf("Linux")>-1},isIPhone:function(){return e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1},isIPad:function(){return e.indexOf("iPad")>-1},isWebApp:function(){return e.indexOf("Safari")==-1&&!this.isUcBrowser()&&!this.isSogouBrowser()},isUcBrowser:function(){return e.indexOf("UCBrowser")>-1},isQQBrowser:function(){return e.indexOf("MQQBrowser")>-1},isSogouBrowser:function(){return e.indexOf("SogouMobileBrowser")>-1},is360Browser:function(){return e.indexOf("QHBrowser")>-1},isBaiduBrowser:function(){return e.indexOf("baidubrowser")>-1},isBaiduBrowserUp71:function(){var i=e.match(/baidubrowser\/([\d\.]+)/);return!(!i||a.version.compare(i[1],"7.1")<0)},isChromeIOS:function(){return e.indexOf("CriOS")>-1},isMaxtonIOS:function(){return e.indexOf("MXiOS")>-1},isOperaIOS:function(){return e.indexOf("OPiOS")>-1},isFireFox:function(){return e.indexOf("Firefox")>-1},isDouYu:function(){return e.toLowerCase().indexOf("douyu")>-1},isLiebao:function(){return e.toLowerCase().indexOf("liebao")>-1},isHgameApp:function(){return e.toLowerCase().indexOf("hgame")>-1},isAlipay:function(){return e.indexOf("Alipay")>-1},isWeixin:function(){var a=e.toLowerCase();return a.indexOf("micromessenger")>-1},checkAgent:function(a,i){var t=i?e:e.toLowerCase();return t.indexOf(a)>-1},language:function(){return(navigator.browserLanguage||navigator.language).toLowerCase()},isSafari:function(){var a=e.match(/^Mozilla\/5.0 \(.*?\) AppleWebKit\/.*? \(.*?\) Version\/[^\s]* Mobile\/.*? Safari\/\d+\.\d+[^\s]*?$/);return null!=a},isEXT_WIN:function(){return e.toLowerCase().indexOf("ext_win")>-1},compareAndroidVer:function(a){var i=e.match(/Android (.*);/);if(null==i)return!1;var t=parseInt(i[1]);return t>=a}}},a.version={compare:function(e,a){for(var i,t,o=e.split("."),n=a.split("."),s=Math.max(o.length,n.length),r=0,d=0;d<s;d++)if(i=~~o[d],t=~~n[d],r=i>t?1:i<t?-1:0,0!==r)return r;return r},isIn:function(e,a,i){return!(this.compare(i,e)<0||this.compare(a,i)<0)}},a.getQueryString=function(e){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(a);return null!=i?unescape(i[2]):null},a.getUrlParameter=function(e,a){var i=new RegExp("(\\?|#|&)"+a+"=([^&#]*)(&|#|$)"),t=e.match(i);return t||(t=e.match(i)),t?t[2]:""},a.addImageSuffix=function(e,a){return e.replace(/\.(jpg|png|jpeg)$/,a+".$1")},a.setViewPort=function(){var e=480,a=document.getElementById("viewport"),i="";if(this.browser().isAndroid()){var t=Math.min(window.screen.availWidth,Math.min(window.screen.width,window.outerWidth>0?window.outerWidth:9999999));i=",target-densitydpi="+e/t*window.devicePixelRatio*160}void 0!=a&&(a.content="width="+e+",minimal-ui,user-scalable=no"+i+",maximum-scale=1.0")},a.formatImage=function(e,a,i,t){return e=e.replace(/^http(s)?:/,""),void 0==t&&(t=e.substring(e.lastIndexOf(".")+1)),e+"_"+a+"x"+i+"x0."+t},a.hiddenFlag=function(e){if("undefined"==typeof config.hiddenFlag)return!1;var a=0;"menu"==e?a=1:"loading"==e&&(a=2);var i=config.hiddenFlag&a;return i},a.toastMessage=function(e){var a=$("#h5-toast-tip");0==a.length&&($("body").append('<div class="animated fadeIn" id="h5-toast-tip"><div><div>'+e+"</div></div></div>"),setTimeout(function(){$("#h5-toast-tip").hide().remove()},3e3))},a.ajaxServerData=function(e,i,t,o,n){var s=a;$.ajax({type:"post",url:config.siteDomain+e,data:i,dataType:"json",success:function(e){$.isFunction(t)?t(e):0!=e.code&&(s.modalAlert({text:e.message}),console.log(e.code+": "+e.message))},error:function(){$.isFunction(o)?o():s.modalAlert({text:"系统发生错误，请稍后再试"})},complete:function(){$.isFunction(n)&&n()}})},a.addStyleString=function(e){var a=document.createElement("style");a.type="text/css";try{a.appendChild(document.createTextNode(e))}catch(i){a.styleSheet.cssText=e}var t=document.getElementsByTagName("head")[0];t.appendChild(a)};var l=function(){var e=this;this.get=function(){return a.getLocalData(e.key)},this.set=function(i){return a.setLocalData(e.key,i)},this.remove=function(){return a.removeLocalData(e.key)}},g={avatar:"a:{0}",btnPosition:"bp:{0}",currentPage:"cp:{0}",gameCurrentPage:"gcp:{0}",gameLastPage:"glp:{0}",gameKey:"gk",gameScore:"gs:{0}:{1}",hasChangeNickname:"hcn:{0}",indexPagePosition:"ipp:{0}",isGuest:"ig:{0}",lastPage:"lp:{0}",loginDownloadTips:"ldt:{0}",loginFormModal:"lfm:{0}",menuLevel:"ml:{0}",nextUrl:"nu:{0}",nickname:"n:{0}",openId:"oid:{0}",shortCut:"sc:{0}:{1}",switchShake:"ss:{0}",thirdUserId:"t_uid",version:"ver:{0}",userChooseApp:"uca:{0}",showWooolqrcode:"wsqrcode:{0}",loadingPop:"loadingPop",urlReferrer:"url_referrer",isAppUidBind:"taidb:{0}",bbsCallbackUrl:"bbs_cburl",hasPay:"hp:{0}",activeRedLabel:"arl:{0}",isLoginBy58City:"isLoginBy58City"};a.localKey=g;var h=function(e){return function(a){this.key=g[e].format(a),l.apply(this,arguments)}};if("undefined"!=typeof config&&"undefined"!=typeof config.appId){var p={avatar:new(h("avatar"))([config.appId]),isGuest:new(h("isGuest"))([config.appId]),nickname:new(h("nickname"))([config.appId]),openId:new(h("openId"))([config.appId]),thirdUserId:new(h("thirdUserId")),version:new(h("version"))([config.appId])};a.localUser=p;var m={hasChangeNickname:new(h("hasChangeNickname"))([config.appId]),loginDownloadTips:new(h("loginDownloadTips"))([config.appId]),loginFormModal:new(h("loginFormModal"))([config.appId]),switchShake:new(h("switchShake"))([config.appId]),hasPay:new(h("hasPay"))([config.appId]),shortCut:function(e){return new(h("shortCut"))([config.appId,e])}};a.localUserAction=m;var u={currentPage:new(h("currentPage"))([config.appId]),indexPagePosition:new(h("indexPagePosition"))([config.appId]),lastPage:new(h("lastPage"))([config.appId]),menuLevel:new(h("menuLevel"))([config.appId]),nextUrl:new(h("nextUrl"))([config.appId])};a.localHomePage=u;var f={btnPosition:new(h("btnPosition"))([config.appId]),gameCurrentPage:new(h("gameCurrentPage"))([config.appId]),gameLastPage:new(h("gameLastPage"))([config.appId])};a.localGamePage=f;var v={gameKey:new(h("gameKey")),gameScore:function(e){return new(h("gameScore"))([config.appId,e])}};a.localGameData=v,a.setThirdUserId=function(e){a.localUser.thirdUserId.set(e)},a.getThirdUserId=function(){return a.localUser.thirdUserId.get()};var w=function(){if(""===p.version.get()){var e;e=a.getLocalData("avatar"),e&&p.avatar.set(e),e=a.getLocalData("btnPosition"),e&&f.btnPosition.set(e),e=a.getLocalData("currentPage"),e&&u.currentPage.set(e),e=a.getLocalData("gameCurrentPage"),e&&f.gameCurrentPage.set(e),e=a.getLocalData("gameLastPage"),e&&f.gameLastPage.set(e),e=a.getLocalData("is_guest"),e&&p.isGuest.set(e),e=a.getLocalData("lastPage"),e&&u.lastPage.set(e),e=a.getLocalData("nickname"),e&&p.nickname.set(e),e=a.getLocalData("open_id"),e&&p.openId.set(e)}p.version.set(i)};w(),a.setUserData=function(e,i,t,o){a.localUser.openId.set(e),a.localUser.nickname.set(i),a.localUser.isGuest.set(t),a.localUser.avatar.set(o)},a.setUserIsGuest=function(e){a.localUser.isGuest.set(e)},a.getUserData=function(){var e=a.localUser.openId.get(),i=a.localUser.nickname.get(),t=a.localUser.isGuest.get(),o=a.localUser.avatar.get(),n={open_id:e,nickname:i,is_guest:parseInt(t),avatar:o};return n},a.setThirdUserId=function(e){a.localUser.thirdUserId.set(e)},a.getThirdUserId=function(){return a.localUser.thirdUserId.get()},a.isCurrAppBindUser=function(){var e=a.localUser.openId.get(),i=g.isAppUidBind.format([e]);return 1==a.getLocalData(i)}}a.createIframe=function(e,a){a=a.replace(/^http(s)?:/,"");var i=document.getElementById(e);if("undefined"!=typeof i&&null!==i)i.src=a;else{var t=document.createElement("iframe");t.id=e,t.name=e,t.src=a,t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.border=0,document.body.appendChild(t)}},a.initScroll=function(e){var a,i={probeType:3,scrollY:!1,mouseWheel:!0,containerId:"",upY:40,downY:40,downCallback:!1,upCallback:!1,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/}};if(i=$.extend(i,e),""==i.containerId||$(i.containerId).length<1)return console.log("缺少ContainerId或对象不存在"),!1;a=new IScroll(i.containerId,{mouseWheel:i.mouseWheel,preventDefaultException:i.preventDefaultException}),i.hasDownEvent=$.isFunction(i.downCallback),i.hasUpEvent=$.isFunction(i.upCallback);var t=$(i.containerId).find(".h5c-scroll-box").eq(0);return t.length<1?(console.log("缺少h5c-scroll-box设定"),!1):(i.hasDownEvent&&(a.on("slideDown",function(){this.startY>i.downY&&i.downCallback()}),t.prepend('<div class="pull-down"><span class="icon-down"></span><span class="pull-down-msg">下拉刷新...</span></div>')),i.hasUpEvent&&(a.on("slideUp",function(){this.maxScrollY-this.startY>i.upY&&i.upCallback()}),t.append('<div class="pull-up"><span class="icon-up"></span><span class="pull-up-msg">上拉刷新...</span></div>')),a)},a.isShowWooolWxQrCode=function(){if(window.self!==window.top){var e={action:"woool-showWxQrCode",data:{}};parent.postMessage(e,"*")}},a.isHgameDomain=function(e){var a="undefined"!=typeof _baseDomain?_baseDomain:"hgame.com",i=new RegExp(a,"i");return!!e.match(i)}},function(e,a){var i=function(e){var a,i={};for(a in e)e.hasOwnProperty(a)&&(i[e[a]]=a);return i};a.channels={SHUNNET:"100009",LESHI:"100016",X58:"100020",OFFICIAL:"100022",WIWIDE:"100036",LLYUN:"100041",BSBDJ:"100052",CMBLIFE:"100064",ZHUISHU:"100067",QIUSHI:"100072",X265G:"100131",YOUJIU:"100151",MCM:"100164",CHUBAO:"100199",TIANYI:"100121",OFFICIALWEIXIN:"100022",GGBOOK:"100106",HUISUOPING:"100275",BAIDUBROWSER:"100429",TESTAPP:"100021",FZCHINANET:"100646",BAIDUSHIPIN:"101151",REVIEWVERSION:"101157",LESHIAPP:"101130",JSBANK:"101225",WANNINALI:"101274",CHINASECRET:"101529",IOSREVIEW:"101688",HISMARTTV:"100976",ZHIFUTONG:"101743",CMBCMS:"101318",SHBANK:"101813",SXYJ:"101789",AIBEI:"102029"},a.reChannels=i(a.channels),a.games={WZZL:"100037",WYFT:"100142",LTY:"100199",CQSJ:"100220",HUANC:"100263",GCD:"100281",YLCQ:"100350",YTXD:"100405"},a.isChannel=function(e,a){return e==a},a.isGame=function(e,a){return e==a},a.channel={getChannel:function(e){var i=a.reChannels[e];return i=!!i&&i.toLowerCase().replace(/^\w/,function(e){return e.toUpperCase()}),i&&a["channel"+i]?a["channel"+i]:null},share:function(e,a){var i=this.getChannel(e);return!(!i||!i.share)&&i.share(a)}},a.channelBsbdj={share:function(e){return null!=channelBridge&&(channelBridge.shareSNS("",e.title,e.img_url,e.message,e.url,"","","扩展"),!0)}},a.channelX58={share:function(e){var a={title:e.title,url:e.url,picurl:e.img_url,content:e.message,placeholder:""},i={action:"info_share",data:a,shareto:"QQ|SINA|WEIXIN|FRIENDS|ALL",extshareto:"QQ,SINA,WEIXIN,FRIENDS"};return!!WBAPP&&(WBAPP._nativeBriadge(i),!0)}},a.BrowserBaidu={share:function(e){var a={from:0,url:e.url,title:e.title,icon:e.img_url,message:e.message};window._flyflowNative.exec("CONTENTCAPTURE","onReceivedPageContent",JSON.stringify(a),null)},shareTo:function(e,a){var i={wx:1,weibo:5,wxTimeline:2,qq:3},t={landurl:e.url,title:e.title,imageurl:e.img_url,content:e.message,mediaType:i[a]?i[a]:1};5==i[a]&&(t.shareSource=63),window.baiduShareCallback=function(e,a){var i,t={weixin:"weixin",weixinfriend:"weipy",qqfriend:"qq",sinaweibo:"weibo"};i=1==e?{code:0,message:"success",showMessage:"分享成功",data:{type:t[a]?t[a]:"other"}}:{code:-1,message:"cancel",showMessage:"取消分享",data:{}},hdJsConn.shareCallback(JSON.stringify(i))},window._flyflowNative.exec("bd_utils","shareWebPage",JSON.stringify(t),"baiduShareCallback")}}},function(e,a,i){var t;t=i(1),a.checkInterface=function(){var e;return e="undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.checkInterface&&JSON.parse(AppExt.checkInterface())},a.checkPay=function(){var e;return e="undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.checkPay&&JSON.parse(AppExt.checkPay())},a.backToApp=function(){var e;return"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.backToApp?(AppExt.backToApp(),e=!0):e=!1},a.createShortCut=function(e,a,i){return"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.createShortCut?(t.browser().isIos()?AppExt.createShortCut(JSON.stringify({name:e,url:a,logoUrl:i})):AppExt.createShortCut(e,a,i),result=!0):result=!1},a.pageConfig=function(e){var a;return"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.pageConfig?(AppExt.pageConfig(e),a=!0):a=!1},a.gameInfo=function(e){var a;return"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.gameInfo?(AppExt.gameInfo(e),a=!0):a=!1},a.getTicket=function(){var e;return"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.getTicket?(AppExt.getTicket(),e=!0):e=!1,e},a.showLoginView=function(){var e;return"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.showLoginView?(AppExt.showLoginView(),e=!0):e=!1},a.showShareView=function(e){var a;return"object"==typeof e&&(e=JSON.stringify(e)),"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.showShareView?(AppExt.showShareView(e),a=!0):a=!1},a.showPayView=function(e,a){var i;return"object"==typeof e&&(e=JSON.stringify(e)),"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.showPayView?(t.browser().isIos()?AppExt.showPayView(JSON.stringify({data:e,type:a})):AppExt.showPayView(e,a),i=!0):i=!1},a.goToUrl=function(e){var a;return"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.goToUrl?(AppExt.goToUrl(e),a=!0):a=!1},a.syncAppId=function(e){var a;return"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.syncAppId?(AppExt.syncAppId(e),a=!0):a=!1},a.setSwitch=function(e){var a;return"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.setSwitch?(AppExt.setSwitch(e),a=!0):a=!1},a.getMicroClientInfo=function(){return"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.getMicroClientInfo&&AppExt.getMicroClientInfo()},a.showSSOLoginView=function(e){return"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.showSSOLoginView&&(AppExt.showSSOLoginView(e),!0)},a.onClearMicroClientCache=function(e){return"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.onClearMicroClientCache&&(AppExt.onClearMicroClientCache(e),!0)},a.onUpdateMicroClient=function(e){return"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.onUpdateMicroClient&&(AppExt.onUpdateMicroClient(JSON.stringify(e)),!0)},a.isSupportForceLogin=function(){return"undefined"!=typeof AppExt&&null!==AppExt&&"undefined"!=typeof AppExt.isSupportForceLogin&&AppExt.isSupportForceLogin()}},function(e,a,i){var t=i(1),o=i(3),n=i(2),s=60,r="",d={phone:"",password:"",verifycode:"",loginfrom:"0",captcha:"",verifycodetype:0},c=!1,l={overlayCallback:function(){},top:70*$baseFont},g=function(){var e=$(".resend");s--,e.val(s+"秒"),0==s&&(e.val("重新发送"),clearInterval(r),h(),s=60)},h=function(){$(".resend").click(function(){m()})},p=function(e){$(".err-msg div").html(e),$(".err-msg").show()},m=function(e){var a="";if($(".h5c-login-modal").each(function(){if("block"==$(this).css("display"))return void(a=$(this).attr("id"))}),""!=a){var i={};if(i.containerId=a,i.type=3==d.verifycodetype?1:d.verifycodetype,i.phone=d.phone,i.captcha=d.captcha,i.openid="","undefined"!=typeof config.openId)i.openid=config.openId;else{var o=t.getLocalData("appid"),n=t.localKey.openId.format([o]);i.openid=t.getLocalData(n)}config.microClient&&2==i.type?t.ajaxServerData("user/microFindPassword",i,function(e){0==e.code?(i.appid=e.data.appId,config.appId=e.data.appId,u(i)):p(e.message)}):(i.appid=config.appId,u(i,e))}},u=function(e,a){var i=e.containerId;delete e.containerId,t.ajaxServerData("user/queryverifycode",e,function(e){0==e.code?($("#register-captcha").trigger("click"),"undefined"!=typeof a&&$.isFunction(a)&&a(),s=60,$(".resend").val("60秒"),$(".resend").unbind(),""!=r&&clearInterval(r),r=setInterval(g,1e3)):e.code==-1001?"h5-captcha-dialog"==i?$("#register-captcha").trigger("click"):(console.log(d.verifycodetype),I()):p(e.message)})},f=function(){_forceLoginMethod="string"==typeof _forceLoginMethod?_forceLoginMethod:"","qq"===_forceLoginMethod&&$(".login-qq .third-login-btn").trigger("click")},v=function(){if(config.isWxMultLogin)return!1;if(t.browser().isWeixin()&&!config.useSelfLogin){var e={appid:config.appId,gameid:0,platform:"WEIXIN_PUB"};return 1==config.isWxNaLogin&&100001==config.appId&&(e.platform="WEIXIN_PUB_NA"),"undefined"!=typeof config.gameId&&(e.gameid=config.gameId),t.ajaxServerData("user/thirdlogin",e,function(e){return 0!=e.code?void t.modalAlert({text:e.message}):(t.setLocalData(t.localKey.urlReferrer,self.location.href),void(window.location.href=e.data.redirectUrl))}),!0}return!1},w=function(a){if(a)$("#h5-login-dialog .third-app-login-btns").hide();else{var i=!0,o=!1,s=2;n.isChannel(config.appId,n.channels.SHUNNET)&&!t.browser().isMobile()&&(i=!1,s--),(!t.browser().isMobile()||e.exports.sdkInterface&&e.exports.sdkInterface.showSSOLoginView||t.browser().isWeixin()&&config.isWxMultLogin)&&(o=!0,s++),n.isChannel(config.appId,n.channels.IOSREVIEW)&&100220==config.gameId&&(o=!1,loginBtnNums--,i=!1,loginBtnNums--),!n.isGame(config.gameId,n.games.YTXD)||!t.browser().isWeixin()&&t.browser().isMobile()||o||(o=!0,loginBtnNums++,console.log(o)),2==s&&$(".third-app-login-btns").addClass("two-cell"),i||$(".third-app-login-btns").addClass("no-qq-login"),o||$(".third-app-login-btns").addClass("no-wx-login"),$("#h5-login-dialog .third-app-login-btns").show()}},y=function(){return!(!n.isChannel(config.appId,n.channels.REVIEWVERSION)&&!n.isChannel(config.appId,n.channels.IOSREVIEW))},b=function(){if(!v()){var e=!1;if(l.overlayCallback=function(){},config.microClient)$(".close-h5c-login-container").hide(),e=!0;else{var a=t.localUser.isGuest.get();"undefined"!=typeof config.loginMode&&1==config.loginMode&&1==a&&(e=!0),c&&(e=!0),(100647==config.appId||y())&&(e=!0)}var i=!1;n.isGame(config.gameId,n.games.YTXD)&&(i=!0,t.browser().isMobile()&&!t.browser().isWeixin()&&(e=!0)),$("#h5-login-dialog").children().length?($("#h5-login-dialog .password").val(""),d.password="",P(),w(e),f(),i&&$("#login-register-form").addClass("only-wechat-form"),t.showModal("h5-login-dialog",l),config.microClient&&$(".close-h5c-login-container").hide(),p("")):t.ajaxServerData("page/login",{},function(a){if(0==a.code){var o=a.data.loginView;if($("#h5-login-dialog").html(o),i&&$("#login-register-form").addClass("only-wechat-form"),O(),w(e),T(),G(),f(),t.showModal("h5-login-dialog",l),t.browser().isHgameApp()&&"object"==typeof AppExt&&"undefined"!=typeof AppExt.getDeviceInfo){deviceInfo=AppExt.getDeviceInfo();var n=$(".micro-login");t.browser().isIos()&&(deviceInfo=decodeURIComponent(deviceInfo)),n.show(),n.unbind(),n.click(function(){var e={};e.app_id=config.appId,e.game_id=0,"undefined"!=typeof config.gameId&&(e.game_id=config.gameId);var a=window.location.pathname.match(/\/pt\/(\d+)/);null!=a&&a.length>1&&(e.pt=a[1]),e.device_info=deviceInfo,t.ajaxServerData("user/microautologin",e,function(e){if(0==e.code)if($(".user-account-help-btn").hide(),config.showUserAppList)E(!0,e.data);else{if("undefined"!=typeof config.gameId&&"undefined"!=typeof e.data.redirect&&""!=e.data.redirect)return void(self.location.href=e.data.redirect);_(e.data,!0)}else p(e.message)})})}}else t.modalAlert(a.message);config.microClient&&$(".close-h5c-login-container").hide()})}},A=function(e){t.setUserData(e.open_id,e.nickname,e.is_guest,e.avatar);var a=t.getLocalData(t.localKey.bbsCallbackUrl),i="";i=a.indexOf("?")!==-1?a+"&"+e.bbs:a+"?"+e.bbs,top.location.href=i},I=function(){d.captcha="",l.overlayCallback=function(){};var e="";if("undefined"!=typeof config.openId)e=config.openId;else{var a=t.getLocalData("appid"),i=t.localKey.openId.format([a]);e=t.getLocalData(i)}t.ajaxServerData("user/captchaview",{openid:e},function(a){if(0==a.code){var i=a.data.view;$(".h5c-login-modal").each(function(){"block"==$(this).css("display")&&(id=$(this).attr("id"),t.closeModal(id))}),$("#h5-captcha-dialog").html(i),O(),t.showModal("h5-captcha-dialog",l),G(),$("#register-captcha").unbind().bind("click",function(){$.ajax({url:"/user/captcha/openid/"+e+"/refresh/1",dataType:"json",cache:!1,success:function(e){$("#register-captcha").attr("src",e.url)}})})}else p(a.message)})},x=function(){console.log(d.verifycodetype),1==d.verifycodetype?C():2==d.verifycodetype?B():3==d.verifycodetype&&L()},C=function(){m(function(){l.overlayCallback=function(){},$("#h5-register-dialog").children().length?(t.closeModal("h5-captcha-dialog"),t.showModal("h5-register-dialog",l),$("#h5-register-dialog .verify-token").val(""),p(""),config.microClient&&$(".close-h5c-login-container").hide()):t.ajaxServerData("page/register",{phone:d.phone},function(e){if(0==e.code){var a=e.data.view;$("#h5-register-dialog").html(a),O(),t.closeModal("h5-captcha-dialog"),t.showModal("h5-register-dialog",l),j("h5-register-dialog"),G(),config.microClient&&$(".close-h5c-login-container").hide()}else p(e.message)})})},k=function(e){var a=t.localKey.userChooseApp.format([e]),i=t.getLocalData(a),o="undefined"!=typeof config.gameId?config.gameId:0;0!=o&&(i=i.length?i.split(","):[],i.indexOf(o)==-1&&i.push(o),t.setLocalData(a,i.join(",")))},E=function(e,a){var i={};i.appid=config.appId,i.phone=e?d.phone:"",i.password=d.password,i.gameid="undefined"!=typeof config.gameId?config.gameId:0,t.ajaxServerData("user/userapp",i,function(i){if(0==i.code){if("undefined"!=typeof i.data.redirect&&""!=i.data.redirect)return void(self.location.href=i.data.redirect);var o=i.data.apps;if(0==o.length)if("undefined"!=typeof a)k(a.open_id),_(a,e);else{var n=t.getLocalData("appid"),s=t.localKey.openId.format([n]),r=t.getLocalData(s);k(r),self.location.reload()}else{var d=!1;if("undefined"!=typeof config.gameSpecialLogin&&config.gameSpecialLogin&&(d=!0),$(window).width()>480&&!t.browser().isMobile()&&d&&(self==top||$(window).width()>$(window).height())&&($("#h5-game-login-home-bg").addClass("game-user-list-bg-pc"),$("#h5-game-user-list-bg").addClass("game-user-list-bg-pc"),$("#h5-app-list-dialog").addClass("h5-app-list-pc")),d?D(o):M(o,!0),t.browser().isMobile()&&$(window).width()>$(window).height()||!t.browser().isMobile()&&!d&&$(window).width()>$(window).height()){var c=($(window).height()-$("#h5-app-list-dialog .h5center-login-container").height())/2;$("#h5-app-list-dialog .h5center-login-container").css({bottom:c})}$(".h5c-app").unbind(),$(".h5c-app").on("click",function(){var e=$(this).attr("appid"),a=$(this).data("openid"),i=$(this).data("nickname"),o=$(this).data("guest"),n=$(this).data("avatar");t.ajaxServerData("user/loginopen",{openid:a},function(t){if(0==t.code){if(V(e,a,i,o,n),k(a),!(window.location.href.indexOf(e)>-1)){var s=location.pathname,r=new RegExp("sw[=/]"),d=location.search;r.test(s)||r.test(d)||(""!=d?d+="&sw=1":s+="/sw/1");var c=location.origin+s+d+location.hash;return c=c.replace(/(.*appid[=\/])\d+(.*)/g,"$1"+e+"$2"),c=c.replace(/(.*[\/&?]pt[=\/])\d+(.*)/g,"$10$2"),void(window.location.href=c)}self.location.reload()}else alert(t.message)})}),1==o.length&&$(".h5c-app").trigger("click")}}else e||i.code!=-3?t.modalAlert({text:i.message}):b()})},D=function(e){e=e.slice(0,3),l.overlayCallback=function(){},t.closeModal("h5-login-dialog"),$(".app-list").addClass("h5c-special-app-list"),$(".app-list").empty();var a="";a+='<div class="app-list-header"></div>',a+='<div class="switch-user-btn"></div>';var i=["A","B","C"];$.each(e,function(e,t){if(a+='<div class="box app-list-detail">',a+='<div class="box-border"></div>',a+='<div class="h5c-app special-h5c-app" appid="'+t.app_id+'" data-openid="'+t.open_id+'" data-nickname="'+t.nickname+'" data-avatar="'+t.avatar+'" data-guest="'+t.is_guest+'">',
"undefined"!=typeof t.userarea){a+='<div class="game-area-title pull-left title-'+i[e]+'"><div>账号'+i[e]+"</div></div>";var o=t.userarea.slice(0,3);$.each(o,function(e,i){a+=e<2?'<div class="game-area-detail pull-left">':'<div class="game-area-detail pull-left last">',a+='<div class="user-level"><span class="level">Lv.'+i.level+'</span>&nbsp;&nbsp;<span class="area">'+i.area+"服</span></div>",a+='<div class="user-nickname">'+i.nickname+"</div>",a+="</div>"})}else{var n="undefined"!=typeof t.name?t.name:"";a+='<div class="user-app-detail">',a+='<div class="app-logo pull-left" style="background:url('+t.logo+') no-repeat 50% 50%;background-size:100% auto"></div>',a+='<div class="app-name pull-left"><div>'+n+"</div></div>",a+='<div class="app-play-time pull-right"><div>'+t.updated+"</div></div>",a+='<div class="clearfix"></div>',a+="</div>"}a+='<div class="clearfix"></div>',a+="</div>",a+="</div>"}),a+='<div class="app-list-footer"></div>',$(".app-list").append(a),$(".switch-user-btn").unbind(),$(".switch-user-btn").on("click",function(){c=!0,$("#h5-game-user-list-bg").hide(),t.closeModal("h5-app-list-dialog"),$(".switch-user-app-btn").show(),q(!0)}),e.length>1&&($("#h5-game-user-list-bg").show(),t.showModal("h5-app-list-dialog",{overlayCallback:l.overlayCallback,overlay:0}))},M=function(e,a){t.closeModal("h5-login-dialog"),$(".app-list").empty();var i="";i+='<div class="applist-xhb-logo"></div>',i+='<div class="curr-game-logo">',i+='<div class="img-container pull-left"><img src="'+gameData.img_url+'"></div>',i+='<div class="title-container pull-left"><span>'+gameData.title+"</span></div>",i+='<div class="clearfix"></div></div>',i+='<div class="app-list-header"></div>',i+='<div class="switch-user-btn"></div>',$.each(e,function(e,t){i+='<div class="box app-list-detail">',i+='<div class="box-border"></div>',i+=a?'<div class="h5c-app special-h5c-app" appid="'+t.app_id+'" data-openid="'+t.open_id+'" data-nickname="'+t.nickname+'" data-avatar="'+t.avatar+'" data-guest="'+t.is_guest+'">':'<div class="h5c-app special-h5c-app" appid="'+t.app_id+'">';var o="undefined"!=typeof t.name?t.name:"";i+='<div class="user-app-detail">',i+='<div class="app-logo pull-left" style="background:url('+t.logo+') no-repeat 50% 50%;background-size:100% auto"></div>',i+='<div class="app-name pull-left"><div>'+o+"</div></div>",i+='<div class="app-play-time pull-right"><div>'+t.updated+"</div></div>",i+='<div class="clearfix"></div>',i+="</div>",i+="</div>",i+="</div>"}),i+='<div class="app-list-footer"></div>',$(".app-list").append(i),$(".switch-user-btn").unbind(),$(".switch-user-btn").on("click",function(){c=!0,$("#h5-game-user-list-bg").hide(),t.closeModal("h5-app-list-dialog"),$(".switch-user-app-btn").show(),q(!0)}),e.length>1&&($("#h5-game-user-list-bg").show(),t.showModal("h5-app-list-dialog",{overlayCallback:l.overlayCallback,overlay:0}))},S=function(){$("#login-reg-pwd").addClass("err-pwd"),$(".err-pwd .reset-password").unbind(),$(".err-pwd .reset-password").click(function(){d.verifycodetype=2,I()})},P=function(){$("#login-reg-pwd").removeClass("err-pwd"),$(".err-pwd .reset-password").unbind()},B=function(){m(function(){l.overlayCallback=function(){},$("#h5-reset-pwd-dialog").children().length?(t.closeModal("h5-captcha-dialog"),$("#h5-reset-pwd-dialog .password").val(""),$("#h5-reset-pwd-dialog .verify-token").val(""),d.password="",t.showModal("h5-reset-pwd-dialog",l),p(""),config.microClient&&$(".close-h5c-login-container").hide()):t.ajaxServerData("page/resetpassword",{phone:d.phone},function(e){if(0==e.code){var a=e.data.view;$("#h5-reset-pwd-dialog").html(a),O(),t.closeModal("h5-captcha-dialog"),t.showModal("h5-reset-pwd-dialog",l),j("h5-reset-pwd-dialog"),G()}else p(e.message);config.microClient&&$(".close-h5c-login-container").hide()})})},U=function(){if(config.isBindPhone)return void t.modalAlert({text:"您已经完成绑定操作"});if(config.isPhoneUser){var e={};e.type=1,e.gameid="undefined"!=typeof config.gameId?config.gameId:0,t.ajaxServerData("user/bindmobile",e,function(e){0==e.code?(config.isBindPhone=1,$("#menu-desktop").length>0&&$("#menu-desktop").removeClass("hide").addClass("show").show()):t.modalAlert({text:e.message})})}else $(".err-msg div").empty(),t.showModal("h5c-bind-phone-modal",l),O(),G()},Q=function(){$(".err-msg div").empty(),t.showModal("h5c-bind-phone-modal",l),O(),G()},L=function(){m(function(){t.closeModal("h5-captcha-dialog"),$(".err-msg div").empty(),t.showModal("h5c-bind-verifycode-modal",l),j("h5c-bind-verifycode-modal"),G()})},T=function(){$(".third-login-btn").length&&($(".third-login-btn").unbind(),$(".third-login-btn").click(function(){$(this).unbind("mouseenter mouseleave");var a={};if(a.appid=config.appId,a.gameid="undefined"!=typeof config.gameId?config.gameId:0,a.platform=$(this).data("platform"),a.loginfrom=d.loginfrom,e.exports.sdkInterface&&e.exports.sdkInterface.showSSOLoginView){var i="";if("WEIXIN_WEB_GC"==a.platform&&(i="weixin"),""!==i)return void o.showSSOLoginView(i)}t.browser().isWeixin()&&"WEIXIN_WEB_GC"==a.platform&&(a.platform="WEIXIN_PUB"),t.ajaxServerData("user/thirdlogin",a,function(e){if(0==e.code){if(t.setLocalData(t.localKey.urlReferrer,self.location.href),"WEIXIN_PUB"==a.platform)return void(window.location.href=e.data.redirectUrl);$("#third-app-authorize-page").length>0&&$("#third-app-authorize-page").remove();var i="";i+='<div id="third-app-authorize-page">',i+='<iframe id="authorize-page" frameborder="0" src="'+e.data.redirectUrl+'"></iframe>',i+='<div class="h5center-footer-close toggle-footer-close close"><div>关闭</div></div>',i+="</div>",$("body").append(i),$("#third-app-authorize-page .close").on("click",function(){$("#third-app-authorize-page").remove()})}else p(e.message)})}))},O=function(){$(".enter").unbind(),$(".enter").click(function(){var e="";if($(".h5c-login-modal").each(function(){if("block"==$(this).css("display"))return void(e=$(this).attr("id"))}),console.log(e),""==e)return!1;var a=$("#"+e+" input");a.blur();var i="";if(a.each(function(){var e=$.trim($(this).val()),a=$(this).attr("class");if("phone"==a){if("100021"!=config.appId&&!y()||!/@hoodinn\.test\.com$/.test(e))if(""==e)i="手机号/用户名不能为空";else{var t=/^1\d{10}$/,o=/^[a-zA-Z]{1}[a-zA-Z0-9]{5,11}$/;/^\d+$/.test(e)?t.test(e)||(i="请输入正确的手机号"):e.length<6||e.length>12?i="请输入6~12位的用户名":o.test(e)||(i="用户名由字母开头的6~12字符组成")}d.phone=e}else"password"==a?(""==e?i="密码不能为空":(e.length<6||e.length>16)&&(i="请输入6-16位的密码"),d.password=e):"verify-token"==a?(""==e?i="验证码不能为空":6!=e.length&&(i="请输入6位数字验证码"),d.verifycode=e):"input-captcha"==a&&(d.captcha=e);if(""!=i)return!1}),""!=i)return p(i),!1;var t=$("#"+e+" form").attr("action");console.log(t),"/user/login"==t?R():"/user/register"==t?N():"/user/updatenewpassword"==t?K():"/user/microLogin"==t?F({name:d.phone,password:d.password,gameid:$("#gameid").val()}):"/user/bindmobile"==t?Y():"/user/bindverifycode"==t?(d.verifycodetype=3,I()):"/user/oidbindmobile"==t?H():"/user/queryverifycode"==t&&x()})},j=function(e){$(".cancel").unbind(),$(".cancel").click(function(){t.closeModal(e),$(".err-msg div").empty(),""!=r&&clearInterval(r),"h5c-bind-verifycode-modal"==e?t.showModal("h5c-bind-phone-modal",l):b()})},G=function(){$(".close-h5c-login-container").unbind(),$(".close-h5c-login-container").click(function(){""!=r&&clearInterval(r);var e=$(this).parent(".h5c-login-modal").attr("id");if(t.closeModal(e),"undefined"!=typeof config.isOidBindView&&config.isOidBindView&&self!=top){var a={action:"wooolsdk:closeBindMobile",data:{bindflag:0}};return void parent.postMessage(a,"*")}if("undefined"!=typeof config.gameId){if(1==config.loginMode&&1==t.localUser.isGuest.get()||c)return void q();var i=t.localUserAction.loginFormModal.get();if(t.localUserAction.loginFormModal.remove(),"game"==i){var o={code:-1,message:"",showMessage:"登录取消",data:{}};z("gameLogin",o)}}})},R=function(){var e={};e.name=d.phone,e.password=d.password,e.appid=config.appId,e.gameid=0,"undefined"!=typeof config.gameId&&(e.gameid=config.gameId);var a=window.location.pathname.match(/\/pt\/(\d+)/);null!=a&&a.length>1&&(e.pt=a[1]),e.last_token=t.getLocalData("oid:"+config.appId),e.loginfrom=d.loginfrom,config.microClient?F(e):t.ajaxServerData("user/login",e,function(a){var i=/^1\d{10}$/;if(0==a.code){if($(".user-account-help-btn").hide(),"undefined"!=typeof a.data.bbs&&""!=a.data.bbs)return void A(a.data);if(t.browser().isMobile()||0==e.gameid||t.isShowWooolWxQrCode(),config.showUserAppList)E(!0,a.data);else{if("undefined"!=typeof config.gameId&&"undefined"!=typeof a.data.redirect&&""!=a.data.redirect)return void(self.location.href=a.data.redirect);_(a.data,!0)}}else 10303==a.code?i.test(e.name)?(d.verifycodetype=1,I()):N():11301==a.code?(i.test(e.name)&&S(),p(a.message)):p(a.message)})},F=function(e){t.ajaxServerData("user/microLogin",e,function(a){if(0==a.code)if(a.data.channels.length>1)M(a.data.channels,!1),$(".h5c-app").on("click",function(){e.appid=$(this).attr("appid"),F(e)}),$("#h5-app-list-dialog .cancel").on("click",function(){t.closeModal("h5-app-list-dialog"),l.overlayCallback=function(){},t.showModal("h5-login-dialog",l)});else{var i=a.data.user,o=a.data.channels[0].id;V(o,i.open_id,i.nickname,i.is_guest,i.avatar),window.location.href=config.siteDomain+"home/game/appid/"+a.data.channels[0].id+"/gameid/"+e.gameid+"/f/1#fr=wdapp"}else 10303==a.code?(d.verifycodetype=1,I()):11301==a.code?(S(),p(a.message)):p(a.message)})},N=function(){var e={};e.name=d.phone,e.verifycode=d.verifycode,e.password=d.password,e.appid=config.microClient?defaultAppId:config.appId,e.gameid=0,"undefined"!=typeof config.gameId&&(e.gameid=config.gameId),e.last_token=t.getLocalData("oid:"+e.appid),e.loginfrom=d.loginfrom,t.ajaxServerData("user/register",e,function(a){if(0==a.code){if("undefined"!=typeof a.data.bbs&&""!=a.data.bbs)return void A(a.data);if(t.browser().isMobile()||0==e.gameid||t.isShowWooolWxQrCode(),config.showUserAppList)E(!0,a.data);else{var i=t.localKey.userChooseApp.format([a.data.open_id]),o=t.getLocalData(i);o=o.length?o.split(","):[],o.indexOf(e.gameid)==-1&&o.push(e.gameid),t.setLocalData(i,o.join(",")),_(a.data,!0)}}else p(a.message)})},K=function(){var e={};e.email=d.phone,e.appid=config.appId,e.token=d.verifycode,e.newpassword=d.password,t.ajaxServerData("user/updatenewpassword",e,function(e){0==e.code?R():p(e.message)})},Y=function(){"undefined"!=typeof config.gameId&&(d.gameid=config.gameId),t.ajaxServerData("user/bindmobile",d,function(e){0==e.code?(t.closeModal("h5c-bind-verifycode-modal"),config.isBindPhone=1,t.setUserIsGuest(0),$("#menu-desktop").length>0&&$("#menu-desktop").removeClass("hide").addClass("show").show(),$("#menu-login").length>0&&$("#menu-login").addClass("switch-user-info").html("<span>账号</span>")):p(e.message)})},H=function(){var e={};e.game_id=config.gameId,e.open_id=config.openId,e.game_key=config.gameKey,e.signature=config.signature,e.timestamp=config.timestamp,e.phone=d.phone,e.password=d.password,e.verifycode=d.verifycode,t.ajaxServerData("user/oidbindmobile",e,function(e){if(0==e.code)if(t.closeModal("h5c-bind-verifycode-modal"),self!=top){var a={action:"wooolsdk:closeBindMobile",data:{bindflag:1}};parent.postMessage(a,"*")}else t.modalAlert({text:"绑定成功"});else p(e.message)})},_=function(e,a){if(config.microClient){var i=e,o=defaultAppId;return V($appId,i.open_id,i.nickname,i.is_guest,i.avatar),void(window.location.href=config.siteDomain+"home/game/appid/"+o+"/gameid/"+config.gameId+"/f/1#fr=wdapp")}c=!1;var n=t.localUser.openId.get();if(t.setUserData(e.open_id,e.nickname,e.is_guest,e.avatar),"undefined"!=typeof config.gameId){var s=t.localUserAction.loginFormModal.get();if(t.localUserAction.loginFormModal.remove(),n!=e.open_id)return void self.location.reload();if(a&&(config.isPhoneUser=1,"undefined"!=typeof e.isBindPhone&&(config.isBindPhone=e.isBindPhone),config.isBindPhone&&$("#menu-desktop").length>0&&$("#menu-desktop").removeClass("hide").addClass("show").show()),"game"==s){var e={code:0,message:"",showMessage:"登录成功",data:{nickname:e.nickname,is_guest:parseInt(e.is_guest),avatar:e.avatar}};z("gameLogin",e)}$("#menu-login").length>0&&$("#menu-login").addClass("switch-user-info").html("<span>账号</span>")}else J();W(),"block"==$("#h5-game-login-home").css("display")&&(t.closeModal("h5-game-login-home"),$("#h5-game-login-home-bg").hide()),$("#h5-game-login-home-bg").hide()},J=function(){},W=function(){$(".h5c-login-modal").each(function(){if("block"==$(this).css("display")){var e=$(this).attr("id");return void t.closeModal(e)}})},q=function(a){l.overlayCallback=function(){},T();var i=$(".try-play");i.length&&(i.unbind(),i.click(function(){config.loginMode=2,t.closeModal("h5-game-login-home"),$("#h5-game-login-home-bg").hide(),c=!1}));var o=!1,s=!0,r=!0,d=!0,g=3;(!t.browser().isMobile()||e.exports.sdkInterface&&e.exports.sdkInterface.showSSOLoginView||t.browser().isWeixin()&&config.isWxMultLogin)&&(o=!0),n.isChannel(config.appId,n.channels.SHUNNET)&&!t.browser().isMobile()&&(s=!1),y()?(o=!1,s=!1,r=!1):n.isGame(config.gameId,n.games.YTXD)&&(s=!1,r=!1,d=!1,o=!1,(t.browser().isWeixin()||t.browser().isHgameApp()||!t.browser().isMobile())&&(o=!0)),o?g++:$("#h5-game-login-home .login-list").addClass("no-wx-login"),s||($("#h5-game-login-home .login-list").addClass("no-qq-login"),g--),r||($("#h5-game-login-home .login-list").addClass("no-weibo-login"),g--),d||($("#h5-game-login-home .login-list").addClass("no-phone-login"),g--),$("#h5-game-login-home .login-list").removeClass("four-cell three-cell one-cell only-wechat"),3==g?$("#h5-game-login-home .login-list").addClass("three-cell"):1==g?$("#h5-game-login-home .login-list").addClass("one-cell"):$("#h5-game-login-home .login-list").addClass("four-cell");var h=$(".login-phone .bg-icon");h.length&&(h.unbind(),h.click(function(){t.closeModal("h5-game-login-home"),"undefined"==typeof config.gameSpecialLogin||config.gameSpecialLogin||$("#h5-game-login-home-bg").hide(),$(this).unbind("mouseenter mouseleave"),b()})),$(".switch-user-app-btn").length>0&&($(".switch-user-app-btn").unbind(),$(".switch-user-app-btn").click(function(){if($("#h5-game-user-list-bg").show(),$("#h5-app-list-dialog .app-list").children().length>0&&(t.showModal("h5-app-list-dialog",{overlayCallback:function(){},overlay:0}),t.browser().isMobile()&&$(window).width()>$(window).height())){var e=($(window).height()-$("#h5-app-list-dialog .h5center-login-container").height())/2;$("#h5-app-list-dialog .h5center-login-container").css({bottom:e})}})),W(),"undefined"==typeof a&&(a=!1),n.isChannel(config.appId,n.channels.IOSREVIEW)&&$(".user-account-help-btn").remove();var m=t.localUser.isGuest.get();if(1==m&&!a&&$(".user-account-help-btn").length>0&&(n.isGame(config.gameId,n.games.CQSJ)||n.isGame(config.gameId,n.games.YLCQ))&&($(".user-account-help-btn").css({display:"block"}),t.browser().isMobile()?($(".user-account-help-btn").unbind(),$(".user-account-help-btn").bind("click",function(){$("#user-ah-frame").attr("src","//sitewap.hgame.com/?nobutton=1#/article/id186"),$(".user-ah-frame-screen").show()}),$("#close-user-ah-frame").unbind().bind("click",function(){$(".user-ah-frame-screen").hide()})):$(".user-account-help-btn").attr("href","//sitewap.hgame.com/?nobutton=1#/article/id186")),(n.isChannel(config.appId,n.channels.SHUNNET)||y()||0==g||n.isGame(config.gameId,n.games.YTXD))&&(a=!0),t.browser().isIos()&&t.browser().isHgameApp()&&(a=!0),t.browser().isHgameApp()&&"object"==typeof AppExt&&"undefined"!=typeof AppExt.getDeviceInfo){a=!0,deviceInfo=AppExt.getDeviceInfo();var u=$(".micro-login");t.browser().isIos()&&(deviceInfo=decodeURIComponent(deviceInfo)),u.show(),u.unbind(),u.click(function(){var e={};e.app_id=config.appId,e.game_id=0,"undefined"!=typeof config.gameId&&(e.game_id=config.gameId);var a=window.location.pathname.match(/\/pt\/(\d+)/);null!=a&&a.length>1&&(e.pt=a[1]),e.device_info=deviceInfo,t.ajaxServerData("user/microautologin",e,function(e){if(0==e.code)if($(".user-account-help-btn").hide(),config.showUserAppList)E(!0,e.data);else{if("undefined"!=typeof config.gameId&&"undefined"!=typeof e.data.redirect&&""!=e.data.redirect)return void(self.location.href=e.data.redirect);_(e.data,!0)}else p(e.message)})})}a&&($("#h5-game-login-home .special-login-list .footer").length>0?$("#h5-game-login-home .special-login-list .footer").remove():$("#h5-game-login-home .try-play").length>0&&$("#h5-game-login-home .try-play").remove()),f(),t.showModal("h5-game-login-home",{overlayCallback:l.overlayCallback,overlay:0,top:70*$baseFont}),100022==config.appId&&100220==config.gameId&&t.browser().isMobile()&&$("#icpForBaidu").show(),"undefined"!=typeof config.gameSpecialLogin&&config.gameSpecialLogin&&$(window).width()>480&&!t.browser().isMobile()&&(self==top||$(window).width()>$(window).height())&&($("#h5-game-login-home-bg").addClass("game-user-list-bg-pc"),$("#h5-game-user-list-bg").addClass("game-user-list-bg-pc"),$("#h5-app-list-dialog").addClass("h5-app-list-pc")),$("#h5-game-login-home-bg").show()},z=function(e,a){var i=document.createEvent("CustomEvent");i.initCustomEvent("afterLoginNotifyGame",!1,!1,"");var t=JSON.stringify(a);return eventData.notifyData=t,eventData.notifyAction=JSON.stringify({action:e}),document.dispatchEvent(i),console.log("after login send message to game : "+t)},V=function(e,a,i,o,n){t.setLocalData("appid",e),t.setLocalData(t.localKey.openId.format([e]),a),t.setLocalData(t.localKey.nickname.format([e]),i),t.setLocalData(t.localKey.isGuest.format([e]),o),t.setLocalData(t.localKey.avatar.format([e]),n)},X=function(){var e="";e+='<div class="app-switch-login-view">',e+='<button class="button enter self-app-login"><div>GGBook账号登陆</div></button>',e+='<button class="button enter xhb-login"><div>切换其他登陆模式</div></button>',e+="</div>",$("#h5-app-login-list").html(e),$(".self-app-login").click(function(){var e=new Date,a=config.siteDomain+"app/ggbook/index/timespan/"+e.getTime()+"/gl/1";window.location.href=a}),$(".xhb-login").click(function(){t.closeModal("h5-app-login-list"),b()}),t.showModal("h5-app-login-list")};e.exports={sdkInterface:!1,sdkParamsInit:function(e){this.sdkInterface=e,$("#h5-game-login-home-bg").length>0&&$("#h5-game-login-home-bg").bind("touchmove",function(e){e.preventDefault()})},showLoginView:function(e){"undefined"!=typeof e&&$.isFunction(e)&&(J=e),n.isChannel(config.appId,n.channels.GGBOOK)&&"undefined"!=typeof x5JavaScriptInterface?X():b()},isLoginByWx:function(){v()},showGameLoginViewList:function(){q()},showMicroLoginView:function(){$.ajax({type:"post",url:config.siteDomain+"home/login/appid/"+defaultAppId,data:{},dataType:"json",success:function(e){0==e.code||alert(e.message)},error:function(){alert("认证出现错误")}}),this.showLoginView(function(){})},showBindUserPhoneView:function(){U()},showOidBindPhoneView:function(){Q()},thirdLogin:function(e){if(0!=e.code)return void t.modalAlert({text:e.message});if($(".user-account-help-btn").hide(),"undefined"!=typeof e.data.bbs&&""!=e.data.bbs)return void A(e.data);if(W(),$("#third-app-authorize-page").remove(),config.showUserAppList)E(!1,e.data);else{if("undefined"!=typeof config.gameId&&"undefined"!=typeof e.data.redirect&&""!=e.data.redirect)return void(self.location.href=e.data.redirect);_(e.data,!1)}},showAppListView:function(){config.showUserAppList&&E(!1)},showOpenLoginView:function(){"undefined"!=typeof __bbsCallbackUrl&&""!=__bbsCallbackUrl&&t.setLocalData(t.localKey.bbsCallbackUrl,__bbsCallbackUrl),"undefined"!=typeof __from&&(d.loginfrom=__from);var e=this;window.addEventListener("message",function(a){var i=t.parseUrl(config.siteDomain);if(t.isHgameDomain(a.origin)||a.origin==i.fullname){var o=a.data;switch(o.action){case"thirdLogin":e.thirdLogin(o.data);break;default:console.log(a)}}},!1),this.showLoginView(function(){})}}},function(e,a,i){var t=!0,o=i(1),n=i(2),s=$(".h5c-loading"),r=$(".h5center-game"),d=$("#game-menu"),c=$("#paymentFrame");$window={height:0,width:0},$firstInitFrameSize=!0,e.exports={sdkInterface:!1,sdkParamsInit:function(e){this.sdkInterface=e},indexPagePosition:"",gameFrame:$("#game-frame"),gameiframe:$(".frame-screen"),button:{showMenu:$("#show-menu"),showCode:$("#show-code"),rankShare:$("#rank-share"),payClose:$("#pay-close"),shareQq:$(".share-qq"),shareQzone:$(".share-qzone"),shareSina:$(".share-sina"),shareTxwb:$(".share-txwb"),shareWx:$(".share-weixin"),shareWxTimeline:$(".share-weixin-timeline"),menuShare:$("#menu-share"),menuBackHome:$("#menu-back-home"),wxOpenCloseBtn:$(".wx-close-btn")},bar:$(".h5center-game-bar"),pepFlag:!0,loadingDefault:!0,loadingTip:0,wxOpenTip:$("#weixin-open-tip"),rotationTimes:0,changePage:function(e){var a=e.split("|"),i=o.localGamePage.gameCurrentPage.get();o.localGamePage.gameLastPage.set(i),o.localGamePage.gameCurrentPage.set(e),$(".h5c-page").hide(),$(a[0]).show(),scrollTo(0,0)},showLoading:function(e){var a=this;a.reportRequestTiming(),r.show(),a.changePage("#h5-game"),a.showGame(e),$("#h5-loading-1").hide();var i=o.hiddenFlag("loading");if(config.showLoading&&!i)if(s.show(),[n.games.GCD].indexOf(config.gameId)>-1)if(o.browser().isMobile()){var t=window.location.pathname.match(/\/review\/(\d+)/);"100281"==config.gameId&&t&&"6"==t[1]&&$(".loading-progress").prepend("<div class='health_tip_"+config.gameId+"'><p>抵制不良游戏，拒绝盗版游戏。适度游戏益脑，沉迷游戏伤身。</p><p>注意自我保护，谨防受骗上当。合理安排时间，享受健康生活。</p></div>");var d,c=window.location.pathname.match(/\/ld\/(\d+)/),l=c?c[1]:o.getQueryString("ld");l&&($("#h5-loading-2").addClass("ld"+l),$("#h5-loading-2 .loading-pic").hide(),$("#h5-loading-2 .loading-text").hide(),d=["正在加载资源...","正在初始化用户信息...","正在获取服务器信息...","正在检测网络状态..."]),$("#h5-loading-2").show(),a.loadingDefault&&a.defaultLoadingProgress(d)}else s.hide();else if($("#hdProgressLoading").length>0){$("#hdProgressLoading").show();var d=["正在加载资源...","正在初始化用户信息...","正在获取服务器信息...","正在检测网络状态..."];a.loadingDefault&&a.defaultLoadingProgress(d)}else $(".loading-progress-logo").css({"background-image":"url("+o.formatImage(gameData.img_url,120,120,"jpg")+")"}),$(".loading-progress-name .loading-progress-name").text(gameData.title),a.changeLoadingTip(),a.loadingTip=setInterval(function(){a.changeLoadingTip()},2e3),$("#h5-loading-2").show(),$("#logo").addClass("animated bounceInUp").show(),$("#logo").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a.loadingDefault&&a.defaultLoadingProgress()});else s.hide()},changeLoadingTip:function(){var e=Math.round(Math.random()*(config.loadinginfo.length-1));$(".loading-progress-tip .loading-game-tip").text(config.loadinginfo[e])},defaultLoadingProgress:function(e){if(e instanceof Array){var a=e.shift();a&&($("#h5-loading-2 p").text(a),$("#hdProgressLoading p").text(a))}var i=20,t=this,o=0,s=setInterval(function(){if(o+=1,t.loadingProgress(o),o>50){clearInterval(s);var a=setInterval(function(){if(o+=1,t.loadingProgress(o),o>75){clearInterval(a);var s=setInterval(function(){o+=1,[n.games.HUANC].indexOf(config.gameId)==-1&&(100==o&&e instanceof Array&&e.length>0?t.defaultLoadingProgress(e):t.loadingProgress(o)),100==o&&clearInterval(s)},4*i)}},2*i)}},i)},loadingProgress:function(e){$(".loading-progress-finish").css("visibility","visible"),$(".loading-progress-finish").css("margin-left",e-100+"%"),e>=100&&(clearInterval(this.loadingTip),s.hide())},preLoadThirdPayPage:function(){if(!o.browser().isWeixin()){var e="https://wappaygw.alipay.com/service/rest.htm?_input_charset=utf-8&format=xml",a="<iframe src="+e+" id='aliPrePayUrl' style='display:none'>";$("body").append(a),$("#aliPrePayUrl")[0].onload=function(){$("#aliPrePayUrl").remove()}}},showGame:function(e){if(!this.gameFrame.attr("src")&&"undefined"!=typeof e){var a=this,i=["id","scrolling","allowtransparency","frameborder","width","height","align","style"],t=$("<iframe></iframe>");$.each(i,function(e,i){t.attr(i,a.gameFrame.attr(i))});var n=o.parseUrl(window.location.href),s=o.parseUrl(e);$.each(["shareKey"],function(a,i){n.searchObject[i]&&!s.searchObject[i]&&(e+="&"+i+"="+n.searchObject[i])}),t.attr("src",e),this.gameiframe.html(t),this.gameFrame=t,frame.sdkWindow=t[0].contentWindow}$window.height=$(window).height(),$window.width=$(window).width();var r=o.browser().isMobile(),d=o.hiddenFlag("menu");r&&!d&&(this.button.showMenu.parents(".shortcuts").show(),this.menuPep());var c=!1;if(1==o.localUser.isGuest.get()&&(1==config.loginMode||c&&!$.inArray(config.appId,[100667])!=-1)){config.loginMode=1;var l=document.createEvent("CustomEvent");l.initCustomEvent("frameMenuLogin",!1,!1,""),eventData.from="enter-game",document.dispatchEvent(l)}},showToggleRotation:function(){},showWebShare:function(e){window.open(e,"newwindow","height=400,width=400,top=100,left=100")},showPayPage:function(e){if(e=e.replace(/^http(s)?:/,location.protocol),o.browser().isAlipay())window.location.href=e;else{var a=this;setTimeout(function(){a.hidePayScan(),a.changePage("#h5-game-pay")},1e3),c.attr("src",e),frame.noFrame||c.height($(window).height())}},checkOrder:function(){frame.checkOrder()},showPayQrcode:function(e,a){this.hidePayScan();var i="请打开微信扫一扫完成支付";o.browser().isWeixin()&&o.browser().isMobile()&&(i="请长按二维码识别完成支付");var t='<div class="h5c-pay-row1"><div class="h5c-pay-row1-title">'+i+'</div></div><div class="h5c-pay-row2"><div class="h5c-pay-row2-img"><img src="'+e.data+'"></div>',n={html:t,overlayCallback:function(){frame.checkOrder(e.order_no,a)}},s=o.modal(n);s.object.addClass("h5c-pay-qr"),s.show()},showPayChoose:function(e,a,i){var t=!1,s=!1,r=[n.channels.ZHUISHU,n.channels.GGBOOK,n.channels.LESHIAPP,n.channels.ZHIFUTONG];r.indexOf(config.appId)>-1&&(s=!0),(o.browser().isWeixin()||o.browser().isAlipay()||o.browser().isDouYu()&&o.browser().isAndroid()&&!window.location.href.match(/pt\/305/)||o.browser().isBaiduBrowser()&&o.browser().isAndroid())&&(t=!0);var d={};if(i||(i=[]),i.indexOf("alipay_sdk")>-1?d.alipay_sdk="支付宝支付":i.indexOf("alipay_web")>-1?d.alipay_web="支付宝支付":d.alipay_wap="支付宝支付",i.indexOf("pay_weixin_sdk")>-1)d.pay_weixin_sdk="微信支付";else if(i.indexOf("pay_weixin_qr")>-1)d.pay_weixin_qr="微信支付";else if(o.browser().isEXT_WIN()&&"undefined"!=typeof AppExt&&"undefined"!=typeof AppExt.openExtWindow)d.ipaynowwx_iosapp="微信支付";else{var c=Math.floor(10*Math.random()+1);c=2,c>1?d.ipaynow_weixin="微信支付":d.swiftpass_weixin="微信支付"}if(o.browser().isIos()||(d.shengpay_card="盛付通支付"),n.isChannel(config.appId,n.channels.JSBANK)&&i.indexOf("pay_jsbank")>-1&&(delete d.alipay_wap,d.pay_jsbank="苏银豆"),frame.noFrame&&(delete d.ipaynow_weixin,delete d.ipaynow_unionpay),e.balance&&e.balance>=e.total_fee){var l="alipay_wap";return delete e.balance,delete e.lastPayName,void a(e,l)}(s||t)&&delete d.ipaynow_weixin,s&&delete d.swiftpass_weixin;var g="订单价格",h=parseFloat(e.total_fee),p="",m=0;e.balance&&e.balance>0&&(g="扣除余额，您还需支付：",h=parseFloat(e.total_fee-e.balance),p="余额：￥"+e.balance);var u='<div class="h5c-pay-row1"><div class="h5c-pay-row1-label">'+g+'</div><div class="h5c-pay-row1-amount">￥'+h.toFixed(2)+'</div></div><div class="h5c-pay-row2"><div class="h5c-pay-row2-label">选择支付方式</div><div class="h5c-pay-row2-amount">'+p+'</div></div><div class="h5c-pay-list">';$.each(d,function(e,a){var i="";m>=4&&(i="hide"),u+='<div class="h5c-pay-way '+i+'" payName="'+e+'"><label for="'+e+'"><div class="h5c-pay-image" id="h5-pay-image-'+e+'"></div><span class="h5c-pay-name">'+a+"</span></label></div>",m++}),u+='<div class="h5c-pay-way blank hide"></div></div>',m>4&&(u+='<div class="h5c-pay-row3"><div class="h5c-pay-row3-text">查看更多支付方式</div></div>');var f={html:u,overlayCallback:function(){var e={code:-1,message:"cancel",showMessage:"取消支付",data:{}};frame.afterPay(e)}},v=o.modal(f);v.object.addClass("h5c-pay-choose"),$(window).width()>$(window).height()&&v.object.addClass("landscape"),v.show(),$(".h5c-pay-way").on("click",function(){if(!$(this).hasClass("blank")){delete e.balance,delete e.lastPayName,v.hide();var i=$(this).attr("payName");"pay_jsbank"==i?o.modalConfirm({text:"<p>需要消耗"+100*e.total_fee+"苏银豆，是否确认使用苏银豆支付?</p>",yCallback:function(){a(e,i)},nCallback:function(){var e={code:-1,message:"cancel",showMessage:"取消支付",data:{}};frame.afterPay(e)},overlayCallback:function(){var e={code:-1,message:"cancel",showMessage:"取消支付",data:{}};frame.afterPay(e)}}):a(e,i)}}),$(".h5c-pay-row3").on("click",function(){v.object.css({top:"50px"}),$(".h5c-pay-way.hide").removeClass("hide"),$(this).hide()})},hidePayScan:function(){$(".h5c-pay-scan").remove(),$("#h5-modal-overlay").remove()},showPayScan:function(e){var a='<div class="h5c-pay-scan-icon"></div><div class="h5c-pay-scan-text">'+e+'</div><div class="h5c-pay-scan-loading"><div id="h5-circle-1" class="h5c-circle"></div><div id="h5-circle-2" class="h5c-circle"></div><div id="h5-circle-3" class="h5c-circle"></div><div id="h5-circle-4" class="h5c-circle"></div><div id="h5-circle-5" class="h5c-circle"></div><div id="h5-circle-6" class="h5c-circle"></div><div id="h5-circle-7" class="h5c-circle"></div><div id="h5-circle-8" class="h5c-circle"></div></div>',i={html:a,overlayCallback:function(){}},t=o.modal(i);return t.object.addClass("h5c-pay-scan"),$(window).width()>$(window).height()&&t.object.addClass("landscape"),t.show(),t},showPayConfirm:function(e,a){var i=this,t='<div class="h5c-pay-row1"><div class="h5c-pay-row1-text">支付提示</div></div><div class="h5c-pay-row2"><div class="h5c-pay-row2-text">请根据支付情况点击下方按钮</div><a id="h5-pay-click-a" href="#"><div id="h5-pay-click"><span>点击打开微信支付</span></div></a><div id="h5-pay-finish"><span>已完成支付</span></div><div id="h5-pay-other"><span>微信未响应，另选支付方式</span></div>',n={html:t,overlayCallback:function(){frame.checkOrder(e,a)}},s=o.modal(n);s.object.addClass("h5c-pay-confirm"),$(window).width()>$(window).height()&&s.object.addClass("landscape"),s.show(),$("#h5-pay-finish").on("click",function(){s.hide(),frame.checkOrder(e,a)}),$("#h5-pay-other").on("click",function(){if(s.hide(),frame.gameOrderData)frame.paySign(frame.gameOrderData.orderData,frame.gameOrderData.pay_name);else{i.showPayError("微信未响应","请在页面关闭后重新下单<br>并选择其他支付方式");var e={code:-1,message:"weixin no response",showMessage:"微信没有响应",data:{}};frame.afterPay(e,frame.currentOrderNum)}})},showPayError:function(e,a){var i='<div class="h5c-pay-row1"><div class="h5c-pay-row1-text">'+e+'</div></div><div class="h5c-pay-row2"><div class="h5c-pay-row2-text"><span>'+a+'</span></div><button id="h5-pay-close"><span>关闭（5）</span></button>',t={html:i,overlayCallback:function(){}},n=o.modal(t),s=5;n.object.addClass("h5c-pay-error"),$(window).width()>$(window).height()&&n.object.addClass("landscape"),n.show();var r=setInterval(function(){s--,0==s&&(clearInterval(r),n.hide()),$("#h5-pay-close").text("关闭（"+s+"）")},1e3);$("#h5-pay-close").on("click",function(){n.hide()})},rotatePayChoose:function(){var e=$(".h5c-pay-choose");if(e.length>0){var a=e.hasClass("landscape"),i=$(window).width()>$(window).height();a===i?e.show():e.hide()}},finishLogin:function(){this.changePage("#h5-game");var e=o.localUser.isGuest.get();0!=e||n.isChannel(config.appId,n.channels.TESTAPP)||$("#menu-login").remove()},showSafariDesktopTip:function(){var e=config.siteDomain+"page/safaritip/gameid/"+config.gameId;$("#safari-desktop-tips-frame iframe").attr("src",e),this.changePage("#safari-desktop-tips-frame")},closeSafariDesktopTip:function(){this.changePage("#h5-game")},showProductList:function(e){var a=e.currency_unit?e.currency_unit:"钻石",i=e.currency_rate?e.currency_rate:1,t=e.user_balacne*i,o=e.currency_icon?e.currency_icon:"http://down.68ps.com/down/UploadFile/20081116/sc11171_1.png";$("#ios-pay-title span").text(a),$("#ios-pay-balance span:first").text(a),$("#ios-pay-balance span:last").text(t),$("#ios-pay-recharge span:first").text(a),$("#ios-pay-recharge span:last").text(t),$("#ios-pay-products").attr("orderno",e.orderno),$("#ios-pay-products").empty(),$.each(e.products,function(e,a){var i='<li pid="'+a.product_id+'"><div class="ios-item-icon"><img src="'+o+'"></div><div class="ios-item-name"><span>'+a.product_name+'</span></div><div class="ios-item-price">￥'+a.product_price+"</div></li>";$("#ios-pay-products").append(i)}),$("#ios-pay-item-modal").modal("toggle")},showWebPayConfirm:function(e){$("#web-pay-confirm-modal a").attr("href",e),
$("#web-pay-confirm-modal a").on("click",function(){$("#web-pay-confirm-modal").modal("hide")}),$("#web-pay-confirm-modal").modal("toggle")},finishPay:function(){this.changePage("#h5-game")},finishShare:function(){o.browser().isWeixin()&&$("#weixin-share-tip-modal").modal("hide"),$("#h5-game").show(),this.button.showMenu.show()},toggleMenu:function(){d.modal("toggle")},showSharePage:function(){this.sdkInterface&&this.sdkInterface.getMicroClientInfo?($("#share-choose-modal .share-list").addClass("four-share-method"),$("#share-choose-modal .share-weixin").show(),n.isGame(config.gameId,n.games.CQSJ)&&o.browser().isAndroid()&&$("#share-choose-modal .share-qq").show()):o.browser().isAndroid()&&o.browser().isBaiduBrowser()&&o.browser().isBaiduBrowserUp71()?($("#share-choose-modal .share-list").addClass("four-share-method"),$("#share-choose-modal .share-weixin").show(),$("#share-choose-modal .share-weixin-timeline").show(),$("#share-choose-modal .share-qq").show(),$("#share-choose-modal .share-sina").show()):($("#share-choose-modal .share-list").removeClass("four-share-method"),100353==config.gameId?$("#share-choose-modal .share-qzone").show():$("#share-choose-modal .share-sina").show()),o.showModal("share-choose-modal",{overlayCallback:function(){var e={code:-1,message:"cancel",showMessage:"取消分享",data:{}};hdJsConn.shareCallback(JSON.stringify(e)),o.closeModal("share-choose-modal")}})},showWeixinShareTip:function(e){e=e||"点击右上角分享给好友",e.match(/^https?:\/\/[-A-Za-z0-9+&@#\/%?=~_|!:,.;]+[-A-Za-z0-9+&@#\/%=~_|]/)?$("#weixin-share-tip-modal .info").css("background-image","url("+e+")").css("background-size","contain"):$("#weixin-share-tip-modal .info").html(e),o.showModal("weixin-share-tip-modal",{overlayCallback:function(){o.closeModal("weixin-share-tip-modal")}})},initTouchBtnParams:function(){var e={initHeight:170,initWidth:$window.width-$("#show-menu").width()/2};return e},getTouchBtnPosition:function(e,a){var i=e.initWidth,t=e.initHeight;if("undefined"==typeof a){var a="landscape";$window.height>$window.width&&(a="portrait")}var n=o.localGamePage.btnPosition.get();if(""==n)n={landscape:{},portrait:{}},n[a]={left:i,top:t};else{n=$.parseJSON(n);var s=n[a].left,r=n[a].top,d=$("#show-menu").width(),c=!1;s==-d/2||s==$window.width-d/2?(r<0||r>$window.height-d/2)&&(c=!0):s>0||s<$window.width-d?r!=-d/2&&r!=$window.height-d/2&&(c=!0):c=!0,c&&(n[a]={left:i,top:t})}return n},getBtnFinalPosition:function(){var e=$("#show-menu").height(),a=$("#show-menu").position(),i=a.left,t=a.top;return i<=($window.width-e)/2?t<=($window.height-e)/2?i>t?t=-e/2:i=-e/2:i>$window.height-t-e?t=$window.height-e/2:i=-e/2:t<=($window.height-e)/2?$window.width-i-e>t?t=-e/2:i=$window.width-e/2:$window.width-i>$window.height-t?t=$window.height-e/2:i=$window.width-e/2,a.left=i,a.top=t,a},setTouchBtnPosition:function(e,a){if("undefined"==typeof a){var a="landscape";$window.height>$window.width&&(a="portrait")}var i=o.localGamePage.btnPosition.get();i=""==i?{landscape:{},portrait:{}}:$.parseJSON(i);var t=this.getBtnFinalPosition();i[a]=t,o.localGamePage.btnPosition.set(JSON.stringify(i))},menuOpPosition:function(){var e=$("#show-menu").height(),a=1.5*$("#show-menu").width();a+=$(".h5center-game-menu .show").eq(0).width()*$(".h5center-game-menu .show").length;var i=this.getBtnFinalPosition();i.left==-e/2||i.left==$window.width-e/2?$(".h5center-game-menu").css({width:a,height:e}):$(".h5center-game-menu").css({height:a,width:e});var t="left",o={left:0,top:0,padding:"0 0 0 "+e+"px"},n="";i.left==-e/2?(o.left=0,o.top=i.top,o.padding="0 0 0 "+e+"px",t="left",n={left:0}):i.left==$window.width-e/2?(o.left=$window.width-$(".h5center-game-menu").outerWidth(),o.top=i.top,o.padding="0 0 0 0.88em",t="left",n={left:$window.width-e}):i.top==-e/2?(o.left=i.left,o.top=0,o.padding=e+"px 0 0 0",t="none",n={top:0}):(i.top=$window.height-e/2)&&(o.left=i.left,o.top=$window.height-$(".h5center-game-menu").outerHeight(),o.padding="0.88em 0 0 0",t="none",n={top:$window.height-e}),$(".h5center-game-menu").css(o),$(".h5center-game-menu div").css({"float":t}),""!=n&&$("#show-menu").css(n)},menuBtnStyle:function(){var e=$("#show-menu").position(),a=$("#show-menu").height();$("#show-menu").removeClass("bg-icon").addClass("bg-none"),0==e.left?$("#show-menu .child-circle").attr("class","child-circle left-arrow"):e.left==$window.width-a?$("#show-menu .child-circle").attr("class","child-circle right-arrow"):0==e.top?$("#show-menu .child-circle").attr("class","child-circle up-arrow"):e.top==$window.height-a&&$("#show-menu .child-circle").attr("class","child-circle down-arrow")},menuPep:function(){var e=this,a=this.initTouchBtnParams(),i="landscape";$window.height>$window.width&&(i="portrait");var t=this.getTouchBtnPosition(a,i);0==config.gameMenuLogout?$("#menu-back-home").remove():n.isChannel(config.appId,n.channels.FZCHINANET)?$("#menu-back-home").addClass("menu-gift").html("<span>礼包</span>"):0===isOpenByGc&&$("#menu-back-home").addClass("menu-more-game").html("<span>更多</span>"),(0==config.gameMenuShare||o.browser().isWeixin())&&$("#menu-share").remove(),0==config.gameMenuLogin&&$("#menu-login").remove(),e.sdkInterface&&e.sdkInterface.getMicroClientInfo?$("#menu-back-home").length>0&&$("#menu-back-home").remove():$("#menu-refresh").remove(),$("#menu-xwalk").remove(),0==o.localUser.isGuest.get()&&$("#menu-login").addClass("switch-user-info").html("<span>账号</span>"),0==config.gameMenuDesktop||e.sdkInterface&&e.sdkInterface.getMicroClientInfo?$("#menu-desktop").remove():1==config.categoryType&&(o.browser().isIos()?o.browser().isSafari()||o.browser().isWeixin()||$("#menu-desktop").remove():this.sdkInterface||0!=config.hasGameMicroUrl||$("#menu-desktop").remove()),1!=config.categoryType&&($("#menu-desktop").remove(),$("#menu-login").remove()),n.isGame(config.gameId,n.games.CQSJ)&&$("#menu-desktop").length>0&&!config.isBindPhone&&$("#menu-desktop").removeClass("show").addClass("hide").hide(),n.isChannel(config.appId,n.channels.BAIDUBROWSER)&&o.browser().isBaiduBrowser()&&$("#menu-desktop").remove(),this.button.showMenu.pep({constrainTo:"window",startPos:t[i],useCSSTranslation:!1,aSide:!0,stop:function(i,t){this.started&&(a=e.initTouchBtnParams(),e.setTouchBtnPosition(a))}}),$("#show-menu").bind("tap",function(a){a.preventDefault(),e.menuOpPosition(),e.toggleMenu()}),$("#game-menu").on("show.bs.modal",function(a){$("body").bind("touchmove",function(e){e.preventDefault()}),e.pepFlag=!1,$.pep.toggleAll(e.pepFlag),e.menuBtnStyle()}),$("#game-menu").on("hide.bs.modal",function(a){$("body").unbind("touchmove"),e.pepFlag=!0,$.pep.toggleAll(e.pepFlag),$("#show-menu .child-circle").attr("class","child-circle menu-icon");var i=$("#show-menu");i.removeClass("bg-none").addClass("bg-icon");var t=i.position(),o=i.width();0==t.left?i.css({left:-o/2}):t.left==$window.width-o?i.css({left:$window.width-o/2}):0==t.top?i.css({top:-o/2}):t.top==$window.height-o&&i.css({top:$window.height-o/2})})},codePep:function(){this.button.showCode.pep({constrainTo:"window",axis:"y",useCSSTranslation:!1,startPos:{top:20},stop:function(e,a){this.started||$("#other-op-modal").modal("toggle")}})},backDropResize:function(){$(".modal-backdrop").length>0&&$(".modal-backdrop").css({height:$(window).height(),width:$(window).width()})},setBodyFontSize:function(){var e=480;o.browser().isMobile()?n.isGame(config.gameId,n.games.LTY)?e=1280:"device-width"==config.deviceWidth&&(e=$(window).width()):e=n.isGame(config.gameId,n.games.CQSJ)?480*$(window).height()/800:n.isGame(config.gameId,n.games.HUANC)?720*$(window).height()/1280:e<$(window).width()?e:$(window).width();var a=16*e/375+"px";document.body.style.fontSize=a},setGameLoginPageSize:function(){if("undefined"!=typeof config.showUserAppList&&config.showUserAppList&&0!=$("#h5-app-list-dialog").length){var e=$("#h5-app-list-dialog .h5center-login-container").height();if(o.browser().isMobile()){if($(window).width()>$(window).height()&&e>0){var a=($(window).height()-e)/2;$("#h5-app-list-dialog .h5center-login-container").css({bottom:a})}else $("#h5-app-list-dialog .h5center-login-container").attr({style:""});$("#h5-game-login-home-bg").removeClass("game-user-list-bg-pc"),$("#h5-game-user-list-bg").removeClass("game-user-list-bg-pc"),$("#h5-app-list-dialog").removeClass("h5-app-list-pc")}else if("undefined"!=typeof config.gameSpecialLogin&&config.gameSpecialLogin)(self==top||$(window).width()>$(window).height())&&($("#h5-game-login-home-bg").addClass("game-user-list-bg-pc"),$("#h5-game-user-list-bg").addClass("game-user-list-bg-pc"),$("#h5-app-list-dialog").addClass("h5-app-list-pc"));else if($(window).width()>$(window).height()&&e>0){var a=($(window).height()-e)/2;$("#h5-app-list-dialog .h5center-login-container").css({bottom:a})}else $("#h5-app-list-dialog .h5center-login-container").attr({style:""})}},setRotationPage:function(e,a){if(t){var i=$(window).width(),s=$(window).height();o.browser().isUcBrowser()&&n.isGame(config.gameId,n.games.WYFT)&&(s-=60);try{$("#game-frame")[0].setAttribute("width",i),$("#game-frame")[0].setAttribute("height",s),$("#game-frame")[0].setAttribute("align","top"),$("#game-frame").css({width:i,height:s})}catch(r){console.log(r.message)}}var c=0,l="portrait";if("undefined"!=typeof a&&"sdk"==a?(c="landscape"==eventData.sdkRotation?"1":"0",l=eventData.sdkRotation):(c=$(window).width()>$(window).height()?"1":"0",l=$(window).width()>$(window).height()?"landscape":"portrait"),2==gameData.display||n.isGame(config.gameId,n.games.WZZL)||(c!=gameData.display?0==$(".h5center-rotation-"+gameData.display).length&&$("body").bind("touchmove",function(e){e.preventDefault()}):(o.browser().checkAgent("HUAWEI",!0)||(t=!1),$(".h5center-rotation-"+gameData.display).length>0&&$("body").unbind("touchmove"))),"block"===$("#show-menu").css("display")){"block"===d.css("display")&&d.modal("toggle");var g=80,h="portrait"===l?60:40,p=parseFloat(document.body.style.fontSize);h=.78125*h/16*p;var m=$(window).width()-h/2,u=o.localGamePage.btnPosition.get();""==u?(u={landscape:{},portrait:{}},u[l]={left:m,top:g}):(u=o.parseJSON(u),""!=u&&$.isEmptyObject(u[l])&&(u[l]={left:m,top:g})),$("#show-menu").css(u[l])}$(".h5c-modal").each(function(e,a){if("block"==$(this).css("display")){var i=$(this).attr("id");"string"==typeof i&&o.modifyModalCss("#"+i)}})},toggleRotationTip:function(e){var a=this;if(0!=$("#game-frame").length){this.backDropResize(),$("#game-menu .modal-backdrop").length>0&&d.modal("hide"),$("#share-choose-modal .modal-backdrop").length>0&&$("#share-choose-modal").modal("hide");var i=this.setRotationPage,t={};$firstInitFrameSize?($firstInitFrameSize=!1,i(t,e),a.rotatePayChoose(),$rotationInterval=null):null==$rotationInterval&&($rotationInterval=setInterval(function(){var o=$(window).height(),n=$(window).width();o!=$window.height||n!=$window.width?($window.height=o,$window.width=n,a.setBodyFontSize(),i(t,e),a.rotatePayChoose(),a.setGameLoginPageSize()):(a.rotationTimes++,a.rotationTimes>5&&(clearInterval($rotationInterval),$rotationInterval=null,a.rotationTimes=0))},50))}},resizeGameFrame:function(){this.setBodyFontSize(),this.setRotationPage({})},userOnline:function(){function e(){"undefined"==typeof __intervalUL&&(__intervalUL=setInterval(function(){i.duration=t,$.post(config.siteDomain+"user/online",i,function(n){0==n.code?(i.uuid=n.data.uuid,o++,3==o?(t=3e4,a(),e()):10==o?(t=6e4,a(),e()):20==o&&(t=3e5,a(),e())):a()},"json")},t))}function a(){clearInterval(__intervalUL),__intervalUL=void 0}var i={};i.appid=config.appId,i.gameid=config.gameId,i.uuid="";var t=5e3,o=0;e()},showGameRank:function(e,a){var i=this,t=o.localGameData.gameScore(frame.gameId).get();if(o.localGameData.gameScore(frame.gameId).set(a),""==t||t<a){var n={game_key:e,open_id:o.localUser.openId.get(),score:a};o.ajaxServerData("home/gamerankinfo",n,function(e){0==e.code?(shareData.title="我在"+gameData.title+"中排第"+e.data.currentrank+"名，来跟我比比看？",i.appendGameRank($("#h5-rank-list"),e.data.items)):alert(e.message)}),o.ajaxServerData("home/gamerankinfo100",n,function(e){0==e.code?i.appendGameRank($("#h5-rank-top"),e.data.items):alert(e.message)}),this.changePage("#h5-game-rank");var s=$(window).height()-$(".h5c-rank-list-footer").outerHeight()-$(".h5c-rank-header").outerHeight()-20;$("#h5-rank-list").css("max-height",s+"px"),$("#h5-rank-top").css("max-height",s+"px")}},appendGameRank:function(e,a){var i="";$.each(a,function(e,a){a.order<4&&(a.order='<img src="'+config.staticServer+"main/images/rank_"+a.order+'.png" alt="'+a.order+'">'),i+='<li><div class="rank-cell"><div class="rank-order">'+a.order+'</div></div><div class="rank-cell"><div class="rank-avatar"><img src="'+a.avatar+'"></div></div><div class="rank-cell"><div class="rank-info"><div class="rank-nickname">'+a.nickname+'</div><div class="rank-score">'+a.score+"</div></div></div></li>"}),e.empty().append(i)},reportRequestTiming:function(){try{var e=window.performance;if(!e)return void console.log("你的浏览器不支持 performance 接口");var a=e.timing,i={dns:a.domainLookupEnd-a.domainLookupStart,tcp:a.connectEnd-a.connectStart,request:a.responseStart-a.requestStart,response:a.responseEnd-a.responseStart};$.post(config.siteDomain+"user/timing",i,function(e){},"json")}catch(t){alert("发生异常:"+t.message)}}}},function(e,a,i){var t=i(1),o=i(5),n=i(2);e.exports={touchAction:"click",sdkInterface:!1,sdkParamsInit:function(e){this.sdkInterface=e},addEvent:function(){var e=this;if(e.sdkInterface)document.addEventListener("sdkRotation",function(e){o.toggleRotationTip("sdk")});else{var a="onorientationchange"in window,i=a?"orientationchange":"resize";(/\bAndroid\b.*\bChrome\b/.test(navigator.userAgent)||/\bOPR\/\b/.test(navigator.userAgent))&&(i="resize"),(t.browser().checkAgent("HUAWEI",!0)||t.browser().checkAgent("wnl",!1))&&(i="resize"),window.addEventListener(i,function(){o.toggleRotationTip()},!1),t.browser().checkAgent("wnl",!1)&&setTimeout(function(){o.toggleRotationTip()},200)}$("#menu-share").on(this.touchAction,function(){$("#game-menu").modal("toggle"),shareData.title=gameData.title;var e=document.createEvent("CustomEvent");return e.initCustomEvent("frameShare",!1,!1,""),document.dispatchEvent(e),console.log("To Call Frame Share")}),$("#menu-desktop").on(this.touchAction,function(){$("#game-menu").modal("toggle");var e=document.createEvent("CustomEvent");return e.initCustomEvent("frameShortCut",!1,!1,""),document.dispatchEvent(e),console.log("To Call Frame ShotCut")}),$("#menu-download-tips").on(this.touchAction,function(){$("#game-menu").modal("toggle"),$("#menu-download-tips").hide();var e=document.createEvent("CustomEvent");return e.initCustomEvent("frameShortCut",!1,!1,""),document.dispatchEvent(e),console.log("To Call Frame ShotCut")}),$("#menu-login").on(this.touchAction,function(){$("#game-menu").modal("toggle");var e=document.createEvent("CustomEvent");return $(this).hasClass("switch-user-info")?(e.initCustomEvent("frameMenuUserInfo",!1,!1,""),document.dispatchEvent(e),console.log("to Call show user info")):(e.initCustomEvent("frameMenuLogin",!1,!1,""),eventData.from="",document.dispatchEvent(e),console.log("To Call Frame menu login"))}),$("#menu-login-tips").on(this.touchAction,function(){$("#game-menu").modal("toggle");var e=document.createEvent("CustomEvent");return e.initCustomEvent("frameMenuLogin",!1,!1,""),document.dispatchEvent(e),console.log("To Call Frame menu login")}),o.button.menuBackHome.on(this.touchAction,function(){if($("#game-menu").modal("toggle"),n.isChannel(config.appId,n.channels.LESHI))if(t.browser().isAndroid())t.toastMessage("请点击手机返回按钮");else{var e="http://mgame.letv.com/h5games.html";window.location.href=e}else{if(n.isChannel(config.appId,n.channels.FZCHINANET)){if(!confirm("即刻领取免费流量。"))return!1}else if(n.isChannel(config.appId,n.channels.SXYJ)&&"object"==typeof hostSdk)try{return void hostSdk.exit()}catch(a){console.log(a)}else if(1==config.categoryType&&!confirm("您是否要退出此游戏？"))return!1;if(n.isChannel(config.appId,n.channels.WANNINALI)&&t.browser().isAndroid()){var i=document.createEvent("CustomEvent");return i.initCustomEvent("showPopView",!1,!1,""),document.dispatchEvent(i),console.log("To Call showPopView")}if(""!=o.indexPagePosition&&t.localHomePage.indexPagePosition.set(o.indexPagePosition),""!=config.returnUrl)window.location.href=config.returnUrl;else{var s=config.siteDomain+"home/index/appid/"+config.appId,r=window.location.href.match(/[\/|&|?]pt[\/|=](\d+)/);null!=r&&r.length>1&&(s=s+"/pt/"+r[1]),window.location.href=s}}}),o.button.payClose.on(this.touchAction,function(){o.checkOrder(),o.finishPay()}),$("#ios-pay-products").on(this.touchAction,"li",function(){$("#ios-pay-item-modal").modal("hide");var e=document.createEvent("CustomEvent");return e.initCustomEvent("framePay",!1,!1,""),document.dispatchEvent(e),console.log("To Call Frame Pay")}),e.sdkInterface&&e.sdkInterface.getMicroClientInfo?($("#menu-refresh").on(this.touchAction,function(){var e=document.createEvent("CustomEvent");return e.initCustomEvent("menuRefresh",!1,!1,""),eventData.type=!0,document.dispatchEvent(e),console.log("To Call menu refresh")}),$("#menu-xwalk").on(this.touchAction,function(){var e=document.createEvent("CustomEvent");return e.initCustomEvent("menuXwalk",!1,!1,""),document.dispatchEvent(e),console.log("To Call menu update xwalk")}),o.button.shareWxTimeline.on(this.touchAction,function(){var e=document.createEvent("CustomEvent");return e.initCustomEvent("microShare",!1,!1,""),eventData.type="wxtl",document.dispatchEvent(e),t.closeModal("share-choose-modal"),console.log("To Call micro wxtimeline share")}),o.button.shareWx.on(this.touchAction,function(){var e=document.createEvent("CustomEvent");return e.initCustomEvent("microShare",!1,!1,""),eventData.type="wx",document.dispatchEvent(e),t.closeModal("share-choose-modal"),console.log("To Call micro wx share")}),o.button.shareQq.on(this.touchAction,function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("microShare",!1,!1,""),eventData.type="qq",document.dispatchEvent(e);var a={code:0,message:"success",showMessage:"已点击分享",data:{type:"weibo"}};return hdJsConn.shareCallback(JSON.stringify(a)),t.closeModal("share-choose-modal"),console.log("To Call micro qq share")}),o.button.shareSina.on(this.touchAction,function(){var e=document.createEvent("CustomEvent");return e.initCustomEvent("microShare",!1,!1,""),eventData.type="weibo",document.dispatchEvent(e),t.closeModal("share-choose-modal"),console.log("To Call micro sina weibo share")})):t.browser().isAndroid()&&t.browser().isBaiduBrowser()&&t.browser().isBaiduBrowserUp71()?(o.button.shareWx.on(this.touchAction,function(){n.BrowserBaidu.shareTo(shareData,"wx")}),o.button.shareQq.on(this.touchAction,function(){n.BrowserBaidu.shareTo(shareData,"qq")}),o.button.shareWxTimeline.on(this.touchAction,function(){n.BrowserBaidu.shareTo(shareData,"wxTimeline")}),o.button.shareSina.on(this.touchAction,function(){n.BrowserBaidu.shareTo(shareData,"weibo")})):(o.button.shareQzone.on(this.touchAction,function(){var e="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title="+encodeURIComponent(shareData.title)+"&summary="+encodeURIComponent(shareData.message)+"&url="+encodeURIComponent(shareData.url)+"&pics="+encodeURIComponent(shareData.img_url),a={code:0,message:"success",showMessage:"已点击分享",data:{type:"qzone"}};hdJsConn.shareCallback(JSON.stringify(a)),o.showWebShare(e)}),o.button.shareSina.on(this.touchAction,function(){var e="http://v.t.sina.com.cn/share/share.php?title="+encodeURIComponent(shareData.message)+"&url="+encodeURIComponent(shareData.url)+"&content=utf-8&sourceUrl="+encodeURIComponent(shareData.url)+"&pic="+encodeURIComponent(shareData.img_url),a={code:0,message:"success",showMessage:"已点击分享",data:{type:"weibo"}};hdJsConn.shareCallback(JSON.stringify(a)),o.showWebShare(e),t.closeModal("share-choose-modal")}),o.button.shareTxwb.on(this.touchAction,function(){var e=shareData.url.split("?");if(shareData.url=e[0],e.length>1)for(var a=e[1].split("&"),i=0;i<a.length;i++){var n=a[i].split("=");n.length>1&&""!=n[0]&&""!=n[1]&&(shareData.url+="/"+n[0]+"/"+n[1])}var s="http://v.t.qq.com/share/share.php?title="+encodeURIComponent(shareData.message)+"&url="+encodeURIComponent(shareData.url)+"&pic="+encodeURIComponent(shareData.img_url),r={code:0,message:"success",showMessage:"已点击分享",data:{type:"qzone"}};hdJsConn.shareCallback(JSON.stringify(r)),o.showWebShare(s),t.closeModal("share-choose-modal")})),o.button.wxOpenCloseBtn.on(this.touchAction,function(){o.wxOpenTip.hide()}),$(".h5c-rank-tabs>div").on(this.touchAction,function(){var e=$(this).attr("for");$(".h5c-rank-tabs>div").removeClass("selected"),$(".h5c-rank-list-body>ul").hide(),$(this).addClass("selected"),$(e).show()}),$("#rank-share").on(this.touchAction,function(){var e=document.createEvent("CustomEvent");return e.initCustomEvent("frameShare",!1,!1,""),document.dispatchEvent(e),console.log("To Call Frame Share")}),$("#rank-continue-game").on(this.touchAction,function(){o.changePage("#h5-game")})}}},function(e,a,i){var t=i(1),o="data:image/gif;base64,R0lGODlhaAGoAPf/AP////7+/v39/fz8/Pr6+vv7+/f39/n5+fT09Pj4+Pb29vX19fPz8+vr6/Hx8fLy8u/v7+3t7fDw8Ojo6Ofn5+7u7uXl5eHh4ezs7N/f3+rq6uPj49zc3GFhYQAAAOnp6cfHxwYGBtXV1dnZ2dDQ0OTk5BQUFL29vdfX1+bm5gICAsLCwhYWFhAQEMXFxUFBQQwMDAQEBL+/vwoKChkZGbq6uuLi4jAwMNbW1ggICB0dHV1dXYqKitvb28TExNra2pSUlG5ubsjIyLOzs6Ojo6urqygoKN7e3kVFRUpKStPT083NzSwsLCYmJiMjIx8fH4GBga2trVpaWn9/f9TU1BISEoaGhsbGxiUlJRsbG8rKypycnMnJyWpqat3d3VBQUDg4OMzMzLi4uA4ODrm5udjY2IyMjHR0dDExMTo6Ok1NTaampqenp5KSkjMzM1VVVdHR0TU1Nbu7u0tLS4ODg9LS0ldXV7S0tHd3d6SkpHFxcY+Pj6CgoJeXl2RkZGhoaCEhIc7OzkZGRlJSUqmpqbKysm1tbZmZmZ2dnby8vKKiorCwsFRUVHp6eoCAgKGhoS4uLoiIiI6Ojjc3N8vLy5CQkH19fXNzc7e3t7W1tWVlZcHBweDg4IeHhz4+Pk9PT0NDQ7a2tqioqHBwcFlZWRcXF8/Pz66urnZ2dj8/P2JiYnx8fIuLi7Gxsaqqqq+vr2tra5aWlkhISJiYmDw8PHl5ecPDw56enmdnZ76+vpubm8DAwJGRkaWlpSoqKoSEhJqamqysrF9fXykpKX5+flxcXDs7O2xsbF5eXmNjY3h4eDQ0NJOTk2ZmZkxMTCIiIjk5OW9vbwkJCRoaGoKCgiQkJD09PQMDA3Jycnt7e5WVlR4eHo2NjU5OTnV1dQ0NDS0tLQcHB0JCQkdHRw8PD0lJSZ+fnwsLCycnJ0BAQAUFBTIyMlhYWFFRUURERBgYGCsrK2BgYFtbW4mJiRUVFWlpaVZWVhMTExERETY2NoWFhQEBAVNTUyAgIC8vL////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBNzc0REVGOUQ2QjAxMUU0ODgyMkU0MTE4NjlDN0UwMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBNzc0REVGQUQ2QjAxMUU0ODgyMkU0MTE4NjlDN0UwMyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkE3NzRERUY3RDZCMDExRTQ4ODIyRTQxMTg2OUM3RTAzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkE3NzRERUY4RDZCMDExRTQ4ODIyRTQxMTg2OUM3RTAzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1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",n=$(".h5c-loading"),s=!0,r='{{#albums}}<li><div class="album {{#id}}inner-page{{/id}}" page="#h5-index-album|{{id}}"><div class="album-logo" style="background-image: url({{logo}})"></div><div class="album-info"><div class="album-title">{{title}}</div><div class="album-summary"><div>{{summary}}</div></div></div></div></li>{{/albums}}',d='<div id="focus" class="focus header-banner"><div class="hd"><ul>{{#adsKey}}<li class="">{{key}}</li>{{/adsKey}}</ul></div><div class="bd"><ul>{{#ads}}<li><img src="" _src="{{img}}" class="banner-item" url="{{url}}" link_type="{{link_type}}"></li>{{/ads}}</ul></div></div>',c='<div id="focus" class="focus header-banner"><div class="bd swiper-container"><ul class="swiper-wrapper">{{#ads}}<li class="swiper-slide"><img src="{{img}}" class="banner-item" url="{{url}}" link_type="{{link_type}}"></li>{{/ads}}</ul></div></div>',l='{{#games}}<li class="{{className}}" {{openLink}} {{needLogin}}><div class="game-logo"><img src="{{logo}}" alt=""></div><div class="game-name"><div>{{name}}</div></div><div class=""><button class="button button-border-thin button-rounded button-normal"><div>{{btnText}}</div></button></div></li>{{/games}}<div class="clearfix"></div>',g='{{#games}}<li class="game-item-view"><div class="game-cell game-logo"><div class="{{className}}" {{openLink}}><img src="{{logo}}"></div></div><div class="game-cell game-info"><div class="game-info-line head-line"><div class="game-info-head"><div class="game-info-title"><div>{{name}}</div></div><div class="game-info-tags"><ul>{{#formatTags}}<li class="tag-{{i}}"><div>{{tag}}</div></li> {{/formatTags}}</ul></div></div></div><div class="game-info-line star-line"><ul class="game-info-star">{{#formatStars}}<li class="game-info-star-{{.}}"></li>{{/formatStars}}</ul></div><div class="game-info-line description-line"><div class="game-info-description"><div>{{summary}}</div></div></div></div><div class="game-cell game-play"><div class="{{className}} game-play-btn" {{openLink}}><button class="button button-border-thin button-rounded button-normal"><div>{{btnText}}</div></button><div class="clearfix"></div></div><div class="game-play-count"><div>{{formatCount}}人在玩</div></div></div><div class="clearfix"></div></li>{{/games}}',h='{{#games}}<li class="game-item-view"><div class="game-cell game-logo"><div class="{{className}}" {{openLink}}><img src="{{logo}}"></div></div><div class="game-cell game-info"><div class="game-info-line head-line"><div class="game-info-head"><div class="game-info-title"><div>{{name}}</div></div><div class="game-info-tags"><ul>{{#formatTags}}<li class="tag-{{i}}"><div>{{tag}}</div></li> {{/formatTags}}</ul></div></div></div><div class="game-info-line star-line"><ul class="game-info-star">{{#formatStars}}<li class="game-info-star-{{.}}"></li>{{/formatStars}}<li class="dividing-line"></li><li class="game-size"><div>{{size}}</div></li></ul></div><div class="game-info-line description-line"><div class="game-info-description"><div>{{summary}}</div></div></div></div><div class="game-cell game-play"><div class="{{className}}" {{openLink}}><button class="button button-border-thin button-rounded button-normal"><div>{{btnText}}</div></button><div class="clearfix"></div></div><div class="game-play-count"><div>{{formatCount}}人在玩</div></div></div><div class="clearfix"></div></li>{{/games}}',p='{{#myGames}}<li><div class="inner-game" href="{{url}}"><div class="h5c-mygame-logo"><img src="{{logo}}"></div><div class="h5c-mygame-title"><div>{{name}}</div></div></div></li>{{/myGames}}',m='{{#activitys}}<li class=""><div class="desc-summary {{className}}" {{openLink}}><div>{{text}}</div></div></li>{{/activitys}}',u='{{#items}}<li><div class="item inner-page" page="#h5-index-item-detail|{{id}}"><div class="item-cell game-logo"><img src="{{formatLogo}}"></div><div class="item-cell item-info"><div class="item-info-line"><div class="item-name"><span class="game-name">{{game_name}}</span> <span class="gift-name">{{item_name}}</span></div></div><div class="item-info-line"><div class="item-num {{oos}}">剩余：{{quantity}}/{{quantity_total}} {{oos_text}}</div></div></div><div class="item-cell"><div class="item-credit"><div>{{formatPrice}}</div></div></div></div><div class="clearfix"></div><div class="item-content"><div>{{description}}</div></div></li>{{/items}}',f='{{#items}}<li class="inner-page" page="#h5-index-item-detail|{{id}}"><div class="order-cell game-logo"><div><img src="{{formatLogo}}"></div></div><div class="order-cell order-info"><div class="order-info-line"><div class="order-info-subject"><span class="game-name">{{game_name}}</span> <span class="gift-name">{{item_name}}</span></div></div><div class="order-info-line"><div class="order-info-date">{{code}}</div></div></div><div class="order-cell"><div class="order-amount"><div>{{formatPrice}}</div></div></div></li>{{/items}}',v='{{#game}}<div class="game-detail-header"><div class="game-base"><div class="game-left-column"><div class="game-logo"><img src="{{logo}}" alt=""></div></div><div class="game-right-column"><div class="game-name"><div>{{name}}</div></div><div class="game-star"><ul class="game-info-star">{{#formatStars}}<li class="game-info-star-{{.}}"></li>{{/formatStars}}</ul></div><div class="game-summary"><div>{{summary}}</div></div><div class="download-field"><div class="download-btn">免费下载</div><div class="players"><div>{{formatCount}}人正在玩</div></div></div></div><div class="clearfix"></div><div class="game-tag">{{#formatTags}}<div class="tag-name"><div>{{tag}}</div></div>{{/formatTags}}<div class="clearfix"></div></div></div></div><div class="game-detail-body"><div id="gameImgsBox"><div class="bd"><ul>{{#video}}<li class="game-video"><video src="{{video}}" height="100%" width="100%" preload="auto">your browser does not support the video tag </video><img src="{{img}}"><div class="tvp_overlay_play"><span class="tvp_button_play"></span></div></li>{{/video}}{{#images}}<li><img src="{{.}}"></li>{{/images}}</ul></div></div> <div class="game-desc-show"><div class="title"><div>介绍</div></div><div class="desc">{{description}}</div></div></div> <div class="game-similar-list"><div class="h5c-box-header"><div class="left-title"><div>推荐</div></div><div class="right-title"><div id="my-games-last" class="inner-page" page="#h5-index-tab|tab-mobile-list"><div>更多</div></div></div><div class="clearfix"></div></div><ul class="game-summary-list"></ul></div> <div class="game-download"><div class="download-btn">下载({{size}})</div></div>{{/game}}',w='{{#tasks}}<div class="task-item-view"><div class="task-desc {{specialTaskClass}}"><div class="game-logo-m pull-left"><img src="{{game.logo}}"><div class="special-task-label"></div></div><div class="game-center-desc pull-left"><div class="game-name"><div>{{game.name}}</div></div><div class="rewards"><div>奖励+{{reward}}金币<span>(奖励X{{reward_multiple}}倍)</span></div></div></div><div class="get-reward pull-left"><button class="button button-border-thin button-rounded button-normal {{className}} {{btnClass}}" {{openLink}} {{needLogin}}><div>{{btnText}}</div></button></div><div class="clearfix"></div></div><div class="task-condition pull-left"><div>达成条件：{{condition}}</div></div><div class="clearfix"></div></div>{{/tasks}}',y='{{#shops}}<div class="shop-item pull-left inner-page" page="#h5-index-item-detail|{{id}}"><div class="shop-item-img"><img src="{{images}}"></div><div class="shop-item-name"><div>{{item_name}}</div></div><div class="exchange-point">{{price}}金币</div></div>{{/shops}}<div class="clearfix"></div>',b='{{#games}}<li class="game-item-view {{actcls}}"><div class="game-cell game-logo"><div class="{{className}}" {{openLink}}><img src="{{logo}}"></div></div><div class="game-cell game-info"><div class="game-info-line head-line"><div class="game-info-head"><div class="game-info-title"><div>{{name}}</div></div></div></div><div class="game-info-line star-line"><ul class="game-info-star">{{#formatStars}}<li class="game-info-star-{{.}}"></li>{{/formatStars}}</ul></div><div class="game-info-line description-line"><div class="game-info-description"><div>{{summary}}</div></div></div></div><div class="game-cell game-play"><div class="{{className}} game-play-btn" {{openLink}}><button class="button button-border-thin button-rounded button-normal"><div>{{btnText}}</div></button><div class="clearfix"></div></div><div class="game-play-count"><div>{{formatCount}}人在玩</div></div></div><div class="clearfix"></div><div class="game-acts inner-page" page="{{acturl}}"><ul>{{#acts}}<li><div class="bg {{class}}">{{name}}</div></li> {{/acts}}</ul></div></li>{{/games}}',A=function(e,a){
var i=$("#h5-ads"),o=[];if(e.length>0)if(config.isFullScreenAd){i=$("#h5-full-ads"),$.each(e,function(e,a){a.img=t.formatImage(a.img,480,192,"jpg")});var n={};$.each(e,function(e,a){n={key:e+1},o.push(n)});var s=Mustache.render(d,{ads:e,adsKey:o});i.append(s),TouchSlide({slideCell:"#focus",titCell:".hd ul",mainCell:".bd ul",effect:"leftLoop",delayTime:500,autoPlay:!0,autoPage:!0,switchLoad:"_src"})}else{$.each(e,function(e,a){a.img=t.formatImage(a.img,333,173,"jpg")});var s=Mustache.render(c,{ads:e,adsKey:o});i.append(s),new Swiper(".swiper-container",{initialSlide:1,autoplay:2e3,centeredSlides:!0,slidesPerView:"auto",loop:!0,loopedSlides:1})}else $("#h5-ads").hide()},I=function(e){if(0==e.length)return void $("#h5-single-banner").hide();var a="";e=e.slice(0,2),a+='<div class="banner-list">',$.each(e,function(e,i){i.img=t.formatImage(i.img,480,96,"jpg"),0==i.type&&(i.url=i.url),a+='<img src="'+i.img+'" class="banner-item" url="'+i.url,a+='" link_type="'+i.type+'">'}),a+="</div>",$("#h5-single-banner").html(a)},x=function(e,a,i,o){if(a.length>0){if($.each(a,function(e,a){a.logo=t.formatImage(a.logo,150,150,"jpg")}),a.length%2==1&&a.push({}),i)var n=$("#"+e).find(".h5c-album-list").eq(0);else var n=$("#"+e);n&&Q(n,a,o)}else $("#"+e).hide()},C=function(e){var a=$("#h5-my-games-list").find("ul").eq(0);if(a.empty(),e.length>0){if($.inArray(config.appId,["100064","101225"])==-1){var i=$("#h5-my-games-first").find("ul").eq(0);if(i.empty(),100198==config.appId)if(e.length<4){var o=e.splice(0,4);U(i,o)}else if(4==e.length)$("#h5-my-games .gap").show(),$("#h5-my-games-first").hide();else{$("#h5-my-games .gap").show();var o=e.splice(0,1);U(i,o)}else if(1==e.length){$("#h5-my-games .gap").show();var o=e.splice(0,1);U(i,o)}e.length>1?(B(a,e),a.width(120*e.length),$("#h5-my-games-first ul li.game-item-view:last").css("border-bottom","1px solid #e7e7e7")):($("#h5-my-games-list").hide(),$("#h5-my-games-first ul li.game-item-view:last").css("border","none"))}else{$.each(e,function(e,a){a.logo=t.formatImage(a.logo,150,150,"jpg"),a.url=a.url});var n=Mustache.render(p,{myGames:e});a.width(104*e.length),a.append(n)}new IScroll("#h5-my-games-list",{scrollX:!0,scrollY:!1,eventPassthrough:!0,preventDefault:!1})}else $("#h5-my-games").hide()},k=function(e,a){if(a.length>0){var i=$("#h5-recommend-games .h5c-recommend-games-list");i&&(100198!=config.appId?U(i,a):U(i,a,void 0,void 0,b))}else $("#"+e).hide()},E=function(e){e.length>0&&D(e[0]),$("#h5-more-games").before('<div class="h5c-box" id="h5-single-banner"></div>'),e.length>1&&D(e[1]),e.length>2&&D(e[2])},D=function(e){if(1==e.show_type){e.img=t.formatImage(e.img,440,197),$("#h5-more-games").before('<div class="h5c-box h5-bottom-album-list" id="h5-album-'+e.id+'"><div class="h5c-box-header"><div class="left-title"><div>'+e.title+'</div></div></div><div class="h5c-box-body album-img"><a href="'+e.image_link+'"><img src="'+e.img+'"/></a></div><div class="h5c-box-body"><ul class="game-summary-list"></ul></div></div>');var a=$("#h5-album-"+e.id).find("ul").eq(0),i='{{#games}}<li class="{{className}}" {{openLink}} {{needLogin}}><div class="game-logo"><img src="{{logo}}" alt=""></div><div class="game-name"><div>{{name}}</div></div><div class="game-play-count"><div>{{formatCount}}人</div></div><div class=""><button class="button button-border-thin button-rounded button-normal"><div>{{btnText}}</div></button></div></li>{{/games}}<div class="clearfix"></div>';B(a,e.games,void 0,i)}else if($("#h5-more-games").before('<div class="h5c-box h5-bottom-album-list" id="h5-album-'+e.id+'"><div class="h5c-box-header"><div class="left-title"><div>'+e.title+'</div></div></div><div class="h5c-box-body"><ul class="h5c-games-list"></ul></div></div>'),e.games.length>0){var a=$("#h5-album-"+e.id).find(".h5c-games-list").eq(0);a&&(100198!=config.appId?U(a,e.games.slice(0,10)):U(a,e.games.slice(0,10),void 0,void 0,b))}else $("#h5-album-"+e.id).hide()},M=function(e){var a=e.attr("id"),i=0;"tab-net-list"==a?i=1:"tab-mobile-list"==a?i=2:"tab-album-list"==a&&(i=3),TouchSlide({slideCell:"#leftTabBox",defaultIndex:i,startFun:function(e,a){var i=$(".tab-box .hd li").eq(e).data("myid");H(i),scrollTo(0,0);var o="#h5-index-tab|"+i;o!=t.localHomePage.currentPage.get()&&(t.localHomePage.lastPage.set("#h5-index"),t.localHomePage.currentPage.set(o))}});var o=$(window).height()-$(".h5c-header").outerHeight()-$(".tab-box .hd").height();e.height()<o&&$(".my-tab-list").css("height",o),s=!1},S=function(e){var a=e.attr("id");$(".tab-box .hd li[data-myid='"+a+"']").click().click()},P=function(e,a){var i="<li class='warning-info'><div>"+a+"</div></li>";e.append(i),s?M(e):S(e)},B=function(e,a,i,o){$.each(a,function(e,a){a.logo=t.formatImage(a.logo,150,150,"jpg"),a.btnText="打开",a.openLink="href="+a.url,a.className="inner-game",a.needLogin="",2==a.category_type&&(a.btnText="查看",a.className="inner-page",a.openLink="page=#h5-game-detail|"+a.id,"undefined"!=typeof i&&(a.needLogin="needlogin=true")),a.formatCount=R(a.play_count)}),"undefined"==typeof o&&(o=l),gameList=Mustache.render(o,{games:a}),e.append(gameList)},U=function(e,a,i,o,n){var r=Math.max(Math.round(a.length/2),3);r=Math.min(r,5),$.each(a,function(e,a){a.formatCount=R(a.play_count),a.formatStars=F(a.star),a.formatTags=N(a.tags),a.logo=t.formatImage(a.logo,150,150,"jpg"),a.rankCss="",a.btnText="打开",100124==config.appId?a.openLink="href=//d.hgame.com/hdpt/hupu/appid/"+config.appId+"/gameid/"+a.game_id:a.openLink="href="+a.url,a.className="inner-game",2==a.category_type&&(a.btnText="查看",a.className="inner-page",a.openLink="page=#h5-game-detail|"+a.id),e<=r-1&&(a.rankCss="game-rank game-rank-"+(e+1))});var d="";"undefined"!=typeof i&&3===i?d=Mustache.render(h,{games:a}):("undefined"==typeof n&&(n=g),d=Mustache.render(n,{games:a})),e.append(d),"undefined"!=typeof o&&o&&(s?(M(e),M(e)):S(e))},Q=function(e,a,i){var t=Mustache.render(r,{albums:a});e.append(t),"undefined"!=typeof i&&i&&(s?M(e):S(e))},L=function(e,a){var i=Mustache.render(u,{items:a});e.append(i)},T=function(e,a){var i=Mustache.render(f,{items:a});e.append(i)},O=function(e,a){$.each(a,function(e,a){a.images=t.formatImage(a.images,210,112,"jpg")});var i=Mustache.render(y,{shops:a});e.append(i)},j=function(e,a){$.each(a,function(e,a){a.game.logo=t.formatImage(a.game.logo,150,150,"jpg"),a.className="inner-task",a.openLink="href="+a.game.url,a.needLogin="needlogin = true",a.btnClass="",a.status==-1?(a.btnText="领取任务",a.openLink="taskid="+a.task_id):2==a.status?(a.btnText="马上玩",a.btnClass="button-border-blue",a.className="inner-game"):1==a.status?(a.btnText="已完成",a.className="",a.openLink="",a.btnClass="button-border-grey"):3==a.status&&(a.btnText="领取奖励",a.className="inner-reward",a.openLink="taskid="+a.task_id,a.btnClass="button-border-red"),a.specialTaskClass="",1==a.task_type&&(a.specialTaskClass="special-task-desc")});var i=Mustache.render(w,{tasks:a});e.append(i)},G=function(e){return e+="","00"==e.substring(e.lastIndexOf(".")+1,e.length)&&(e=e.substring(0,e.lastIndexOf("."))),0==e&&(e=1),e},R=function(e){return e<1e4?(0==e&&(e=1),e):e<1e6?G((e/1e4).toFixed(2))+"万":e<1e8?G(Math.round(e/1e4))+"万":G((e/1e8).toFixed(2))+"亿"},F=function(e){for(var a=[],i=0;i<e;i++)a.push("full");for(var t=0;t<5-e;t++)a.push("empty");return a},N=function(e){var a=[];if(void 0!=e&&e.length>0){var i=[0,1,2,3,4,5,6,7],t=Math.floor(Math.random()*i.length);$.each(e,function(e,i){a.push({i:(t+e)%8,tag:i})})}return a.slice(0,2)};Date.prototype.format=function(e){var a={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in a)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return e};var K=function(e,a){t.showModal(e,a)},Y=function(e){t.closeModal(e)},H=function(e,a){var i=$("#"+e);if(0!=i.length)if(0==$("#"+e+" li").length){var o=$("#"+e).attr("seq"),n={seq:o,appid:config.appId},s={};switch(e){case"tab-recommend-list":n.mode=0,t.ajaxServerData("home/getgamelist",n,function(e){0==e.code?(s=e.data,s.games.length?U(i,s.games,n.mode,!0):P(i,"没有游戏")):t.modalAlert({text:e.message})});break;case"tab-net-list":n.mode=1,t.ajaxServerData("home/getgamelist",n,function(e){0==e.code?(s=e.data,s.games.length?U(i,s.games,n.mode,!0):P(i,"没有游戏")):t.modalAlert({text:e.message})});break;case"tab-mobile-list":n.mode=3,t.ajaxServerData("home/getgamelist",n,function(e){0==e.code?(s=e.data,s.games.length?U(i,s.games,n.mode,!0):P(i,"没有游戏")):t.modalAlert({text:e.message})});break;case"tab-album-list":t.ajaxServerData("home/album",n,function(a){0==a.code?(s=a.data,s.albums.length?x(e,s.albums,!1,!0):P(i,"没有专辑")):t.modalAlert({text:a.message})})}}else"undefined"!=typeof a&&"changePage"==a&&S(i)},_=function(e){var a=$("#h5-index-album"),i=a.attr("seq");e!=a.attr("albumId")&&(i=0);var o={mode:2,seq:i,appid:config.appId,albumid:e};t.ajaxServerData("home/getgamelist",o,function(e){if(0==e.code){var i=e.data;a.find(".h5c-header-title").eq(0).text(i.albuminfo.title),a.attr("albumId",i.albuminfo.id),a.attr("seq",i.seq),$("#h5-album-info-bg").css("background-image","url("+t.formatImage(i.albuminfo.logo,200,200,"jpg")+")"),$("#h5-album-logo").css("background-image","url("+t.formatImage(i.albuminfo.logo,150,150,"jpg")+")"),$("#h5-album-summary").find("div").text(i.albuminfo.content);var o=a.find(".h5c-games-list").eq(0);o&&(o.empty(),U(o,i.games))}else t.modalAlert({text:e.message})},function(){},function(){a.show()})},J=function(){var e=$("#h5-index-recent"),a=e.attr("seq"),i={seq:a,appid:config.appId};t.ajaxServerData("home/recentgames",i,function(a){if(0==a.code){var i=a.data;e.attr("seq",i.seq);var o=e.find(".h5c-games-list").eq(0);o&&U(o,i.games)}else t.modalAlert({text:a.message})})},W=function(){if(100072==config.appId){var a=t.localUser.openId.get(),i=t.localKey.activeRedLabel.format([a]),o=t.Cookies.getItem(i);$("#h5-nav-tab .nav-tab-activity-red-point").hide(),o||t.Cookies.setItem(i,1,28800)}$("#limitActivity").length>0&&$("#limitActivity").hide();var n=t.localUser.isGuest.get();0==n?$("#h5-index-activity .show").show():$("#h5-index-activity .hide").show(),t.ajaxServerData("activity/home",{appid:config.appId},function(a){if(0==a.code){var i=a.data.issign,o=$(".user-sign button");if(0==i?(0==n&&o.text("签到"),e.exports.userDailySign()):(o.unbind(),o.text("已签到")),ce(a.data.notices),a.data.mobilegames.length>0){var s=$("#h5-index-activity .game-summary-list");s.empty(),B(s,a.data.mobilegames,!0),$("#h5-index-activity .activity-recommend-games").show()}else $("#h5-index-activity .activity-recommend-games").hide();if($.isEmptyObject(a.data.task))$(".daily-task-view").hide();else{var r=[];r.push(a.data.task);var d=$(".daily-task-view .h5c-box-body");d.empty(),j(d,r),$(".daily-task-view").show()}if(a.data.shops.length>0){var c=$(".shop-view .portion-shop-list");c.empty(),O(c,a.data.shops),$(".shop-view").show()}else $(".shop-view").hide()}else t.modalAlert({text:a.message})})},q=function(){t.ajaxServerData("activity/tasklist",{appid:config.appId},function(e){if(0==e.code){$taskList=e.data.tasks;var a=$("#h5-index-task-list .task-list");a.empty(),j(a,$taskList)}else t.modalAlert({text:e.message})})},z=function(a){var i={appid:config.appId,activityid:a};t.ajaxServerData("activity/detaillog",i,function(e){}),t.ajaxServerData("activity/detail",i,function(a){if(0==a.code){var i=a.data;if(""!=i.link_url){$("#activity-html-mode").hide();var o=$("#activity-frame-mode");o.css("height",$(window).height()-140+"px"),o.empty().append('<iframe src="'+i.link_url+'" height="100%" width="100%" style="border: 0"></iframe>'),$(".activity-button").addClass("fix"),o.show()}else $("#activity-frame-mode").hide(),$(".activity-button").removeClass("fix"),$("#h5-activity-logo img").attr("src",t.formatImage(i.logo,480,174,"jpg")),$("#h5-activity-description").empty(),$.each(i.description,function(e,a){$("#h5-activity-description").append('<li><div class="activity-title"><div>'+a.title+'</div></div><div class="activity-content"><div>'+a.content+"</div></div></li>")}),$("#activity-html-mode").show();$("#h5-activity-name").text(i.name),$("#h5-activity-button").attr("href",i.games.length>0?i.games[0].game_url:"#")}else e.exports.changePage("#h5-index"),t.modalAlert({text:a.message})})},V=function(){var e=$("#h5-index-mall"),a={appid:config.appId,type:1};e.find("li.warning-info").length>0&&t.ajaxServerData("items/getitemlist",a,function(e){if(0==e.code){var a=e.data,i=$("#h5-index-mall .h5-item-list");$.each(a.items,function(e,i){i.formatLogo=t.formatImage(i.logo,150,150,"jpg"),i.oos=0==i.quantity?"oos":"",i.oos_text=0==i.quantity?"(已领完)":"",0==i.price?i.formatPrice="免费":i.formatPrice=i.price+a.points_name}),a.items.length>0&&(i.empty(),L(i,a.items))}else t.modalAlert({text:e.message})})},X=function(){var e=$("#h5-index-mall-reward"),a={appid:config.appId,type:2};e.find("li.warning-info").length>0&&t.ajaxServerData("items/getitemlist",a,function(e){if(0==e.code){var a=e.data,i=$("#h5-index-mall-reward .h5-item-list");$.each(a.items,function(e,i){i.formatLogo=t.formatImage(i.logo,124,67,"jpg"),i.oos=0==i.quantity?"oos":"",i.oos_text=0==i.quantity?"(已领完)":"",0==i.price?i.formatPrice="免费":i.formatPrice=i.price+a.points_name}),a.items.length>0&&(i.empty(),L(i,a.items))}else t.modalAlert({text:e.message})})},Z=function(){var e=$("#h5-index-mall-record"),a=e.attr("seq"),i={seq:a};"home"===t.localHomePage.menuLevel.get()?$("#h5-index-mall-record .mall").attr("page","#h5-index-mall-home"):$("#h5-index-mall-record .mall").attr("page","#h5-index-mall"),e.find("li.warning-info").length>0&&t.ajaxServerData("items/mylist",i,function(a){if(0==a.code){var i=a.data,o=e.find(".h5c-order-list").eq(0);$.each(i.items,function(e,a){a.formatLogo=t.formatImage(a.logo,150,150,"jpg"),0==a.price?a.formatPrice="免费":a.formatPrice=a.price+i.points_name}),i.items.length>0&&(o.empty(),T(o,i.items))}else{if(Number(a.code)===-3)return void $("#user-login").click();t.modalAlert({text:a.message})}})},ee=function(a){var i={appid:config.appId,itemid:a};$(".item-btn").hide(),t.ajaxServerData("items/getiteminfo",i,function(a){if(0==a.code){var i=a.data.item,n=a.data.points_name;$("#h5-item-logo").attr("src",i.logo?t.formatImage(i.logo,150,150,"jpg"):o),$("#h5-item-name").html('<span class="game-name">'+i.game_name+'</span> <span class="gift-name">'+i.item_name+"</span>");var s="剩余：";if(0==i.quantity?(s+=i.quantity+"/"+i.quantity_total,s+=i.price?"&nbsp;&nbsp;价格："+i.price+n:"&nbsp;&nbsp;价格：免费",$("#item-btn-buy").addClass("disabled")):(s+="<span>"+i.quantity+"</span>/"+i.quantity_total,s+=i.price?'&nbsp;&nbsp;价格：<span id="item-price">'+i.price+n+"</span>":'&nbsp;&nbsp;价格：<span id="item-price">免费</span>',$("#item-btn-buy").removeClass("disabled")),$("#h5-item-num-price").empty().append(s),""==i.code)$("#item-code").text(""),$("#item-code-area .area").hide(),$("#item-btn-buy").attr("itemId",i.id).show();else{if($(".item-code-link").hide(),i.code.indexOf("http")>-1){var r='<a href="'+i.code+'">'+i.code+"</a>";t.browser().isHgameApp()&&(r="<div>"+i.code+"</div>",$(".item-code-link").unbind().click(function(){pe(i.code)})),$(".item-code-link").html(r),$(".item-code-link").show(),$(".item-code").hide(),$("#h5-copy-btn").hide()}else $("#item-code").text(i.code),1==i.type||5==i.type?$("#item-btn-open").attr("href",i.game_url).show():$("#item-btn-isbuy").show(),$(".item-code").show(),$("#h5-copy-btn").show();$("#item-code-area .area").show()}$("#item-description div").text(i.description),$("#item-usage div").text(i.usage)}else e.exports.changePage(t.localHomePage.lastPage.get().split(",").pop()),t.modalAlert({text:a.message})})},ae=function(a){var i={appid:config.appId,gameid:a};t.ajaxServerData("game/download",i,function(i){var o="";if(0==i.code?(i.data.is_first&&e.exports.showGetRewardTips(i.data.user_point,"3000"),o=i.data.download_url):i.code==-70?(e.exports.showMaxRewardTips("3000"),o=i.data.download_url):t.modalAlert({text:i.message}),""!==o)return void(t.browser().isWeixin()?window.location.href=config.siteDomain+"download/wxdownload/gameid/"+a+"/appid/"+config.appId+"/type/1":window.location.href=o)})},ie=function(a){var i={appid:config.appId,gameid:a};t.ajaxServerData("game/info",i,function(i){if(0==i.code){var o=i.data.game;o.formatCount=R(o.play_count),o.formatStars=F(o.star),o.formatTags=N(o.tags),o.logo=t.formatImage(o.logo,150,150,"jpg"),$.each(o.images,function(e,a){o.images[e]=t.formatImage(a,250,390,"jpg")}),""!=o.images&&""!=o.video?o.video=[{video:o.video,img:o.images.shift()}]:o.video="";var n=Mustache.render(v,{game:o});$("#h5-game-detail .h5c-box").html(n);var s=i.data.aroundGame,r=$("#h5-game-detail .game-similar-list ul");r&&B(r,s);var d=$("#gameImgsBox .bd li").width(),c=$(".game-detail-body").width();TouchSlide({slideCell:"#gameImgsBox",mainCell:".bd ul",slideW:d,availWidth:c}),$("#h5-game-detail .download-btn").on("click",function(){var e=Number(t.localUser.isGuest.get());0==e?ae(a):t.modalConfirm({text:"登录账号可获得金币奖励，点击取消可直接下载游戏",yCallback:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("frameMenuLogin",!1,!1,""),document.dispatchEvent(e)},yText:"登录",nCallback:function(){ae(a)},overlayCallback:function(){}})}),$("#h5-game-detail .tvp_overlay_play").on("click",function(){$(".game-video video").get(0).play()})}else e.exports.changePage(t.localHomePage.lastPage.get().split(",").pop()),t.modalAlert({text:i.message})})},te=function(){var e=config.siteDomain+"activity/football",a="limitActivity";if($("#limitActivity").length>0)$("#limitActivity").show();else{var i=document.createElement("iframe");i.id=a,i.name=a,i.src=e,i.style.width="100%",i.style.height="100%",i.style.border=0,$("#h5-limited-activity-iframe").append(i)}},oe=function(){config.tabActivity||$(".nav-tab[page=#h5-index-activity]").hide();var e=$("#h5-nav-header").outerHeight(),a=$("#h5-nav-tab").outerHeight();t.browser().isWeixin()||config.hideTopNav?($("#h5-nav-header").hide(),0==config.tabPosition?($(".h5c-nav").css({position:"fixed",top:0,left:0,right:0,"z-index":1e3,margin:"0 auto"}),$("#h5-nav-tab").removeClass("bottom-nav-tab").addClass("top-nav-tab"),a=$("#h5-nav-tab").outerHeight(),$(".lv1").css({"padding-top":a+"px"}),$("#leftTabBox .hd").css({top:a+"px"})):($(".h5c-nav").css({position:"fixed",bottom:0,left:0,right:0,"z-index":1e3,margin:"0 auto"}),$("#h5-nav-tab").removeClass("top-nav-tab").addClass("bottom-nav-tab"),a=$("#h5-nav-tab").outerHeight(),$("#leftTabBox .hd").css({top:"0"}),config.bottom_menu&&$(".lv1").css({"padding-bottom":a+"px"}))):(t.browser().isHgameApp()&&($(".h5c-header").css({"padding-top":"25px"}),e=$("#h5-nav-header").outerHeight(),$(".h5c-top-content").css({"padding-top":e+"px"}),$("#h5-order-list-wrapper").css({top:e+"px"})),0==config.tabPosition?($(".h5c-nav").css({position:"fixed",top:0,left:0,right:0,"z-index":1e3,margin:"0 auto"}),$("#h5-nav-tab").removeClass("bottom-nav-tab").addClass("top-nav-tab"),a=$("#h5-nav-tab").outerHeight(),$(".lv1").css({"padding-top":e+a+"px"}),$("#leftTabBox .hd").css({top:e+a+"px"})):($("#h5-nav-header").css({position:"fixed",top:0,left:0,right:0,"z-index":1e3,margin:"0 auto"}),$("#h5-nav-tab").css({position:"fixed",bottom:0,left:0,right:0,"z-index":1e3,margin:"0 auto"}),$("#h5-nav-tab").removeClass("top-nav-tab").addClass("bottom-nav-tab"),a=$("#h5-nav-tab").outerHeight(),$(".lv1").css({"padding-top":e+"px"}),config.bottom_menu&&$(".lv1").css({"padding-bottom":a+"px"}),$("#leftTabBox .hd").css({top:e+"px"})))},ne=function(e){e?($("#h5-shake-switch .switch-bg").removeClass("switch-bg-open").addClass("switch-bg-closed"),$("#h5-shake-switch .switch").removeClass("switch-open").addClass("switch-closed")):($("#h5-shake-switch .switch-bg").removeClass("switch-bg-closed").addClass("switch-bg-open"),$("#h5-shake-switch .switch").removeClass("switch-closed").addClass("switch-open")),$("#h5-shake-switch").show()},se=function(e){return $(".nav-tab").removeClass("active"),"#h5-index-mall-home"===e&&(e="#h5-index-activity"),"#h5-index-mall-record"===e&&"home"===t.localHomePage.menuLevel.get()&&(e="#h5-index-activity"),$(".nav-tab[page="+e+"]").length>0?($("#h5-nav-tab").show(),$(".nav-tab[page="+e+"]").addClass("active"),$("#h5-nav-header").css({"z-index":1002}),!0):($("#h5-nav-tab").hide(),$("#h5-nav-header").css({"z-index":1e3}),!1)},re=function(e,a,i,t){var o=-(i+1)*t+"px";return e.css({"transition-duration":"500ms",transform:"translate(0px, "+o+") translateZ(0px)"}),i==-1?(setTimeout(function(){o=-a*t+"px",e.css({"transition-duration":"0ms",transform:"translate(0px, "+o+") translateZ(0px)"})},"500"),i=a-1):i==a&&(setTimeout(function(){o=-t+"px",e.css({"transition-duration":"0ms",transform:"translate(0px, "+o+") translateZ(0px)"})},"500"),i=0),i},de=function(e){var a=e.length,i=0;$.each(e,function(e,a){a.className="inner-page",a.openLink="page=#h5-index-activity-detail|"+a.activity_id});var t=$("#h5-broadcast .broadcast-content");if(a>0){a>1&&(e.push(e[0]),e.unshift(e[a-1]));var o=Mustache.render(m,{activitys:e});t.append(o);var n=t.height();t.css({height:n}),a>1&&(i=re(t,a,i,n),setInterval(function(){i++,i=re(t,a,i,n)},"2000"))}else $("#h5-broadcast").hide()},ce=function(a){var i=a.length,t=0;$.each(a,function(e,a){a.className="",a.openLink="",a.text=a.user_name,3==a.type?a.text+=" 完成"+a.refname+"任务 获得"+a.increment+"金币":a.text+=" 兑换"+a.refname+" 消耗"+Math.abs(a.increment)+"金币"}),$("#user-broadcast-view .broadcast-content").remove(),$("#user-broadcast-view").append('<ul class="broadcast-content"></ul>');var o=$("#user-broadcast-view .broadcast-content");if(i>0){i>1&&(a.push(a[0]),a.unshift(a[i-1]));var n=Mustache.render(m,{activitys:a});o.append(n);var s=o.height();o.css({height:s}),i>1&&(t=re(o,i,t,s),e.exports.ad_interval=setInterval(function(){t++,t=re(o,i,t,s)},"2000"))}else $("#user-broadcast-view").hide()},le=function(){t.ajaxServerData("user/mygame",{appid:config.appId},function(e){C(e.data.games)})},ge=function(){t.ajaxServerData("user/getcredit",{},function(e){0==e.code?($(".user-point").text(e.data.points_name+": "+e.data.credit),$("#current-point").html(e.data.credit),$("#h5-index-activity .hide").hide(),$("#h5-index-activity .show").show(),$("#h5-mall-entry").show()):t.modalAlert({text:e.message})})},he=function(e){var a=t.Cookies.getItem(t.localKey.loadingPop);if(!a){var i=Math.floor(Math.random()*e.length+1)-1,o=e[i];o.img=t.formatImage(o.img,300,0,"jpg");var n="";n+='<div class="h5c-modal" id="loading-pop-window">',n+='<img src="'+o.img+'" class="banner-item" url="'+o.url,n+='" link_type="'+o.link_type+'">',n+='<div class="loading-close"></div>',n+="</div>",$("body").append(n),K("loading-pop-window",{overlay:.7}),t.Cookies.setItem(t.localKey.loadingPop,1,3600),$(".loading-close").unbind(),$(".loading-close").click(function(){Y("loading-pop-window")})}},pe=function(e){$("#index-frame")[0].setAttribute("src",e),$(".h5c-container").hide(),$("#index-frame-screen").show(),$(".hide-iframe").unbind().click(function(){$("#index-frame-screen").hide(),$(".h5c-container").show()})},me=function(){var e=t.getLocalData(t.localKey.isLoginBy58City);return 0!=e||(t.showModal("h5c-58-login-tips-modal"),$(".tips-58-close").unbind().bind("click",function(){t.closeModal("h5c-58-login-tips-modal")}),$(".tips-58-btn").unbind().bind("click",function(){WBAPP.goBack()}),!1)},ue=!1;e.exports={sdkInterface:!1,sdkParamsInit:function(e){this.sdkInterface=e,ue=e},pagePosition:{},appIds:[],firstMenu:["#h5-index","#h5-index-tab","#h5-index-activity","#h5-index-info"],secondMenu:["#h5-index-mall","#h5-index-mall-reward","#h5-index-mall-record","#h5-game-detail","#h5-index-task-list","#h5-index-recent","#h5-index-record","#h5-index-about","#h5-index-album"],thirdMenu:["#h5-index-item-detail"],ad_interval:"",init:function(e){this.params=e;var a=this,i=document.createEvent("CustomEvent");if(i.initCustomEvent("backButton",!1,!1,""),100036==config.appId){$(".h5c-header").addClass("app-maiwd-header");var o=t.getQueryString("next");null!=o&&t.localHomePage.nextUrl.set(o)}$("body").on({click:function(){var e=$(this).attr("needlogin");if("undefined"!=typeof e&&"0"!==t.localUser.isGuest.get())return void $("#user-login").trigger("click");a.pagePosition[t.localHomePage.currentPage.get()]={x:window.scrollX,y:window.scrollY};var i=$(this).attr("page");"http"==i.substr(0,4)||"https"==i.substr(0,5)?window.location.href=i:a.changePage(i)}},".inner-page"),$("body").on({click:function(){if(100020!=config.appId||"object"!=typeof WBAPP||me()){var e=$(this).attr("needlogin");if("undefined"!=typeof e&&"0"!==t.localUser.isGuest.get())return void $("#user-login").trigger("click");t.localHomePage.indexPagePosition.set(JSON.stringify({page:t.localHomePage.currentPage.get(),x:window.scrollX,y:window.scrollY})),1!==config.gameWindow?window.location.href=$(this).attr("href"):window.open($(this).attr("href"))}}},".inner-game"),$("body").on({click:function(){var e=$(this),i=$(this).attr("taskid"),o={taskid:i};t.ajaxServerData("user/getreward",o,function(i){0==i.code?(a.showGetRewardTips(i.data.user_point),e.removeClass("inner-reward"),e.removeClass("button-border-red").addClass("button-border-grey"),e.text("已完成")):i.code==-70?a.showNextGetRewardsTips():t.modalAlert({text:i.message})})}},".inner-reward"),$("body").on({click:function(){var e=$(this),a=e.attr("needlogin");if("undefined"!=typeof a&&"0"!==t.localUser.isGuest.get())return void $("#user-login").trigger("click");var i=$(this).attr("taskid"),o={taskid:i};t.ajaxServerData("user/receivetask",o,function(e){0==e.code?window.location.href=e.data.game_url:t.modalAlert({text:e.message})})}},".inner-task"),$("#h5-more-games").on("click",function(){}),$(".h5c-header-title").on("click",function(){scrollTo(0,0)}),$(".back-to-top").on("click",function(){scrollTo(0,0)}),$(".back-icon").on("click",function(){document.dispatchEvent(i)}),$("body").on({click:function(){if(100020!=config.appId||"object"!=typeof WBAPP||me())if(1==$(this).attr("link_type")){if(a.sdkInterface.goToUrl){eventData.sdkGoToUrl=$(this).attr("url");var e=document.createEvent("CustomEvent");return e.initCustomEvent("sdkGoToUrl",!1,!1,""),document.dispatchEvent(e),console.log("To Call GoToUrl")}window.open($(this).attr("url"))}else if(2==$(this).attr("link_type")){var i=$(this).attr("url");t.ajaxServerData("forward/banner",{id:i},function(e){0==e.code&&(window.location.href=e.data.link_url)})}else window.location.href=$(this).attr("url")}},".banner-item"),$("#user-nickname").on("click",function(){config.syncUser||(K("h5-nickname-dialog"),$("#h5-nickname-dialog-input").val($("#user-nickname div").text()),setTimeout(function(){$("#h5-nickname-dialog-input").focus()},300))}),$("#user-login").on("click",function(){if(100020!=config.appId||"object"!=typeof WBAPP||me()){var e="0"===t.localUser.isGuest.get();if(e)t.modalConfirm({text:"您确认要退出当前账号进行账号切换吗？",yCallback:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("frameMenuLogin",!1,!1,""),document.dispatchEvent(e)}});else{var a=document.createEvent("CustomEvent");a.initCustomEvent("frameMenuLogin",!1,!1,""),document.dispatchEvent(a)}}}),$("#h5-nickname-dialog-input").on("blur",function(){$("#h5-nickname-dialog-input").val()?$("#h5-nickname-dialog-ok").removeClass("disable"):$("#h5-nickname-dialog-ok").addClass("disable")}),$("#h5-nickname-dialog-cancel").on("click",function(){Y("h5-nickname-dialog")}),$("#h5-nickname-dialog-ok").on("click",function(){$("#h5-nickname-dialog-input").val()&&t.ajaxServerData("user/updateinfo",{nickname:$("#h5-nickname-dialog-input").val()},function(e){0==e.code&&($("#user-nickname div").text(e.data.nickname),$("#red-point").hide(),t.localUserAction.hasChangeNickname.set(1),Y("h5-nickname-dialog"))})}),$("#h5-copy-btn").on("click",function(){$("#h5-copy-code").text($("#item-code").text()),t.showModal("h5-copy-tip")}),$("#h5-copy-dialog-cancel").on("click",function(){t.closeModal("h5-copy-tip")}),$.inArray(config.appId,["100064","101225"])>=0&&($(".cmb-explanation").on("click",function(){"101225"==config.appId?window.location.href=config.siteDomain+"app/jsbank/explanation":window.location.href=config.siteDomain+"app/cmbchina/explanation"}),$(".cmb-order-list").on("click",function(){window.location.href=config.siteDomain+"app/cmbchina/orderinfo/appid/"+config.appId})),$("#item-btn-buy").on("click",function(){if(!$(this).hasClass("disabled")){if(100429==config.appId&&!t.browser().isBaiduBrowser())return void t.modalConfirm({text:"下载浏览器后进入游戏中心领取,么么哒",yText:'<a href="http://webapp.bdstatic.com/webapp/libs/download.html?from=1019019t" target="_blank">立即下载</a>',yCallback:function(){}});var e=$(this),i="兑换该礼包将扣除您"+$("#item-price").text()+"，是否兑换?";return void t.modalConfirm({text:i,yCallback:function(){var i=t.modalTip({text:"兑换中，请稍后..."}),o={itemid:e.attr("itemId"),quantity:1};t.ajaxServerData("items/buyitem",o,function(e){if(i.hide(),0==e.code){var o=e.data;if(o){if(o.code.indexOf("http")>-1){if(t.browser().isHgameApp()){var n="<div>"+o.code+"</div>";$(".item-code-link").html(n),$(".item-code-link").show().unbind().click(function(){pe(o.code)}),$(".item-code").hide(),$("#h5-copy-btn").hide(),$("#item-code-area .area").show(),$(".item-btn").hide(),pe(o.code)}else window.location.href=o.code;return}$("#item-code").text(o.code),$("#item-code-area .area").show(),$(".item-btn").hide(),2==o.item_type?$("#item-btn-isbuy").show():($("#item-btn-open").attr("href",o.game_url),$("#item-btn-open").show())}}else{if(Number(e.code)===-3)return void $("#user-login").click();t.modalAlert({text:e.message})}a.updateUserInfo()},function(){},function(){})}})}}),$("#h5-shake-switch .switch-bg").on("click",function(){var e=""==t.localUserAction.switchShake.get()||"0"==t.localUserAction.switchShake.get();t.localUserAction.switchShake.set(e?"1":"0");var a=document.createEvent("CustomEvent");a.initCustomEvent("shakeSwitch",!1,!1,""),document.dispatchEvent(a),ne(e)}),window.onscroll=function(){var e=$(window).height();$(document).scrollTop()>2*e?$(".back-to-top").css({top:e-132+"px"}).show():$(".back-to-top").hide()},window.addEventListener("resize",function(){var e=480;t.browser().isMobile()&&"device-width"==config.deviceWidth&&(e=$(window).width());var a=16*e/375+"px";document.body.style.fontSize=a,oe(),$(".h5c-modal").each(function(e,a){if("block"==$(this).css("display")){var i=$(this).attr("id");"string"==typeof i&&t.modifyModalCss("#"+i)}})},!1),100198!=config.appId&&100133!=config.appId||(window.onhashchange=function(){var i=location.hash;if(i){e=i.split("|");var o=t.localHomePage.currentPage.get();if(o==i)return;($.inArray(e[0],a.firstMenu)>-1||$.inArray(e[0],a.secondMenu)>-1||$.inArray(e[0],a.thirdMenu)>-1)&&a.changePage(i)}})},changePage:function(e){var a=e.split("|"),i=t.localHomePage.currentPage.get(),o=i.split("|"),n=t.localHomePage.lastPage.get(),s=n.split(",");switch(100198!=config.appId&&100133!=config.appId||(window.location.hash=e.substring(1)),e!=i&&($.inArray(a[0],this.firstMenu)>-1?t.localHomePage.lastPage.set("#h5-index"):$.inArray(a[0],this.secondMenu)>-1?$.inArray(o[0],this.firstMenu)>-1?t.localHomePage.lastPage.set(i):t.localHomePage.lastPage.set(s[0]):$.inArray(a[0],this.thirdMenu)>-1&&(""!=i&&s.push(i),t.localHomePage.lastPage.set(s.join(","))),t.localHomePage.currentPage.set(e)),$(".h5c-page").hide(),$(".back-to-top").hide(),a[0]){case"#h5-index-tab":var r=a[1]?a[1]:"tab-recommend-list";H(r,"changePage");break;case"#h5-index-album":_(a[1]);break;case"#h5-index-recent":J();break;case"#h5-index-activity":W(),clearInterval(this.ad_interval);break;case"#h5-index-activity-detail":z(a[1]);break;case"#h5-index-task-list":q();break;case"#h5-index-info":break;case"#h5-index-record":break;case"#h5-index-mall":t.localHomePage.menuLevel.set("sub"),V();break;case"#h5-index-mall-reward":X();break;case"#h5-index-mall-home":t.localHomePage.menuLevel.set("home"),V();break;case"#h5-index-mall-record":Z();break;case"#h5-index-item-detail":ee(a[1]);break;
case"#h5-game-detail":ie(a[1]);break;case"#h5-limited-activity":te()}if(this.sdkInterface.backToApp&&1e5!=config.appId||"#h5-index"!=a[0]?$("#h5-nav-header .back-icon").show():$("#h5-nav-header .back-icon").hide(),100072==config.appId&&"#h5-index"==a[0]&&$("#h5-nav-header .back-icon").show(),101318==config.appId&&"#h5-index"==a[0]&&$("#h5-nav-header .back-icon").show(),100036==config.appId&&t.localHomePage.nextUrl.get()&&$("#h5-nav-header .back-icon").show(),se(a[0]),"#h5-index-album"!=a[0]){var d=a[0];"#h5-index-mall-home"===a[0]&&(d="#h5-index-mall"),$(d).show()}var c=this.pagePosition[e];void 0!=c?scrollTo(c.x,c.y):scrollTo(0,0);var l=document.createEvent("CustomEvent");l.initCustomEvent("resize",!1,!1,""),window.dispatchEvent(l)},backPage:function(){var e=t.localHomePage.currentPage.get(),a=t.localHomePage.lastPage.get();""===a&&(a="#h5-index");var i=a.split(",");if("#h5-index-mall-home"===e||"#h5-index-mall-record"===e&&"home"===t.localHomePage.menuLevel.get())return void this.changePage("#h5-index");var o=e.split("|");"-1"==$(o[0]).attr("back")?this.changePage(i.pop()):this.changePage($(o[0]).attr("back"))},showCenter:function(e){var a=this;if(100198==config.appId&&($(".ios-micro-download").hide(),$(".personal-center-entrance").show()),100020!=config.appId&&config.tabActivity&&$("#h5-index-nav").show(),""!=e.pop_banner&&he(e.pop_banner),"undefined"!=typeof thirdApp&&"undefined"!=typeof thirdApp.generateBar?thirdApp.generateBar():config.bottom_menu&&a.generateBar(),100106==config.appId){var i="gg:"+t.localUser.openId.get(),o=t.getLocalData(i);""!=o&&$(".app-user-num").html(o).show()}le(),E(e.albums),A(e.banner,e.app_download_url),""!=e.single_banner?I(e.single_banner):$("#h5-single-banner").hide(),k("h5-recommend-games",e.games),config.isShowOnlineGame==-1&&($("#leftTabBox").find("li[data-myid=tab-net-list]").remove(),$("#tab-net-list").remove()),config.isShowMobileGame==-1&&($("#leftTabBox").find("li[data-myid=tab-mobile-list]").remove(),$("#tab-mobile-list").remove()),config.isShowGameAlbumList==-1&&($("#leftTabBox").find("li[data-myid=tab-album-list]").remove(),$("#tab-album-list").remove());var s=$("#leftTabBox .my-tab-list").length;3==s?$("#leftTabBox .hd ul").attr("class","three-elems"):2==s&&$("#leftTabBox .hd ul").attr("class","two-elems"),de(e.activitys),oe(),config.isShowGoods?config.isShowGifts||($(".h5c-mall-tabs").addClass("two-navs"),$("#shop-nav-page").attr("page","#h5-index-mall-reward"),$(".h5c-mall-tabs .mall-gifts").remove()):($(".h5c-mall-tabs").addClass("two-navs"),$("#shop-nav-page").attr("page","#h5-index-mall"),$(".h5c-mall-tabs .mall-goods").remove()),config.isShowActivityGuess&&$(".limited-time-activitys").show(),this.updateUserInfo(),1e5==config.appId&&t.browser().isAndroid()&&""!=config.appDownload&&($("#h5-download-client-entry a").attr("href",config.appDownload),$("#h5-download-client-entry").show()),this.sdkInterface&&100022==config.appId&&$("#h5-about-entry").show(),this.sdkInterface.setSwitch&&(ne("1"==t.localUserAction.switchShake.get()),$("#h5-shake-switch").show()),n.hide();var r=t.localHomePage.indexPagePosition.get();t.localHomePage.indexPagePosition.remove();var d=t.localHomePage.currentPage.get();$.inArray(config.appId,["100064","101225"])>=0&&(d="");var c=new RegExp(/album\/(\d+)/),l=window.location.href.match(c),g=new RegExp(/gift[\/=](\d+)/),h=window.location.href.match(g),p=new RegExp(/npage[\/=]([^\/&]*)(\/|&|$)/),m=window.location.href.match(p);if(l)this.changePage("#h5-index-album|"+l[1]),$(".h5c-header").hide(),$(".h5c-album-info-bg").css("padding-top","0");else if(h)this.changePage("#h5-index-item-detail|"+h[1]);else if(m)"activity"==m[1]?this.changePage("#h5-index-activity"):"info"==m[1]?this.changePage("#h5-index-info"):"index"==m[1]?this.changePage("#h5-index"):this.changePage("#h5-index");else if(100133==config.appId)this.changePage("#h5-index");else if(""!=r){var u=JSON.parse(r);this.pagePosition[u.page]={x:u.x,y:u.y},this.changePage(u.page)}else 100198==config.appId&&(d=t.localHomePage.lastPage.get()),this.changePage(""==d?"#h5-index":d.split(",").pop());var c=new RegExp(/loginmode\/(\d+)/),l=window.location.href.match(c);l&&1==l[1]&&$("#user-login").trigger("click")},closeLoginModal:function(){Y("h5-login-dialog")},updateUserInfo:function(){$("#user-nickname div").text(t.localUser.nickname.get()),(config.syncUser||1==t.localUserAction.hasChangeNickname.get())&&$("#red-point").hide();var e=t.localUser.avatar.get();if($("#user-avatar").css("background-image","url("+e+")"),100106==config.appId){var a="gg:"+t.localUser.openId.get(),i=t.getLocalData(a);""!=i?$(".app-user-num").html(i).show():$(".app-user-num").hide()}var o=!(0!=t.localUser.isGuest.get());o?(t.browser().isWeixin()&&!config.isWxMultLogin||(config.syncUser||ue.showLoginView)&&100022!=config.appId?$("#user-login").hide():($("#user-login button").text("切换"),$("#user-login button").removeClass("button-firebrick").addClass("button-grey")),"#h5-index-activity"==t.localHomePage.currentPage.get()&&W()):($("#user-login button").text("登录"),$("#user-login").show()),le(),(config.supportCredit||config.tabActivity)&&o&&ge()},generateBar:function(){var e="";if(e+='<div id="h5-nav-tab" class="bottom-nav-tab">',e+='<div class="nav-tab inner-page nav-tab-home" page="#h5-index">',e+='<div class="nav-tab-name nav-tab-bg-home"><span>首页</span></div>',e+="</div>",e+='<div class="nav-tab inner-page nav-tab-game" page="#h5-index-tab">',e+='<div class="nav-tab-name nav-tab-bg-game"><span>游戏</span></div>',e+="</div>",e+='<div class="nav-tab inner-page nav-tab-activity" page="#h5-index-activity">',e+='<div class="nav-tab-name nav-tab-bg-activity"><span>活动</span></div>',e+='<div class="tab-red nav-tab-activity-red-point"></div>',e+="</div>",e+='<div class="nav-tab inner-page nav-tab-self" page="#h5-index-info">',e+='<div class="nav-tab-name nav-tab-bg-self"><span>我的</span></div>',e+="</div>",e+="</div>",$(".h5c-nav").append(e),100072==config.appId){var a=t.localUser.openId.get(),i=t.localKey.activeRedLabel.format([a]),o=t.Cookies.getItem(i);o||$("#h5-nav-tab .nav-tab-activity-red-point").show()}},showGetRewardTips:function(e,a){var i='<div class="point-tips"><div>金币+'+e.change+"</div>";i+="<div>今日已领"+e.total_point+"金币</div><div>提示：每日金币上限"+_maxPointNum+"</div></div>";var o=t.modalTip({text:i,canCancel:!0});$("#current-point").html(e.point),"undefined"==typeof a&&(a="1000"),setTimeout(function(){o.hide()},a)},showMaxRewardTips:function(e){var a='<div class="point-tips"><div>您今天达到上限</div><div>提示：每日金币上限'+_maxPointNum+"</div></div>",i=t.modalTip({text:a,canCancel:!0});"undefined"==typeof e&&(e="1000"),setTimeout(function(){i.hide()},e)},showNextGetRewardsTips:function(){var e='<div class="point-tips"><div>您今天达到上限</div><div>提示：请明天再来领取</div></div>',a=t.modalTip({text:e,canCancel:!0});setTimeout(function(){a.hide()},"1000")},userDailySign:function(){var e=this,a=$(".user-sign button");a.unbind(),a.on("click",function(){0==t.localUser.isGuest.get()?t.ajaxServerData("user/dailysign",{},function(i){0==i.code?(e.showGetRewardTips(i.data.user_point),a.unbind(),a.text("已签到")):i.code==-70?(e.showMaxRewardTips(),a.unbind(),a.text("已签到")):t.modalAlert({text:i.message})}):$("#user-login").trigger("click")})}}},function(e,a,i){var t=i(1),o=i(5),n=i(7),s=i(3),r=i(6),d=i(4),c=i(2),l="1",g=function(e){var a=this;if(this.noFrame=e.noFrame,this.isGamePage="game"==e.page,this.pageType="home",this.appId=e.appId,c.isChannel(this.appId,c.channels.X265G)&&!t.browser().isMobile()&&window.top.location!=window.self.location&&(window.top.location=window.self.location),t.setLocalData("appid",this.appId),this.storageType=e.storageType,this.siteDomain=e.siteDomain,this.loginUrl=e.siteDomain+"home/login/appid/"+this.appId,this.payDomain=e.payDomain,this.browser=t.browser(),this.sdkInterface=!1,this.appPayTypes=!1,this.display=0,this.payWeixinError="1"==t.getQueryString("pe"),this.isGamePage){this.pageType="game",this.gameId=e.gameId,this.gameUrl=e.gameUrl,this.sdkWindow=e.noFrame?window.parent:window.frames["game-frame"],this.gameData=gameData;var i={100220:0,100263:0,100281:1}[this.gameId];"undefined"==typeof i&&(i=e.gameDisplay),s.gameInfo(JSON.stringify({gameId:this.gameId,gameUrl:this.gameUrl,gameDisplay:i,gameLogo:gameData.img_url,gameName:gameData.title})),this.display=i}t.browser().isWeixin()&&"object"==typeof shareData&&wx.ready(function(){a.setWeixinShareData(shareData)}),self==top&&"undefined"!=typeof _baseDomain&&(document.cookie="wrapurl=;expires=Thu, 01 Jan 1970 00:00:01 GMT; domain="+_baseDomain+";path=/"),setTimeout(function(){window.addEventListener("popstate",function(e){if("game"==a.pageType){var i={code:0,message:"",showMessage:"",data:{}};a.sendMessageHelper("wooolsdk:exitgame",i)}},!1)},400),s.pageConfig(JSON.stringify({overBackButton:!0,display:this.display,pageType:this.pageType})),this.from=t.getQueryString("from");var a=this;a.sdkInterface=s.checkInterface(),o.sdkParamsInit(a.sdkInterface),n.sdkParamsInit(a.sdkInterface),r.sdkParamsInit(a.sdkInterface),d.sdkParamsInit(a.sdkInterface),a.sdkInterface.createShortCut&&e.shortcut&&!t.browser().checkAgent("MicroClient",!0)&&confirm("是否创建桌面快捷方式")&&s.createShortCut(a.gameData.title,a.gameData.url,a.gameData.img_url),a.appPayTypes=s.checkPay(),document.addEventListener("appJsReady",function(e){a.sdkInterface=s.checkInterface(),a.appPayTypes=s.checkPay()}),document.addEventListener("backButton",function(i){if(console.log("backButton event start"),"home"==a.pageType){var r=t.localHomePage.currentPage.get();if("#h5-index"==r){if(c.isChannel(e.appId,c.channels.WIWIDE)){var l=t.localHomePage.nextUrl.get();return void(l&&(window.location.href=l))}if(c.isChannel(e.appId,c.channels.CMBCMS)&&"object"==typeof Fw)return void Fw.returnPage();a.sdkInterface&&a.sdkInterface.backToApp?s.backToApp():c.isChannel(e.appId,c.channels.QIUSHI)&&(document.referrer.indexOf("qiushibaike")>-1?window.history.back():window.location.href="http://www.qiushibaike.com/")}else n.backPage()}else if("game"==a.pageType){if(a.sdkInterface&&a.sdkInterface.getMicroClientInfo)return void("undefined"!=typeof e.showUserAppList&&e.showUserAppList&&0==t.localUser.isGuest.get()&&"none"===$("#h5-app-list-dialog").css("display")?d.showAppListView():t.modalConfirm({text:"是否确认退出游戏",yCallback:function(){s.backToApp()}}));var g=t.localGamePage.gameCurrentPage.get();if("#h5-game"==g){var h=t.browser().isMobile(),p=t.hiddenFlag("menu");if(h&&!p)o.menuOpPosition(),$("#game-menu").modal("toggle");else if($(".h5c-back-tip").length>0)console.log("退出游戏"),s.backToApp();else{var m=t.modalTip({text:"再按一次返回退出游戏",canCancel:!0});m.object.addClass("h5c-back-tip")}}else g.indexOf("#h5-game")>-1?o.changePage("#h5-game"):window.location.href=e.siteDomain+"home/index/appid/"+e.appId}else console.log("backButton: unkonw page."),window.location.href=e.siteDomain+"home/index/appid/"+e.appId}),document.addEventListener("online",function(e){}),document.addEventListener("offline",function(e){}),document.addEventListener("keyboard",function(e){}),document.addEventListener("setTicket",function(e){var i=t.parseJSON(eventData.setTicket);return i===!1?(alert("App用户登录票据数据错误！"),!1):void a.setTicket(i)}),document.addEventListener("loginCallback",function(e){var i=t.parseJSON(eventData.loginCallback);return i===!1?(console.log("App用户登录返回数据错误！"),!1):void a.afterLogin(i)}),document.addEventListener("shareCallback",function(e){var i=eventData.shareCallback.replace(/\"{.*}\"/g,function(e){return e.replace(/^\"(.*)\"$/,"$1")}),o=t.parseJSON(i);if(c.isChannel(a.appId,c.channels.X58)&&"number"==typeof o)switch(o){case 1:o={code:0,message:"success",showMessage:"分享成功",data:{type:"58"}};break;case 0:o={code:-2,message:"fail",showMessage:"分享失败",data:{type:"58"}};break;case 2:o={code:-1,message:"cancel",showMessage:"取消分享",data:{type:"58"}};break;case 4:o=!1,alert("请先安装客户端");break;default:alert("未知错误: "+o),o=!1}return o!==!1&&void a.afterShare(o)}),document.addEventListener("payCallback",function(e){var i=t.parseJSON(eventData.payCallback);return i!==!1&&void a.afterPay(i,a.currentOrderNum)}),document.addEventListener("openGameFromSc",function(e){}),document.addEventListener("frameShare",function(e){a.toShare(shareData)}),document.addEventListener("shortCut",function(e){var i={appid:a.appId,gameid:a.gameId};$.post(a.siteDomain+"report/shortcut",i,function(e){0!=e.code&&alert(e.message)},"json")}),document.addEventListener("frameShortCut",function(i){return c.isChannel(e.appId,c.channels.BAIDUBROWSER)?void(top.location.href="http://webapp.bdstatic.com/webapp/libs/download.html?from=1019019t"):void(a.sdkInterface&&a.sdkInterface.createShortCut?s.createShortCut(a.gameData.title,a.gameData.url,a.gameData.img_url):c.isGame(e.gameId,c.games.CQSJ)?a.addDesktop():a.downloadApp())}),document.addEventListener("microShare",function(e){a.sdkInterface&&a.sdkInterface.getMicroClientInfo&&"undefined"!=typeof eventData.type&&(shareData.type=eventData.type,s.showShareView(shareData))}),document.addEventListener("frameMenuLogin",function(e){"undefined"!=typeof eventData.from?a.gameLogin({},eventData.from):a.gameLogin()}),document.addEventListener("frameMenuSwitchApp",function(e){d.showAppListView()}),document.addEventListener("frameMenuUserInfo",function(e){a.showUserAccountInfo()}),document.addEventListener("menuRefresh",function(i){"undefined"!=typeof eventData.type&&a.sdkInterface&&a.sdkInterface.onClearMicroClientCache&&(0==t.localUser.isGuest.get()?(t.setLocalData(t.localKey.urlReferrer,self.location.href),window.location.href=e.siteDomain+"clear.html"):self.location.reload())}),document.addEventListener("menuXwalk",function(i){if(console.log("menuXwakl"),"undefined"!=typeof e.gameId&&a.sdkInterface){if(a.sdkInterface.getMicroClientInfo){var o=s.getMicroClientInfo();if(o=t.parseJSON(o),"webview"!==o.mc_core_type)return}if(a.sdkInterface.onUpdateMicroClient){var n={};n.appid=e.appId,n.gameid=e.gameId,"undefined"!=typeof o.mc_cpu&&(n.cpu=o.mc_cpu),t.ajaxServerData("version/xwalk",n,function(e){0==e.code&&""!=e.data.xwalk_link&&s.onUpdateMicroClient({url:e.data.xwalk_link})})}}}),document.addEventListener("frameLogin",function(e){s.showLoginView()}),document.addEventListener("sdkGoToUrl",function(e){s.goToUrl(eventData.sdkGoToUrl)}),document.addEventListener("shakeSwitch",function(e){s.setSwitch(JSON.stringify({shake:""==t.localUserAction.switchShake.get()||"0"==t.localUserAction.switchShake.get()}))}),document.addEventListener("shake",function(i){function o(){$inProcess||($inProcess=!0,t.ajaxServerData("game/randrecommend",{appid:e.appId},function(e){$inProcess=!1,window.location.href=e.data.url}))}$inProcess=!1,"game"==a.pageType||o()}),document.addEventListener("ssoLogin",function(a){var i=t.parseJSON(eventData.ssoLogin);return i===!1?void console.log("ssologin data is incorrect"):void(0==i.code&&(i.appid=e.appId,i.openid=t.localUser.openId.get(),i.gameid="undefined"!=typeof e.gameId?e.gameId:0,t.ajaxServerData("user/ssologin",i,function(a){return 0!==Number(a.code)?void t.modalAlert({text:a.message}):(t.setUserData(a.data.open_id,a.data.nickname,a.data.is_guest,a.data.avatar),void("undefined"!=typeof e.gameId?self.location.reload():n.updateUserInfo()))})))}),document.addEventListener("afterLoginNotifyGame",function(e){if("undefined"!=typeof eventData.notifyData&&"undefined"!=typeof eventData.notifyAction){var i=t.parseJSON(eventData.notifyData),o=t.parseJSON(eventData.notifyAction);a.sendMessageHelper(o.action,i)}}),document.addEventListener("showPopView",function(e){a.sendMessageHelper("showPopView",{})}),window.addEventListener("message",function(i){var o=t.parseUrl(e.siteDomain),n=!1;if(e.gameUrl){n=!0;var s=t.parseUrl(e.gameUrl);i.origin==s.fullname||console.log("invalid message:",i.origin,s.fullname)}(t.isHgameDomain(i.origin)||i.origin==o.fullname||n)&&a.messageHandler(i.data)},!1)};g.prototype={sendMessage:function(e,a,i){var i=arguments[2]?arguments[2]:"*";e.postMessage(a,i)},sendMessageHelper:function(e,a){var i={action:e,data:a};this.sendMessage(this.sdkWindow,i)},messageHandler:function(e){var a=this;switch(e.action){case"path":if(""!=e.data){var i=e.data.split("/");for(var r in i)this.sdkWindow=this.sdkWindow.window.frames[r]}break;case"share":if(!c.isChannel(this.appId,c.channels.JSBANK)){if(e.data.title&&(shareData.title=e.data.title),e.data.url){var l=e.data.url.split("?");2==l.length&&(shareData.url+=(shareData.url.indexOf("?")>-1?"&":"?")+l[1])}e.data.message&&(shareData.message=e.data.message),e.data.imgUrl&&(shareData.imgUrl=e.data.imgUrl),e.data.extend&&(shareData.extend=e.data.extend)}a.toShare(shareData);break;case"setShareData":var g={code:-2,message:"not support",data:{}};if(t.browser().isWeixin()){if(!c.isChannel(this.appId,c.channels.JSBANK)){if(e.data.title&&(shareData.title=e.data.title),e.data.url){var l=e.data.url.split("?");2==l.length&&(shareData.url+=(shareData.url.indexOf("?")>-1?"&":"?")+l[1])}e.data.message&&(shareData.message=e.data.message),e.data.imgUrl&&(shareData.imgUrl=e.data.imgUrl),e.data.extend&&(shareData.extend=e.data.extend)}a.setWeixinShareData(shareData),g.code=0,g.message="success"}a.sendMessage(a.sdkWindow,{action:"setShareData",data:g});break;case"order":this.gameOrderData=e.data,this.paySign(e.data.orderData,e.data.pay_name);break;case"pay":2==config.loginMode&&1==t.localUser.isGuest.get()?this.gameLogin():this.choosePay(e.data.payData,e.data.pay_name);break;case"pay_server":if(0==e.code)if("pay_apple"==e.pay_name||"alipay_sdk"==e.pay_name)s.showPayView(e.data);else{var h={code:0,message:"success",showMessage:"支付成功",data:{}};a.afterPay(h,a.currentOrderNum)}else{var p=void 0==e.showMessage?e.message:e.showMessage;alert("code: "+e.code+" | "+p)}o.finishPay();break;case"gameReport":this.gameReport(e.data);break;case"wxSubscribe":this.wxSubscribe(e.data);break;case"bindPhone":this.bindPhone(e.data);break;case"gameLogin":a.gameLogin(e.data);break;case"activityLogin":a.gameLogin({});break;case"activityBindPhone":d.showBindUserPhoneView();break;case"gameLogout":window.location.reload();break;case"thirdLogin":d.thirdLogin(e.data);break;case"loadingProgress":0==e.data.progress?o.loadingDefault=!1:o.loadingProgress(e.data.progress);break;case"downloadApp":a.downloadApp(e.data);break;case"userInfo":a.sentUserInfo();break;case"wooolsdk:bindMobile":break;case"wooolsdk:queryBindState":a.userBindPhoneStatus();break;case"wooolsdk:addDesktop":a.addDesktop();break;case"wooolsdk:queryDesktopState":a.queryDesktopState();break;case"close-safaritip":o.closeSafariDesktopTip(),window.location.hash="";break;case"saveSafariDesktop":a.safariDesktopModel(e.data.type);break;case"activityIframeMessage":a.showActivityIframeMessage(e.data);break;case"activityGetCoin":n.backPage(),n.changePage("#h5-index-task-list");break;case"backPop:inner":a.backPop(e.data);break;case"backPop:show":a.showBackPop(e.data);break;case"showimg":a.showImagePop(e.data);break;case"resizeFrame":console.log("resize frame....."),o.resizeGameFrame();break;case"startRecord":case"stopRecord":case"uploadVoice":case"playVoice":case"pauseVoice":case"stopVoice":a.callWxMethod(e.action,e.data);break;case"microinfo":a.getMicroDeviceInfo();break;default:console.log(e)}},showActivityIframeMessage:function(e){if("alert"==e.type){var a='<div class="h5c-modal" id="user-guess-alert-modal"><div><span>'+e.text+"</span><div></div>";$("#user-guess-alert-modal").length&&$("#user-guess-alert-modal").remove(),$("body").append(a);var i=7.8125;t.showModal("user-guess-alert-modal",{top:i}),setTimeout(function(){$("#h5-modal-overlay").fadeOut(200).remove(),$("#user-guess-alert-modal").css({display:"none"})},2e3)}else{var o='<div class="h5c-modal" id="user-guess-result-modal">'+e.text+"</div>";$("#user-guess-result-modal").length&&$("#user-guess-result-modal").remove(),$("body").append(o);var i=7.8125;t.showModal("user-guess-result-modal",{top:i})}},choosePay:function(e,a){if(t.browser().checkAgent("xwalk, null, null",!1))return void t.modalConfirm({text:"出错啦，请重启游戏微端后，再次支付！",yCallback:function(){s.backToApp()}});var i=[],n={game_url:window.location.href,pay_status:l};if(t.browser().isEXT_WIN()&&"undefined"!=typeof AppExt&&"undefined"!=typeof AppExt.openExtWindow&&(n.pay_extCallbackName=AppExt.getExtCallbackName()),e.extend=JSON.stringify(n),"pay_credit"==a)return void this.creditPay(e);if(c.isChannel(this.appId,c.channels.CMBLIFE))return void this.prePay(e,"pay_cmblife");if(c.isChannel(this.appId,c.channels.SHBANK))return void this.prePay(e,"pay_shbank");if(c.isChannel(this.appId,c.channels.GGBOOK)&&"undefined"!=typeof x5JavaScriptInterface&&t.isCurrAppBindUser())return void this.prePay(e,"pay_ggbook");if(c.isChannel(this.appId,c.channels.HUISUOPING))return void this.prePay(e,"pay_huisuoping");if(c.isChannel(this.appId,c.channels.MCM)&&t.getLocalData("fzfUserId"))return e.extend=JSON.stringify({game_url:window.location.href,FzfUserId:t.getLocalData("fzfUserId")}),void this.prePay(e,"pay_fuzhifu");if(c.isChannel(this.appId,c.channels.JSBANK))return i.push("pay_weixin_qr"),i.push("pay_jsbank"),void o.showPayChoose(e,this.prePay,i);if(c.isChannel(this.appId,c.channels.HISMARTTV)){i.push("pay_hismarttv");var r={his_openid:window.localStorage.getItem("his_openid"),his_accessToken:window.localStorage.getItem("his_accessToken"),his_refreshToken:window.localStorage.getItem("his_refreshToken"),his_callbackurl:window.localStorage.getItem("his_callbackurl")};return e.extend=JSON.stringify(r),void this.prePay(e,"pay_hismarttv")}if(c.isChannel(this.appId,c.channels.CMBCMS)){var r={mstoken:window.localStorage.getItem("mstoken"),msGameUrl:window.localStorage.getItem("msGameUrl")};return e.extend=JSON.stringify(r),void this.prePay(e,"pay_cmbc")}if(c.isChannel(this.appId,c.channels.AIBEI))return void this.prePay(e,"pay_aibei");var d=this;if(!d.browser.isMobile()&&!d.browser.checkAgent("Strong Webview Agent",!1))return t.browser().isWeixin()?void d.prePay(e,"pay_weixin_qr"):(i.push("alipay_web"),i.push("pay_weixin_qr"),i.push("shengpay_card"),void o.showPayChoose(e,this.prePay,i));if(d.browser.isWeixin()&&!config.noFrame){if(d.payWeixinError)return i.push("pay_weixin_qr"),o.showPayChoose(e,this.prePay,i),!0;c.isChannel(config.appId,c.channels.LLYUN)?i.push("pay_liuliangyun"):("1"==t.getQueryString("qr")?i.push("pay_weixin_qr"):i.push("pay_weixin"),e.weixin_open_id=config.wxopenid)}else{if(this.appPayTypes===!1)return o.showPayChoose(e,this.prePay),!0;var g=!1;if(g&&this.appPayTypes.pay_app)i.push("pay_app");else{if(d.browser.isHgameApp()||!d.browser.isIos()){var h=["alipay_sdk","pay_weixin_sdk"];for(var p in h)this.appPayTypes[h[p]]&&i.push(h[p]);return o.showPayChoose(e,this.prePay,i),!0}this.appPayTypes.pay_apple?i.push("pay_apple"):alert("此应用暂不支持支付功能")}}0==i.length?alert("未找到适用的支付方式"):this.prePay(e,i[0])},paySign:function(e,a){var i={orderData:e,payName:a};this.sendMessageHelper("paySign",i)},prePay:function(e,a){var i=o.showPayScan("支付环境扫描中");e.pay_name=a,$.ajax({type:"post",url:config.payDomain+"preparepay",dataType:"jsonp",data:e,jsonp:"callback",jsonpCallback:"prepayCallback",success:function(e){},error:function(){i.hide(),setTimeout(function(){window.prepayCallback=frame.prepayCallback},100),alert("获取订单信息失败")}})},checkOrder:function(e,a){var i=o.showPayScan("支付信息检查中"),t=this;e=e?e:t.currentOrderNum,a=a?a:t.currentPayName,$.ajax({type:"post",url:config.payDomain+"checkorder",dataType:"jsonp",data:{order_no:e},jsonp:"callback",jsonpCallback:"checkOrderCallback",success:function(e){if(0==e.code){var i=JSON.parse(e.data);if(i&&i.order_status){var n={code:0,message:"success",showMessage:"支付成功",data:{}};t.afterPay(n,t.currentOrderNum)}else if(t.gameOrderData)t.paySign(t.gameOrderData.orderData,t.gameOrderData.pay_name);else switch(a){case"ipaynow_weixin":o.showPayError("未检测到支付信息","请在页面关闭后重新下单");var n={code:-1,message:"no pay info",showMessage:"没有检测到支付信息",data:{}};t.afterPay(n,t.currentOrderNum);break;case"pay_weixin_qr":var n={code:-1,message:"user close qrcode",showMessage:"用户关闭支付二维码",data:{}};t.afterPay(n,t.currentOrderNum);break;default:var n={code:-1,message:"cancle",showMessage:"支付取消",data:{}};t.afterPay(n,t.currentOrderNum)}}else alert(e.message)},error:function(){alert("支付检测失败")},complete:function(){i.hide()}})},prepayCallback:function(e){var a=this;if(0==e.code)switch(a.currentOrderNum=e.order_no,a.currentPayName=e.pay_name,e.pay_name){case"alipay_wap":t.browser().isUcBrowser()&&o.hidePayScan(),t.browser().isEXT_WIN()&&"undefined"!=typeof AppExt&&"undefined"!=typeof AppExt.openExtWindow?(o.hidePayScan(),AppExt.openExtWindow(e.data)):(o.showPayPage(e.data),$(".h5center-footer-close").css({left:"initial",right:85*$baseFont+"em","padding-top":16*$baseFont+"em"}));break;case"alipay_web":o.hidePayScan(),o.showWebPayConfirm(e.data,e.pay_name);break;case"alipay_sdk":case"pay_weixin_sdk":o.hidePayScan(),s.showPayView(e.data,e.pay_name);break;case"pay_weixin_qr":o.showPayQrcode(e,e.pay_name);break;case"shengpay_card":t.browser().isUcBrowser()&&o.hidePayScan(),o.showPayPage(e.data),$(".h5center-footer-close").css({left:"initial",right:85*$baseFont+"em","padding-top":16*$baseFont+"em"});break;case"ipaynow_dot":case"ipaynow_recharge":case"pay_cmblife":case"pay_shbank":o.hidePayScan(),window.location.href=e.data;break;case"pay_ggbook":o.hidePayScan();var i=JSON.parse(e.data);if("NO_ENOUGH"==i.error.errorCode)"undefined"!=typeof x5JavaScriptInterface.startRechargeActivityWithFigure?x5JavaScriptInterface.startRechargeActivityWithFigure(i.amount):x5JavaScriptInterface.startRechargeActivity();else if("SUCCESS"==i.error.errorCode){var n={code:0,message:"",showMessage:"支付成功",data:{}};a.afterPay(n,e.order_no)}break;case"pay_jsbank":o.hidePayScan();var r=JSON.parse(e.data);if("0000"==r.error.retCode){var n={code:0,message:"",showMessage:"支付成功",data:{}};a.afterPay(n,e.orderId)}else alert(r.error.retShow);break;case"pay_huisuoping":o.hidePayScan(),window.location.href=e.data;case"ipaynow_unionpay":a.browser.isMobile()||a.browser.checkAgent("Strong Webview Agent",!1)?(o.showPayPage(e.data),$(".h5center-footer-close").css({top:10*$baseFont+"em",left:20*$baseFont+"em",rigth:"initial","padding-top":6*$baseFont+"em","border-radius":"0.2em"})):(o.hidePayScan(),o.showWebPayConfirm(e.data,e.pay_name));break;case"ipaynow_weixin":o.hidePayScan(),o.showPayConfirm(e.order_no,"ipaynow_weixin"),$("#h5-pay-click-a").attr("href",e.data);try{window.location.href=e.data}catch(d){window.location.href=e.data}break;case"ipaynowwx_iosapp":o.hidePayScan();try{t.browser().isEXT_WIN()&&"undefined"!=typeof AppExt&&"undefined"!=typeof AppExt.openExtWindow&&AppExt.openExtWindow(e.data)}catch(d){window.location.href=e.data}break;case"ipaynow_weixin_mp":o.hidePayScan();var c=e.data;if("string"==typeof e.data){var g=JSON.parse(c);WeixinJSBridge.invoke("getBrandWCPayRequest",g,function(e){if("get_brand_wcpay_request：ok"==e.err_msg){var i={code:0,message:e.errMsg,showMessage:"支付成功",data:{}};a.afterPay(i,g.order_no)}if("get_brand_wcpay_request：cancel"==e.err_msg){var i={code:-1,message:"cancle",showMessage:"支付取消",data:{}};a.afterPay(i,g.order_no)}})}else alert("支付服务器参数返回错误！");break;case"pay_weixin":o.hidePayScan();var c=e.data;"string"==typeof e.data&&(c=JSON.parse(c)),c?(c.success=function(i){console.log(i);var t={code:0,message:i.errMsg,showMessage:"支付成功",data:{}};a.afterPay(t,e.order_no)},c.cancel=function(i){console.log(i);var t={code:-1,message:i.errMsg,showMessage:"取消支付",data:{}};a.afterPay(t,e.order_no)},c.fail=function(i){console.log(i);var t={code:-2,message:i.errMsg,showMessage:"支付发生错误",data:{}};a.afterPay(t,e.order_no),a.payWeixinError=!0,o.showPayError("微信支付失败","请在页面关闭后重新下单<br>并选择其他支付方式")},wx.chooseWXPay(c)):alert("支付服务器参数返回错误！");break;case"pay_liuliangyun":window.location.href=e.data;break;case"pay_apple":o.hidePayScan();var c=e.data;"string"==typeof e.data&&(c=JSON.parse(c)),c?(c.open_id=t.localUser.openId.get(),o.showProductList(c)):alert("支付服务器参数返回错误！");break;case"pay_balance":o.hidePayScan();var e={code:0,message:"success",showMessage:"支付成功",data:{}};this.afterPay(e,a.currentOrderNum);break;case"pay_app":o.hidePayScan(),s.showPayView(e.data,e.pay_name);break;case"pay_fuzhifu":var h=JSON.parse(e.data);if(h){$(".h5center-footer-close").css({left:"initial",right:45*$baseFont+"em","padding-top":24*$baseFont+"em",color:"#000000"});var p=document.createElement("form");p.action=h.PayUrl,p.method="POST",p.target="paymentFrame";var m=document.createElement("input");m.type="hidden",m.name="ContractorID",m.value=h.ContractorID,document.body.appendChild(p),p.appendChild(m);var u=document.createElement("input");u.type="hidden",u.name="ContentJsonData",u.value=h.ContentJsonData,document.body.appendChild(p),p.appendChild(u),p.submit(),$("#paymentFrame")[0].onload=function(){o.hidePayScan(),o.changePage("#h5-game-pay")},a.noFrame||$("#paymentFrame")[0].height($(window).height())}else alert("支付服务器参数返回错误！");break;case"shengpay_wx":if(""==e.data){l="0",o.hidePayScan(),o.showPayError("未检测到支付信息","请在页面关闭后重新下单");var e={code:-2,message:"no pay info",showMessage:"没有检测到支付信息",data:{}};a.afterPay(e,a.currentOrderNum);break}if("0"==l){t.browser().isUcBrowser()&&o.hidePayScan(),top.location.href=e.data;break}o.hidePayScan(),o.showPayConfirm(e.order_no,"shengpay_wx"),$("#h5-pay-click-a").attr("href",e.data);try{window.location.href=e.data}catch(d){window.location.href=e.data}break;case"pay_baidushipin":o.hidePayScan();var g=JSON.parse(e.data);xiaodu_video&&xiaodu_video.pay(g);break;case"swiftpass_weixin":o.hidePayScan(),o.showPayConfirm(e.order_no,"pay_swiftpass"),$("#h5-pay-click-a").attr("href",e.data);try{window.location.href=e.data}catch(d){window.location.href=e.data}break;case"pay_hismarttv":o.hidePayScan(),$("#h5-pay-click-a").attr("href",e.data);try{window.location.href=e.data}catch(d){window.location.href=e.data}break;case"swiftpass_tenpay":o.hidePayScan(),$("#h5-pay-click-a").attr("href",e.data);try{window.location.href=e.data}catch(d){window.location.href=e.data}break;case"pay_cmbc":o.hidePayScan();var f={_isThirdLogin:"hgame",params:e.data};Fw.goPay(f);break;case"pay_aibei":o.hidePayScan(),iframePay.open(e.data,function(){console.log("pay_cancel")});break;default:console.log("返回的支付方式不支持")}else a.afterPay({code:-2,message:e.message,showMessage:"支付出现错误,请重新下单",data:{}}),t.modalAlert({text:e.message}),console.log(e.code+": "+e.message)},creditPay:function(e){var a=this;if(!config.supportCredit)return void t.modalAlert({text:"当前渠道不支持积分购买"});var i=0==t.localUser.isGuest.get();if(!i)return void a.gameLogin();var o=function(){t.ajaxServerData("items/creditpay",e,function(i){if(0!=i.code)return void t.modalAlert({text:i.message});var i={code:0,message:"success",showMessage:"支付成功",data:{game_orderno:e.game_orderno}};console.log(i),a.afterPay(i)})};t.ajaxServerData("items/creditprepay",{price:e.total_fee},function(e){return 0!=e.code?void t.modalAlert({text:e.message}):void t.modalConfirm({title:"当前积分："+e.data.credit+e.data.points_name,text:"购买该道具需要扣除"+e.data.credit_price+e.data.points_name+"，是否要购买？",yCallback:o})})},toPay:function(){},afterPay:function(e,a){e.code=parseInt(e.code),0==e.code?(this.payReport(e.data),void 0==e.message&&(e.message="success"),void 0==e.showMessage&&(e.showMessage="支付成功"),t.localUserAction.hasPay.set(1)):e.code==-1&&(void 0==e.message&&(e.message="cancel"),void 0==e.showMessage&&(e.showMessage="取消支付"));var i={action:"pay",data:e};if(this.sendMessage(this.sdkWindow,i),a){var o={status:e.code,message:e.message,orderNum:a,agent:navigator.userAgent};$.ajax({type:"post",url:config.payDomain+"orderreport",dataType:"jsonp",data:o,jsonp:"callback",jsonpCallback:"orderReportCallback",success:function(e){},error:function(){console.log("orderReport错误")}})}},orderReportCallback:function(e){console.log(e)},toShare:function(e){var a=this;if(!a.sdkInterface.showShareView||s.showShareView(e)===!1)if(t.browser().isWeixin()){var i=e&&e.extend&&e.extend.wxTips;o.showWeixinShareTip(i),a.setWeixinShareData(e)}else c.channel.share(a.appId,e)||o.showSharePage()},afterShare:function(e){o.finishShare(),e.code=parseInt(e.code),0==e.code?(this.shareReport(e.data),void 0==e.message&&(e.message="success"),
void 0==e.showMessage&&(e.showMessage="分享成功")):e.code==-1&&(void 0==e.message&&(e.message="cancel"),void 0==e.showMessage&&(e.showMessage="取消分享"));var a={action:"share",data:e};this.sendMessage(this.sdkWindow,a)},afterLogin:function(e){console.log("loginCallback:",e),0==e.code?s.getTicket():e.code==-1?"undefined"!=typeof e.data._from&&"h5app"==e.data._from&&(window.location.href=config.siteDomain+"home/index/appid/"+config.appId):(t.modalAlert({text:e.message}),console.log(e.code+": "+e.message))},setTicket:function(e){var a=["app_key","timestamp","app_user_id","ticket","user_type","nonce","signature"],i=location.search.replace("?","");if(""!=i){var o=i.split("&");$.each(o,function(i,t){var o=t.split("=");a.indexOf(o[0])>-1&&(e[o[0]]=void 0==e[o[0]]?void 0==o[1]?"":o[1]:e[o[0]])})}e?this.hGameLogin(e,t.localUser.openId.get()):alert("登录参数错误")},wxSubscribe:function(e){var a=this,i=window.location.search.match(/from=(\w+)/);if(null!=i&&i.length>1&&"gzh"===i[1]){var o={action:"wxSubscribe",data:{code:0,message:"success",showMessage:'关注成功"',data:{open_id:e.open_id}}};return void a.sendMessage(a.sdkWindow,o)}return t.localUser.openId.get()?t.localUser.openId.get()!=e.open_id?void alert("查询用户和当前登录用户不一致"):void $.ajax({type:"post",url:a.siteDomain+"user/wxSubscribe",data:e,dataType:"json",success:function(i){var t={action:"wxSubscribe",data:{}};if(0==i.code)if(i.data.subscribe)t.data={code:0,message:"success",showMessage:'关注成功"',data:{open_id:e.open_id}},a.sendMessage(a.sdkWindow,t);else if(void 0===e.autoRedirect||e.autoRedirect){var o="//f11.hdurl.me/p/17/04/27/p3_31388af42f08707c9f8c18376ffef7be.jpg";c.isGame(config.gameId,c.games.YLCQ)?o="//f11.hdurl.me/p/17/05/12/p3_0f5f01f2d64a6dd03e2d65be5c1e123b.jpg":c.isGame(config.gameId,c.games.YTXD)&&(o="//f11.hdurl.me/p/17/11/25/p3_c7dee644241ce73b4f94fb1e825da5d5.jpg"),a.showImagePop({imgurl:o})}else t.data={code:-1,message:"not subscribe",showMessage:'尚未关注"',data:{open_id:e.open_id}},a.sendMessage(a.sdkWindow,t);else t.data={code:0,message:"success",showMessage:'关注成功"',data:{open_id:e.open_id}},a.sendMessage(a.sdkWindow,t)},error:function(){alert("连接服务器出错,请稍后再试")}}):void console.log("尚未登录")},bindPhone:function(e){var a=this;if(!t.localUser.openId.get())return void console.log("尚未登录");if(t.localUser.openId.get()!=e.open_id)return void alert("查询用户和当前登录用户不一致");var i={action:"bindPhone",data:{code:-1,message:"not bindPhone",showMessage:"尚未绑定",data:{open_id:e.open_id}}};e.autoRedirect===!0?$.ajax({type:"post",url:a.siteDomain+"public/Oidbindlink/openid/"+e.open_id+"/gamekey/"+e.game_key,dataType:"json",success:function(e){0===e.code?(i.data.code=-1,i.data.data.bindurl=e.data.bindurl):e.code===-1&&e.data.user?(i.data.code=0,i.data.message="success",i.data.showMessage="绑定成功",i.data.data.bindflag=1):i.data.message=e.message,a.sendMessage(a.sdkWindow,i)},error:function(e){a.sendMessage(a.sdkWindow,i)}}):$.ajax({type:"post",url:a.siteDomain+"public/querybind/openid/"+e.open_id,dataType:"json",success:function(i){var t={action:"bindPhone",data:{code:-1,message:"not bindPhone",showMessage:"尚未绑定",data:{open_id:e.open_id}}};0==i.code&&i.data.isbind&&(t.data.code=0,t.data.message="success",t.data.showMessage="绑定成功",t.data.data.bindflag=1),a.sendMessage(a.sdkWindow,t)},error:function(){alert("连接服务器出错,请稍后再试")}})},gameReport:function(e){var a=this;e.baseData.open_id=t.localUser.openId.get(),$.ajax({type:"post",url:a.siteDomain+"gameReport/data",data:e,dataType:"json",success:function(e){var i={action:"gameReport",data:{}};0==e.code?i.data={code:0,message:"success",showMessage:"上报数据成功",data:{}}:i.data={code:-2,message:"fail:"+e.message,showMessage:"上报数据失败",data:{}},a.sendMessage(a.sdkWindow,i)},error:function(){console.log("连接游戏服务器出错")}})},shareReport:function(e){var a=this;"string"==typeof e&&(e={}),e.open_id=t.localUser.openId.get(),e.game_id=a.gameId?a.gameId:0,$.ajax({type:"post",url:a.siteDomain+"gameReport/share",data:e,dataType:"json",success:function(e){0!=e.code&&console.log(e.message)},error:function(){console.log("连接游戏服务器出错")}})},payReport:function(e){t.ajaxServerData("gameReport/pay",{gameid:config.gameId},function(e){})},hGameLogin:function(e,a){var i=this;e.access_token=a,void 0!=i.gameId&&(e.game_id=i.gameId),void 0==config.wxopenid||config.useSelfLogin||config.isWxMultLogin||(//!config.useSelfLogin 不产生微信openid相关的游客账号
e.wxopenid=config.wxopenid),e.nickname=t.localUser.nickname.get();var o=window.location.pathname.match(/\/pt\/(\d+)/);null!=o&&o.length>1&&(e.pt=o[1]),"object"==typeof AppExt&&"undefined"!=typeof AppExt.getDeviceInfo&&(deviceInfo=AppExt.getDeviceInfo(),t.browser().isIos()?e.deviceinfo=decodeURIComponent(deviceInfo):e.deviceinfo=deviceInfo),$.ajax({type:"post",url:i.loginUrl,data:e,dataType:"json",success:function(e){if(0==e.code){if(t.browser().isHgameApp()&&t.browser().isIos()&&"undefined"!=typeof e.data.refreshUrl)return void(self.location.href=e.data.refreshUrl);var a=t.getUserData();if(a.open_id==e.data.access_token&&a.nickname!=e.data.nickname)return t.setLocalData(t.localKey.urlReferrer,self.location.href),void(self.location.href=config.siteDomain+"clear.html");t.setUserData(e.data.access_token,e.data.nickname,e.data.is_guest,e.data.avatar),void 0==i.gameId?i.gameId=0:("undefined"!=typeof $shouldGetThirdUser&&$shouldGetThirdUser&&hdJsConn.getThirdUser(),shareData.url.indexOf("uid")==-1&&"undefined"!=typeof e.data.uid&&(shareData.url+="&uid="+e.data.uid));var n,s,r={appid:config.appId,gameid:i.gameId},d=window.location.href,c=d.substring(d.indexOf("?")+1,d.length).split("&");for(n=0;s=c[n];n++)r[s.substring(0,s.indexOf("=")).toLowerCase()]=s.substring(s.indexOf("=")+1,s.length);var l=window.location.pathname.match(/\/review\/(\d+)/);null!=l&&l.length>1&&(r.review=l[1]),null!=o&&o.length>1&&(r.pt=o[1]),t.ajaxServerData("home/data",r,function(e){i.afterGameLogin(e)})}else alert(e.message)},error:function(){alert("认证出现错误")}})},afterGameLogin:function(e){if(0!=e.code)return void t.modalAlert({text:e.message});if("undefined"!=typeof e.data.redirect_url)return void(window.location.href=e.data.redirect_url);var a=this;if(void 0==a.gameId&&(a.gameId=0),config.isBindPhone=e.data.isBindPhone,config.isPhoneUser=e.data.isPhoneUser,0==a.gameId)n.showCenter(e.data.view);else{var i=t.localUser.isGuest.get();if(0!=i||t.browser().isMobile()||t.isShowWooolWxQrCode(),0==i&&config.showUserAppList){var s=t.localUser.openId.get(),r=t.localKey.userChooseApp.format([s]),c=t.getLocalData(r).split(",");if(c.indexOf(config.gameId)==-1)return void d.showAppListView()}config.gameUrl=e.data.url,o.showLoading(e.data.url)}},enterIndex:function(){return c.isChannel(config.appId,c.channels.TIANYI)&&t.browser().isAndroid()&&!t.browser().compareAndroidVer(4)?void t.modalAlert({text:"游戏暂不支持安卓4.0以下操作系统！"}):(t.browser().isHgameApp()&&(config.hideTopNav=0),void(this.sdkInterface.getTicket&&s.getTicket()!==!1||this.setTicket({})))},enterGame:function(){var e=this;if(t.browser().isWeixin()){var a=t.localUserAction.hasPay.get();2==config.isWxNaLogin&&a&&(t.localUserAction.hasPay.set(0),this.forceWeixinAuth())}var i=!1;if($isMobile=e.browser.isMobile(),""==this.gameUrl)i=!0;else if("undefined"!=typeof config.nickname){var n=t.localUser.nickname.get();if(""!=n&&""!=config.nickname&&n!=config.nickname)return t.setLocalData(t.localKey.urlReferrer,self.location.href),void(self.location.href=config.siteDomain+"clear.html")}if(e.logOpenFromDesktop(),this.sdkInterface.getTicket&&s.getTicket()!==!1||(i?this.setTicket({}):"undefined"!=typeof $shouldGetThirdUser&&$shouldGetThirdUser&&hdJsConn.getThirdUser()),config.noFrame&&$("body").css({background:"transparent"}),""!=this.gameUrl){var r=t.localUser.isGuest.get();if(0!=r||t.browser().isMobile()||t.isShowWooolWxQrCode(),0==r&&config.showUserAppList){var c=t.localUser.openId.get(),l=t.localKey.userChooseApp.format([c]),g=t.getLocalData(l).split(",");if(g.indexOf(config.gameId)==-1)return void d.showAppListView()}0==r&&this.showUserInfoTips(),o.showLoading(this.gameUrl)}},preScoreReport:function(e){var a=this;t.localGameData.gameKey.set(e.game_key),t.localGameData.gameScore(a.gameId).set(e.score),$.ajax({type:"post",url:a.siteDomain+"home/gamerankinfo",data:{game_key:e.game_key,open_id:t.localUser.openId.get(),score:e.score},dataType:"json",success:function(e){0==e.code?o.showPreRankList(e.data):alert(e.message)},error:function(){alert("提交成绩出现错误")}})},scoreReport:function(e){var a=this;$.ajax({type:"post",url:a.siteDomain+"home/submitrank",data:e,dataType:"json",success:function(e){0==e.code?a.scoreReportCallback():alert(e.message)},error:function(){alert("提交成绩出现错误")}})},scoreReportCallback:function(e){var a={action:"scoreReport",data:e};this.sendMessage(this.sdkWindow,a),o.showRankShare()},downloadApp:function(e){var a=this,i={code:-1,message:"",showMessage:"已经在微端中",data:{}};return t.browser().isHgameApp()?void a.sendMessageHelper("downloadApp",i):a.sdkInterface&&a.sdkInterface.createShortCut?(hdJsConn.createShortCut(),i.code=0,i.showMessage="操作成功",void a.sendMessageHelper("downloadApp",i)):void(t.browser().isSafari()?(window.location.hash="fr=safarifav",o.showSafariDesktopTip()):t.browser().isWeixin()&&(window.location.hash="fr=wxfav",wx.onMenuShareAppMessage({title:shareData.title,desc:shareData.message,link:window.location.href,imgUrl:shareData.img_url,type:"",dataUrl:"",success:function(){window.location.hash="",t.closeModal("weixin-favorite-tips"),a.sendMessageHelper("downloadApp",{code:0,message:"success",showMessage:"创建成功",data:{}})},cancel:function(){}}),e.extend&&e.extend.wxTips&&$("#weixin-favorite-tips .tips").css("background-image","url("+e.extend.wxTips+")").css("background-size","contain"),t.showModal("weixin-favorite-tips",{overlayCallback:function(){window.location.hash="",t.closeModal("weixin-favorite-tips")}})))},sentUserInfo:function(){var e=t.getUserData();if(delete e.open_id,e.is_wxbuy=0,t.browser().isWeixin()){var a=t.Cookies.getItem("wxbuy");e.is_wxbuy=null!==a?parseInt(a):0}var i={code:0,message:"",showMessage:"",data:e},o={action:"userInfo",data:i};this.sendMessage(this.sdkWindow,o)},gameLogin:function(e,a){var i=this;if(!d.isLoginByWx()){if(i.sdkInterface.showLoginView&&!config.useSelfLogin){var o=document.createEvent("CustomEvent");return o.initCustomEvent("frameLogin",!1,!1,""),void document.dispatchEvent(o)}"game"==config.page?"enter-game"!==a?(t.localUserAction.loginFormModal.set("game"),d.showLoginView()):d.showGameLoginViewList():d.showLoginView(n.updateUserInfo)}},setWeixinShareData:function(e){var a=this,i={code:0,message:"success",showMessage:"分享成功",data:{type:"other"}},t={code:-1,message:"cancel",showMessage:"取消分享",data:{type:"other"}};wx.onMenuShareTimeline({title:e.title,link:e.url,imgUrl:e.img_url,success:function(){i.data.type="weipy",a.afterShare(i)},cancel:function(){t.data.type="weipy",a.afterShare(t)}}),wx.onMenuShareAppMessage({title:e.title,desc:e.message,link:e.url,imgUrl:e.img_url,type:"",dataUrl:"",success:function(){i.data.type="weixin",a.afterShare(i)},cancel:function(){t.data.type="weixin",a.afterShare(t)}}),wx.onMenuShareQQ({title:e.title,desc:e.message,link:e.url,imgUrl:e.img_url,success:function(){i.data.type="qq",a.afterShare(i)},cancel:function(){t.data.type="qq",a.afterShare(t)}}),wx.onMenuShareWeibo({title:e.title,desc:e.message,link:e.url,imgUrl:e.img_url,success:function(){i.data.type="tqq",a.afterShare(i)},cancel:function(){t.data.type="tqq",a.afterShare(t)}})},forceWeixinAuth:function(){if(t.browser().isWeixin()){var e={appid:config.appId,gameid:config.gameId,platform:"WEIXIN_PUB"};return t.ajaxServerData("user/thirdlogin",e,function(e){return 0!=e.code?void t.modalAlert({text:e.message}):(t.setLocalData(t.localKey.urlReferrer,self.location.href),void(window.location.href=e.data.redirectUrl))}),!0}return!1},getRankList:function(e){var a=this;$.ajax({type:"post",url:a.siteDomain+"home/getranklist",data:{seq:e},dataType:"json",success:function(e){0==e.code?n.showRankList(e.data.viewdata.list):alert(e.message)},error:function(){alert("获取排名列表失败")}})},setUserData:function(e){t.setUserData(e.data.open_id,e.data.nickname,e.data.is_guest,e.data.avatar)},getLocalData:function(e){return t.getLocalData(e)},getUserData:function(){return t.getUserData()},setThirdUserId:function(e){t.setThirdUserId(e)},getThirdUserId:function(){return t.getThirdUserId()},userBindPhoneStatus:function(){var e={code:-1,message:"",showMessage:" 未绑定",data:{}};if(config.isBindPhone)var e={code:0,message:"",showMessage:" 已绑定",data:{}};this.sendMessageHelper("wooolsdk:queryBindStateCallback",e)},addDesktop:function(){return config.isBindPhone?void(t.browser().isWeixin()?(window.location.hash="fr=wxfav",wx.onMenuShareAppMessage({title:shareData.title,desc:shareData.message,link:window.location.href,imgUrl:shareData.img_url,type:"",dataUrl:"",success:function(){window.location.hash="",t.closeModal("weixin-favorite-tips")},cancel:function(){}}),t.showModal("weixin-favorite-tips",{overlayCallback:function(){window.location.hash="",t.closeModal("weixin-favorite-tips")}})):t.browser().isAndroid()?t.ajaxServerData("game/microdownload",{appid:config.appId,gameid:config.gameId},function(e){0==e.code?""!=e.data.link.xhb_link?window.location.href=e.data.link.xhb_link:t.modalAlert({text:"抱歉，暂不支持微端下载"}):t.modalAlert(e.message)}):t.browser().isIos()&&t.browser().isSafari()&&(window.location.hash="fr=safarifav",o.showSafariDesktopTip())):void t.modalAlert({text:"请先绑定手机号"})},queryDesktopState:function(){var e=this,a=t.getUrlParameter(location.hash,"fr");""==a&&(a=t.getUrlParameter(location.hash,"from"));var i=["wxfav","safarifav","wdapp"];i.indexOf(a)!==-1?config.openfavgame=1:t.browser().isIos()?t.browser().isSafari()||t.browser().isWeixin()||(config.openfavgame=1):t.browser().isAndroid(),e.sdkInterface&&e.sdkInterface.getMicroClientInfo&&(config.openfavgame=1),c.isChannel(config.appId,c.channels.YOUJIU)&&(config.openfavgame=1);var o={code:0,message:"",showMessage:" ",data:{isfav:config.openfavgame,from:a}};this.sendMessageHelper("wooolsdk:queryDesktopStateCallback",o)},logOpenFromDesktop:function(){var e=this,a=t.getUrlParameter(location.hash,"fr");""==a&&(a=t.getUrlParameter(location.hash,"from")),e.sdkInterface&&e.sdkInterface.getMicroClientInfo&&(a="wdapp");var i=["wxfav","safarifav","wdapp","sc"];if(i.indexOf(a)!==-1){var o={};o.appid=config.appId,o.gameid=config.gameId,"wxfav"==a?o.type=1:"safarifav"==a?o.type=2:"sc"==a?o.type=3:o.type=0,t.ajaxServerData("report/opengame",o,function(e){})}},safariDesktopModel:function(e){if("undefined"!=typeof config.gameId){var a=document.getElementById("safari-app-capable");1==e?a.content="yes":a.content="no"}},backPop:function(e){var a=this;if("string"==typeof e.css&&"string"==typeof e.html){var i={};t.addStyleString(e.css);var o=document.createElement("div");o.id="h5-recommend-pop",o.innerHTML=e.html,o.onclick=function(e){var t=e.srcElement||e.target,s=!1;i={customKey:"backpop"};var r=document.getElementById("pop-modal-content").getAttribute("popAction");if(i.customVal1=r,"returnbtn"===t.className){i.customVal2="leave",s=!0;var d=t.getAttribute("backurl");d?d.indexOf("http")>-1?window.location.href=d:"continue"===d?(o.style.display="none",n.style.display="none",i.customVal2="close"):window.location.href=d:window.history.go(-3)}else if("close-btn"===t.className)s=!0,o.style.display="none",n.style.display="none",i.customVal2="close";else if(t.className.indexOf("link-elem")>-1){var c=t.getAttribute("urllink");c.indexOf("http")>-1?top.location.href=c:"continue"===c&&(o.style.display="none",n.style.display="none"),s=!0,i.customVal2="item",i.customVal3=t.getAttribute("popid"),i.customVal4=c}if(s){var l={code:0,message:"",showMessage:"",data:i};a.sendMessageHelper("backPopReport",l)}},document.body.appendChild(o);var n=document.createElement("div");n.id="h5-popModal-overlay",document.body.appendChild(n),n.onclick=function(e){o.style.display="none",n.style.display="none",i={customKey:"backpop",customVal2:"close"};var t=document.getElementById("pop-modal-content").getAttribute("popAction");i.customVal1=t;var s={code:0,message:"",showMessage:"",data:i};a.sendMessageHelper("backPopReport",s)}}},showBackPop:function(e){var a=document.getElementById("h5-recommend-pop");if(a){a.innerHTML=e.html,a.style.display="block";var i=a.offsetWidth;a.style.marginLeft=-(i/2)+"px"}var t=document.getElementById("h5-popModal-overlay");t&&(t.style.display="block")},showImagePop:function(e){url="http://f11.hdurl.me/gc/pcchuanshi/images/wechat-code-new.jpg","undefined"!=typeof e&&"undefined"!==e.imgurl&&(url=e.imgurl),t.modalTip({text:'<div><img src="'+url+'" alt="" style="width:90%;height:auto;display:block;margin:0 auto"></div>',canCancel:!0})},showUserAccountInfo:function(){t.ajaxServerData("user/getuserinfo",{},function(e){if(0==e.code){var a=e.data;$("#h5c-userinfo-modal .account-icon").hide(),"weixin"==a.account_type?$("#h5c-userinfo-modal .weixin-icon").show():"qq"==a.account_type?$("#h5c-userinfo-modal .qq-icon").show():"weibo"==a.account_type?$("#h5c-userinfo-modal .weibo-icon").show():"phone"==a.account_type&&$("#h5c-userinfo-modal .phone-icon").show();var i=$("#h5c-userinfo-modal .avatar img"),o=$("#h5c-userinfo-modal .openid"),n=$("#h5c-userinfo-modal .nickname");a.avatar!==i.attr("src")&&i.attr("src",a.avatar),i.show(),a.name!==n.text()&&n.text(a.name),a.open_id!==o.text()&&o.text(a.open_id),$("#h5c-userinfo-modal .close-userinfo-modal").unbind(),$("#h5c-userinfo-modal .close-userinfo-modal").bind("click",function(){t.closeModal("h5c-userinfo-modal")}),t.showModal("h5c-userinfo-modal"),$("#h5c-userinfo-modal .switch-user").unbind(),$("#h5c-userinfo-modal .switch-user").bind("click",function(){t.closeModal("h5c-userinfo-modal");var e=document.createEvent("CustomEvent");return e.initCustomEvent("frameMenuLogin",!1,!1,""),eventData.from="",document.dispatchEvent(e),console.log("To Call Frame menu login")}),a.is_phone_user?$("#h5c-userinfo-modal .bind-mobile").hide():a.is_bind_phone?($("#h5c-userinfo-modal .bind-mobile").hide(),$("#h5c-userinfo-modal .bind-mobile-status").show()):t.browser().isHgameApp()&&($("#h5c-userinfo-modal .bind-mobile").show(),$("#h5c-userinfo-modal .bind-mobile").unbind(),$("#h5c-userinfo-modal .bind-mobile").bind("click",function(){t.closeModal("h5c-userinfo-modal"),d.showBindUserPhoneView()}))}else t.modalAlert({text:e.message})})},showUserInfoTips:function(){c.isChannel(this.appId,c.channels.CMBLIFE)||t.ajaxServerData("user/getuserinfo",{},function(e){if(0==e.code){var a=e.data,i="<div class='account-icon'></div>";"weixin"==a.account_type?i="<div class='weixin-icon account-icon'></div>":"qq"==a.account_type?i="<div class='qq-icon account-icon'></div>":"weibo"==a.account_type?i="<div class='weibo-icon account-icon'></div>":"phone"==a.account_type&&(i="<div class='phone-icon account-icon'></div>"),a.name=a.name+"，欢迎回来！";var t="";t+="<div class='user-info-animate-tips'>",t+="<div class='avatar'><img src='"+a.avatar+"'></div>",t+="<div class='user-name'><span>"+a.name+"</span></div>",t+=i,t+="</div>",$("body").append(t),$(".user-info-animate-tips").show().animate({top:"10px"},1e3),setTimeout(function(){$(".user-info-animate-tips").fadeOut()},5e3)}})},callWxMethod:function(e,a){var i=this;if("startRecord"==e)wx.startRecord(),wx.onVoiceRecordEnd({complete:function(e){var a={code:0,message:"",showMessage:"",data:{localId:e.localId}};i.sendMessageHelper("voiceRecordEnd",a)}});else if("stopRecord"==e)wx.stopRecord({success:function(a){var t={code:0,message:"",showMessage:"",data:{localId:a.localId}};i.sendMessageHelper(e,t)}});else if("uploadVoice"==e){if("undefined"==typeof a.localId)return void console.log("上传的音频的本地ID错误");wx.uploadVoice({localId:a.localId,isShowProgressTips:1,success:function(a){var t={code:0,message:"",showMessage:"",data:{serverId:a.serverId}};i.sendMessageHelper(e,t)}})}else if("playVoice"==e){if("undefined"==typeof a.localId)return void console.log("播放音频的本地ID错误");wx.playVoice({localId:a.localId}),wx.onVoicePlayEnd({success:function(e){var a={code:0,message:"",showMessage:"",data:{localId:e.localId}};i.sendMessageHelper("voicePlayEnd",a)}})}else if("pauseVoice"==e){if("undefined"==typeof a.localId)return void console.log("暂停音频的本地ID错误");wx.pauseVoice({localId:a.localId})}else if("stopVoice"==e){if("undefined"==typeof a.localId)return void console.log("需要停止的音频的本地ID错误");wx.stopVoice({localId:a.localId})}},getMicroDeviceInfo:function(){if("object"==typeof AppExt&&"undefined"!=typeof AppExt.getDeviceInfo){deviceInfo=AppExt.getDeviceInfo();var e={action:"microinfo",data:{deviceInfo:deviceInfo}};this.sendMessage(this.sdkWindow,e)}}},e.exports=g},function(e,a,i){var t=i(8),o=i(1),n=i(5),s=i(6);$(function(){try{n.indexPagePosition=o.localHomePage.indexPagePosition.get(),o.localHomePage.indexPagePosition.remove(),o.browser().isMobile()?n.toggleRotationTip():(n.gameFrame[0]&&n.gameFrame[0].setAttribute("width","100%"),n.setBodyFontSize()),FastClick.attach(document.body),frame=new t(config),s.addEvent(),frame.enterGame(),$(".menu-login").hide()}catch(e){$(".h5center-loading").hide(),alert("发生异常:"+e.message)}})}]);